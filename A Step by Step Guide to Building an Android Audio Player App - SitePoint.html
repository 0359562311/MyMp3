<!DOCTYPE html>
<!-- saved from url=(0087)https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/ -->
<html lang="en" data-react-helmet="lang"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><style type="text/css">svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}</style><style data-href="/styles.021e7fd599bcb7890653.css" id="gatsby-global-css">.inline-gatsby-image-wrapper,.inline-gatsby-image-wrapper span{display:inline-block}code[class*=language-],pre[class*=language-]{color:#657b83}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{background:#eee8d5;color:#657b83}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}:root{--typescale:1.15}@media (min-width:624px){:root{--typescale:1.25}}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}*,:after,:before{box-sizing:border-box}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:18px;text-rendering:optimizeLegibility}@media (min-width:624px){html{font-size:18px}}@media (min-width:936px){html{font-size:18px}}@media (min-width:1248px){html{font-size:20.25px}}body{background-color:#fff;color:#3a3a3a;font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:1rem;font-weight:300;line-height:1.7777777777777777rem}b,strong{font-weight:700}blockquote,figcaption,ol,p,pre,table,ul{font-size:1rem;font-weight:300;line-height:1.77778rem;margin-bottom:1.77778rem;margin-top:0}h1,h2,h3,h4,h5,h6{color:#262626;font-weight:400;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h1{font-size:calc(1rem*var(--typescale)*var(--typescale)*var(--typescale)*var(--typescale));line-height:3.55556rem;margin-bottom:1.7777777777777777rem;margin-top:.88889rem}h2{font-size:calc(1rem*var(--typescale)*var(--typescale)*var(--typescale));line-height:2.66667rem;margin-bottom:1.77778rem}h3{font-size:calc(1rem*var(--typescale)*var(--typescale))}h3,h4{line-height:1.77778rem;margin-bottom:.88889rem}h4{font-size:calc(1rem*var(--typescale));margin-top:1.77778rem}h5{font-size:1rem;line-height:.88889rem;margin-top:.88889rem}h5,h6{margin-bottom:.88889rem}h6{font-size:calc(1rem/var(--typescale));line-height:1.1}.small{font-size:calc(1rem/var(--typescale)/var(--typescale));line-height:.88889rem;margin-bottom:.88889rem;margin-top:0}a{color:#3ec9cb;font-weight:400;line-height:inherit;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}a:hover{color:#24b3b5}blockquote{border-left:5px solid #e5e5e5;margin-left:0;margin-right:0;margin-top:0;padding:.75rem 1rem}blockquote p{margin-bottom:0}abbr,acronym{border-bottom:1px dotted #e9e9e9;color:#262626;cursor:help;font-size:90%;text-transform:uppercase}abbr{text-transform:none}kbd{background-color:#ededed;border:1px solid #dbdbdb;border-radius:3px;color:#222;font-family:Consolas,Menlo,Courier,monospace;font-size:.875rem;margin:0;padding:3px 5px}pre,pre[class*=language-]{background:#f9f9fa;border:1px solid rgba(51,51,51,.1);margin-bottom:1.77778rem;margin-top:0;overflow:auto;padding:.75rem}code[class*=language-],pre[class*=language-]{background:#f9f9fa;font-size:.875rem}:not(pre)>code{background:#f5f2f0;border:1px solid rgba(51,51,51,.1);border-radius:3px;color:#3a3a3a;padding:3px 5px}img{height:auto;max-width:100%}figure{margin:0}figcaption{font-size:.875rem}table{background:none;border-collapse:collapse;border-spacing:0;width:100%}table tfoot,table thead{font-weight:700}table tr td,table tr th{border:1px solid #ccc;font-size:.875em;line-height:1.5;padding:10px;text-align:center}label{color:#3a3a3a;cursor:pointer;display:block;font-size:.875rem;font-weight:700;margin-bottom:.5rem}input[type=date],input[type=datetime-local],input[type=datetime],input[type=email],input[type=month],input[type=number],input[type=password],input[type=search],input[type=tel],input[type=text],input[type=time],input[type=url],input[type=week],textarea{background-color:#fff;border:1px solid #d8d8d8;border-radius:2px;display:block;font-family:inherit;font-size:.875rem;margin:0 0 1rem;padding:.5rem;transition:all .15s linear;width:100%}.sr-only{-webkit-clip:rect(0 0 0 0);clip:rect(0 0 0 0);border:none;margin:0}#gatsby-focus-wrapper{display:flex;flex-direction:column;justify-content:space-between;min-height:100vh}#sovrn_beacon{display:none;visibility:hidden}.cover-spine-overlay{position:relative}.cover-spine-overlay:after{background:linear-gradient(90deg,rgba(0,0,0,.3),rgba(73,36,36,0) 1%,hsla(0,0%,98%,.23) 2.5%,rgba(0,0,0,.1) 3.4%,hsla(0,0%,98%,.1) 4.2%,rgba(0,0,0,.1) 5.6%,hsla(0,0%,98%,.2) 6.8%,transparent 25%,transparent 30%,rgba(0,0,0,.2));content:"";height:100%;left:0;position:absolute;top:0;width:100%}.grecaptcha-badge{visibility:hidden}.s65o7al{border:1px solid transparent;border-radius:2px;cursor:pointer;display:inline-block;font-weight:700;padding:.25rem .5rem;text-align:center;-webkit-text-decoration:none;text-decoration:none;transition:.3s ease;transition-property:border-color,background-color,color}.s65o7al[data-type=outline]{background-color:#fff;border-radius:4px}.s65o7al[data-type=outline][data-color=pink]{border:2px solid #fa3292;color:#fa3292}.s65o7al[data-type=outline][data-color=pink]:active,.s65o7al[data-type=outline][data-color=pink]:hover{color:#fa3292}.s65o7al[data-type=outline][data-color=teal]{border:2px solid #3ec9cb;color:#3ec9cb}.s65o7al[data-type=outline][data-color=teal]:active,.s65o7al[data-type=outline][data-color=teal]:hover{color:#3ec9cb}.s65o7al[data-type=outline][data-color=blue]{border:2px solid undefined;color:undefined}.s65o7al[data-type=outline][data-color=blue]:active,.s65o7al[data-type=outline][data-color=blue]:hover{color:undefined}.s65o7al:not([data-type=outline]){color:#fff}.s65o7al:not([data-type=outline])[data-color=pink]{background-color:#fa3292;border-color:#fa3292}.s65o7al:not([data-type=outline])[data-color=pink]:active,.s65o7al:not([data-type=outline])[data-color=pink]:hover{background-color:#fa0b7e;color:#fff}.s65o7al:not([data-type=outline])[data-color=teal]{background-color:#3ec9cb;border-color:#3ec9cb}.s65o7al:not([data-type=outline])[data-color=teal]:active,.s65o7al:not([data-type=outline])[data-color=teal]:hover{color:#fff}.s65o7al:not([data-type=outline])[data-color=darkGrey]{background-color:#333;border-color:#333}.s65o7al:not([data-type=outline])[data-color=darkGrey]:active,.s65o7al:not([data-type=outline])[data-color=darkGrey]:hover{background-color:#232023;color:#fff}.s65o7al:not([data-type=outline])[data-color=blue]{background-color:undefined;border-color:undefined}.s65o7al:not([data-type=outline])[data-color=blue]:active,.s65o7al:not([data-type=outline])[data-color=blue]:hover{color:#fff}.s65o7al[disabled],.s65o7al[disabled]:hover{background-color:#efefef;border-color:#efefef;color:#a2a2a2;cursor:default}.s65o7al[data-size=small]{font-size:11px;height:1.77778rem;line-height:1.18519rem}.s65o7al[data-size=medium]{font-size:15px;height:1.77778rem;line-height:1.18519rem}.s1aa88yd{font-size:1rem;font-weight:var(--s1aa88yd-0);line-height:1.77778rem;margin-bottom:1.77778rem;margin-top:0}.s1aa88yd[data-size=small]{font-size:.75614rem;line-height:1.01587rem;margin-bottom:.88889rem;margin-top:0;padding:0}.s1aa88yd[data-size=large]{font-size:1.15rem;line-height:1.33333rem;margin-bottom:2.37037rem;margin-top:0;padding:0}@media (min-width:936px){.s1aa88yd[data-size=large]{font-size:1.25rem;line-height:1.77778rem;margin-bottom:1.77778rem}}.spapid0{display:flex;flex-direction:column;padding:.75rem 1.25rem}.spapid0>div{display:flex;justify-content:center}.spapid0[data-layout=compact] .bk2yy1g{flex-basis:35%;max-width:35%;padding:0 .5rem 0 0}.spapid0[data-layout=compact] .bk2yy1g img{max-height:120px}.spapid0[data-layout=compact] .p165lja{flex-basis:65%;max-width:65%}.spapid0[data-layout=compact] .cpptuun{margin-top:0}.bk2yy1g{flex-basis:50%;max-width:50%;padding:0 1.5rem 0 0}.bk2yy1g .book-cover{margin-bottom:.88889rem}.p165lja{flex-basis:50%;max-width:50%;padding:0}.p165lja a{color:inherit}.p165lja p{font-weight:500}@media (max-width:1248px){.p165lja p{font-size:15px;line-height:1.25;margin-top:.25rem}}.cpptuun{justify-content:center;margin-top:.75rem}.cpptuun,.cpptuun a,.cpptuun button{width:100%}.t10axsgu{font-size:21px;font-weight:700;line-height:1.1;margin:0 0 .5rem;text-align:center}.s1fa1fl6{align-items:center;display:flex;flex-direction:column;margin:.88889rem auto;padding-top:1rem;width:100%}@media (min-width:936px){.s1fa1fl6{align-items:start;flex-direction:row;width:80%}}.b1jvz9up{padding:0 .75rem}.b1jvz9up .book-cover{margin-bottom:1rem;min-width:100px}@media (min-width:624px){.b1jvz9up{flex-basis:20%;max-width:20%}}@media (min-width:936px){.b1jvz9up{flex-basis:30%;max-width:30%}}.ftefwrt{flex-basis:70%;max-width:70%;text-align:center}@media (min-width:936px){.ftefwrt{margin-left:2rem;text-align:left}}.ftefwrt p a{color:inherit;font-weight:inherit}.ftefwrt form{display:flex;flex-direction:column;margin-top:1rem;width:100%}@media (min-width:1080px){.ftefwrt form{flex-direction:row}.ftefwrt form input{font-size:14px;height:36px;margin-right:10px}.ftefwrt form input:-ms-input-placeholder{color:#adadad}.ftefwrt form input::placeholder{color:#adadad}.ftefwrt form input:first-child{flex-basis:30%;max-width:30%}.ftefwrt form input:nth-child(2){flex-basis:40%;max-width:40%}.ftefwrt form button{height:36px;width:180px}}.iczpd8b{height:36px}.sxi2kx8{align-items:center;background:#f3f3f3;border:1px solid #ddd;display:flex;flex-direction:column;height:580px;width:300px}.sxi2kx8 h4{align-self:normal;font-size:1.15rem;font-weight:400;line-height:1.77778rem;margin-bottom:.25rem;margin-top:.88889rem;padding:0 1rem}.sxi2kx8 hr{border-top:1px solid #8c8b8b;color:#ddd;margin:1rem 0;width:80%}.sxi2kx8 .cover-spine-overlay.gatsby-image-wrapper{max-height:130px;overflow:hidden}.sxi2kx8 img{max-height:130px}.sd6omvc{border:1px solid #f2e7ae;color:#fff;display:flex;height:90px;justify-content:space-between;margin:0 auto;padding:1rem;width:728px}.lc8f00h{align-items:baseline;display:flex;flex-basis:12%;justify-content:center;max-width:12%;position:relative}.lc8f00h img{width:50%}.d19jbuur{flex-basis:60%;max-width:60%}.twfhr5i{color:#fff;margin-top:0;-webkit-text-decoration:none;text-decoration:none}.p1j5sdu9{clear:right;line-height:.88889rem;list-style:none;margin:0;padding:0}.p1j5sdu9,.p1j5sdu9 li{display:flex;float:left}.p1j5sdu9 li{align-items:center;background-position:0 0;background-repeat:no-repeat;background-size:auto 40%;margin:0 1rem 0 0;text-indent:1rem}.p1j5sdu9 li label{color:#fff;font-weight:500;-webkit-text-decoration:none;text-decoration:none}.cn5bp4b{background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 22 22' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 7V3H1v18h20V7H11zM5 19H3v-2h2v2zm0-4H3v-2h2v2zm0-4H3V9h2v2zm0-4H3V5h2v2zm4 12H7v-2h2v2zm0-4H7v-2h2v2zm0-4H7V9h2v2zm0-4H7V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z' fill='%23999'/%3E%3C/svg%3E")}.ltrlnvs{background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 22 22' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 1C7.134 1 4 4.358 4 8.5 4 12.642 9.833 21 11 21c1.167 0 7-8.358 7-12.5C18 4.358 14.866 1 11 1zm0 12.5c-2.574 0-4.667-2.244-4.667-5s2.093-5 4.667-5 4.667 2.244 4.667 5-2.093 5-4.667 5z' fill='%23999'/%3E%3C/svg%3E")}.pytq4p7{background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 22 22' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M16.661 11.297a.375.375 0 000-.527l-.553-.54a.4.4 0 00-.54 0l-5.337 5.204-2.644-2.579a.4.4 0 00-.541 0l-.553.54a.375.375 0 000 .527l3.461 3.375c.157.14.397.14.553 0l6.154-6zM2.538 19.5v-12h16.924v12H2.538zM7.154 5.25c0 .21-.168.375-.385.375H6a.375.375 0 01-.385-.375V1.875c0-.21.169-.375.385-.375h.77c.216 0 .384.164.384.375V5.25zm9.23 0c0 .21-.168.375-.384.375h-.77a.375.375 0 01-.384-.375V1.875c0-.21.168-.375.385-.375H16c.216 0 .385.164.385.375V5.25zM21 4.5c0-.82-.697-1.5-1.538-1.5h-1.539V1.875C17.923.844 17.058 0 16 0h-.77c-1.057 0-1.922.844-1.922 1.875V3H8.692V1.875C8.692.844 7.827 0 6.77 0H6C4.942 0 4.077.844 4.077 1.875V3H2.538C1.698 3 1 3.68 1 4.5v15c0 .82.697 1.5 1.538 1.5h16.924c.84 0 1.538-.68 1.538-1.5v-15z' fill='%23999'/%3E%3C/svg%3E")}.s1bbj88n{flex-basis:16%;margin-right:.5rem;max-width:16%}.t6yekoa{display:flex;flex-basis:22%;flex-wrap:wrap;list-style:none;margin:0;max-width:22%;padding:0}.tloy83{line-height:.71111rem}.tloy83 label{background:#444;color:#999;display:inline;font-size:.57175rem;font-weight:500;margin-right:.25rem;padding:0 .25rem;-webkit-text-decoration:none;text-decoration:none}.sfiozro{display:none}@media (min-width:936px){.sfiozro{display:block;position:-webkit-sticky;position:sticky;text-align:center;top:130px;width:300px}.sfiozro>div:first-child>div,.sfiozro ins{background-color:#fff;border:1px solid #e2e2e2;justify-content:center}.sfiozro .report-ad{color:#909090;font-size:13px;line-height:20px}}.s3srsdt{display:none}.s3srsdt[data-type=book_form]{display:block}@media (min-width:936px){.s3srsdt{display:block;position:relative;z-index:0}.s3srsdt[data-type=remote]{height:90px;width:728px}.s3srsdt[data-type=book]{background:#fff;height:250px;min-width:300px;width:300px}.s3srsdt[data-type=books_new]{height:600px;margin-bottom:1rem;width:300px}.s3srsdt[data-type=no_fallback]{margin-bottom:1rem;position:unset;width:300px}}.a19jghoq{align-items:center;display:flex;flex-direction:column;min-height:var(--a19jghoq-0);z-index:2}.a19jghoq>div:first-child>div,.a19jghoq ins{animation:fadein-a19jghoq 2s;background-color:#fff;border:1px solid #e2e2e2;justify-content:center}.a19jghoq>div:first-child>div{display:flex!important;height:100%!important;width:100%!important}.a19jghoq:not([data-type=no_fallback]){position:absolute}.a19jghoq:not([data-type=no_fallback])+div{left:0;position:absolute;top:0}.a19jghoq[data-type=books_new]>div{width:300px}.a19jghoq .report-ad{color:#909090;font-size:10px;line-height:20px}@keyframes fadein-a19jghoq{0%{opacity:0}to{opacity:1}}.s40erwn{-webkit-clip:rect(0 0 0 0);clip:rect(0 0 0 0);background-color:#efefef;border-radius:3px;box-shadow:0 0 2px 2px rgba(0,0,0,.6);color:#232023;display:block;font-size:.75rem;font-weight:700;height:1px;overflow:hidden;position:absolute;-webkit-text-decoration:none;text-decoration:none;width:1px;z-index:100000}.s40erwn:focus{-webkit-clip:auto!important;clip:auto!important;height:auto;left:5px;padding:.5rem .75rem;position:fixed;top:5px;width:auto}.lwzbxzs{align-items:center;display:flex}.lwzbxzs svg{fill:#fff;height:1.7777777777777777rem}.jglk3p4{display:none;font-size:.875rem;margin-left:.5rem}@media (min-width:936px){.jglk3p4{display:inline-block}}.nj1r5zu{background-color:#232023;height:3.55556rem;padding:0 1.7777777777777777rem;top:7.11111rem}.napbdwr,.nj1r5zu{width:100%;z-index:1}.napbdwr{display:flex;flex-direction:column;flex-grow:1;justify-content:flex-end;left:0;list-style:none;margin:0;opacity:0;padding:0;position:absolute;top:3.55556rem;transform:scaleY(0);transform-origin:top center;transition:.15s ease-in;transition-property:opacity,transform,visibility;visibility:hidden}.napbdwr.open{opacity:1;transform:scaleY(1);visibility:visible;z-index:10}@media (min-width:936px){.napbdwr{align-items:center;flex-direction:row;height:100%;opacity:1;position:static;transform:none;visibility:visible;width:auto}.napbdwr,.napbdwr>a:focus+ul{display:flex}.napbdwr .mobile-logout{display:none}}.ns13f0v{background-color:#232023;line-height:2.66667rem;margin:0}.ns13f0v:nth-child(odd){background-color:#333}@media (min-width:936px){.ns13f0v{align-items:center;display:flex;height:100%;line-height:normal;padding:0 1rem;position:relative}.ns13f0v:nth-child(odd){background-color:transparent}}.ny3bhvl{background-color:transparent;color:#efefef;cursor:pointer;display:inline-block;font-weight:400;padding:0 1.7777777777777777rem;position:relative;-webkit-text-decoration:none;text-decoration:none;width:100%}.ny3bhvl:after{background:hsla(0,0%,100%,0);bottom:-.4rem;content:"";height:2px;position:absolute;right:0;transition:all .1s ease-out;width:0}.ny3bhvl:hover{color:#efefef}@media (min-width:936px){.ny3bhvl{padding:0}.ny3bhvl:hover{text-shadow:1px 0 0;transition:text-shadow .1s ease-out}.ny3bhvl:hover:after{background:hsla(0,0%,100%,.3);color:#fff;transition:all .1s ease-out;width:100%}}.s1tue4ob{background-color:#232023;border-bottom-left-radius:8px;border-bottom-right-radius:8px;box-shadow:0 4px 4px rgba(0,0,0,.25);display:none;flex-direction:column;height:auto;margin:0;min-width:9rem;padding:0;position:absolute;right:0;top:3.55556rem}@media (min-width:936px){.s1tue4ob.open{display:flex}}.s1dgl2p7{display:flex;padding:0 1rem}.s1dgl2p7:first-child{border-top:1px solid #333}.s1dgl2p7 .ny3bhvl{font-size:.875rem;line-height:2.5}.s1dgl2p7 .ny3bhvl:after{bottom:.4rem}.h1sloftb{background-color:transparent;border-color:transparent;height:100%;padding:0}.h1sloftb span{background-color:#fff;border-radius:.5rem;display:block;height:.3rem;transform:translateY(0);transform-origin:50% 50%;transition:all .45s cubic-bezier(.45,.45,.37,1.36);width:2.5rem}.h1sloftb span:after,.h1sloftb span:before{background-color:#fff;border-radius:inherit;content:"";display:inherit;height:inherit;left:0;position:absolute;top:0;transform-origin:50% 50%;transition:transform .45s cubic-bezier(.45,.45,.37,1.36);width:inherit}.h1sloftb span:before{transform:translateY(-.75rem)}.h1sloftb span:after{transform:translateY(.75rem)}.h1sloftb[aria-expanded=true] span{background-color:#232023;transform:translate(1rem)}.h1sloftb[aria-expanded=true] span:before{transform:translate(-1rem) rotate(135deg)}.h1sloftb[aria-expanded=true] span:after{transform:translate(-1rem) rotate(-135deg)}@media (min-width:936px){.h1sloftb{display:none}}.szqta7{position:relative}.c19tig4s{align-items:center;display:flex;height:100%;justify-content:space-between;margin:0 auto;max-width:1248px;width:100%}.t1axwbis{display:none}@media (min-width:936px){.t1axwbis{align-items:center;background-color:#000;display:flex;height:6.22222rem;justify-content:center}}.syzew71 nav{background-color:#232023;padding:0 1.7777777777777777rem;width:100%;z-index:1}.syzew71 h2{color:#efefef;font-size:1.25rem;font-weight:700;margin:0 0 8px}.syzew71 a{word-wrap:break-word;color:#a2a2a2;font-size:.875rem;font-weight:300;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}.syzew71 a:hover{color:#3ec9cb}.syzew71 p{color:#a2a2a2;font-size:.75rem;font-weight:400;line-height:2.5rem;margin:0}@media (min-width:624px){.syzew71 p{font-size:.875rem}}.syzew71 p.recaptcha-branding,.syzew71 p.recaptcha-branding a{font-size:.7rem;line-height:1rem}.syzew71 p.recaptcha-branding a{font-weight:700}.syzew71 ul{color:#a2a2a2;line-height:1.77rem;list-style:disc;margin:0 0 1.77rem;padding-left:0}@media (min-width:1248px){.syzew71 ul{margin:0 0 1.777rem 1.45rem}}.syzew71 li{display:list-item;margin:0 0 8px 16px}.syzew71 li:first-child{list-style:none;margin:0}.syzew71 .footer-links{display:flex;flex-wrap:wrap;justify-content:space-between;margin:32px 0 0;padding:16px;width:100%}.syzew71 .footer-extra{align-self:flex-start;display:flex;flex-direction:column;margin:32px 0 20px;padding:12px 16px 16px;width:100%}@media (min-width:624px){.syzew71 .footer-extra{flex-direction:row}}@media (min-width:1248px){.syzew71 .footer-extra{flex-direction:column;height:320px;width:400px}}.syzew71 .footer-extra h2{margin:0 0 12px}.syzew71 .footer-extra ul{align-items:baseline;display:flex;flex-direction:row;margin:0}@media (min-width:624px){.syzew71 .footer-extra ul{margin:0 25px 1.777rem 0}}@media (min-width:1248px){.syzew71 .footer-extra ul{flex-direction:column}}.syzew71 .footer-extra li{list-style:none}.syzew71 .footer-extra li a{font-size:1rem;margin-left:16px}.syzew71 .footer-extra li a:first-child{padding-left:0}.s1no14m2{border-left:1px solid #4f4f4f;display:none;height:280px;visibility:hidden;width:1px}@media (min-width:1248px){.s1no14m2{display:block;margin:0 25px;visibility:visible}}.crfuex9{align-items:flex-start;display:flex;flex-direction:column;height:100%;justify-content:space-between;margin:0 auto;max-width:1248px;width:100%}@media (min-width:1248px){.crfuex9{align-items:center;flex-direction:row}}.s13se1v{background:#232023;height:66px}.s13se1v[data-display=true]{display:block}.s13se1v[data-display=false]{display:none}@media (max-width:1186px){.s13se1v{height:105px}}@media (max-width:748px){.s13se1v{height:135px}}@media (max-width:624px){.s13se1v{height:0}}.sh8vdc0{all:initial;box-sizing:border-box;font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:18px;position:fixed;width:100%;z-index:97}@media (max-width:624px){.sh8vdc0{position:relative}.sh8vdc0[data-showInMobile=true]{display:block}.sh8vdc0[data-showInMobile=false]{display:none}}.sh8vdc0 .sbBody{align-items:center;background:var(--sh8vdc0-1);color:#fff;display:flex;flex-wrap:wrap;justify-content:center;line-height:1.77778rem;margin:0;min-height:0;padding:.3em 2em}.sh8vdc0 .sbBody>*{margin:.3em}.sh8vdc0 .sbClose{all:initial;background:transparent;border:0;color:#ddd;cursor:pointer;display:inline-flex;font-size:20px;padding:.25em;position:absolute;right:1em}.sh8vdc0 .sbClose rect{fill:currentcolor;stroke:currentcolor}.sh8vdc0 .sbText{font-size:22px;text-align:center}@media (max-width:900px){.sh8vdc0 .sbText{font-size:18px}}.sh8vdc0 .sbButton a{background:var(--sh8vdc0-4);border:0;border-radius:3px;color:#fff;cursor:pointer;display:flex;line-height:1.24444rem;padding:.5em 1.5em;-webkit-text-decoration:none;text-decoration:none;transition:all .3s}@media (max-width:900px){.sh8vdc0 .sbButton a{font-size:16px}}.sh8vdc0 .sbCountdown{color:#fff;display:flex;font-size:1.5em;font-weight:800}.sh8vdc0 .underline{background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 53 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1.2 2l42.2 1.3L1.1 5l51 1.5-43.8.7 28.4 1.9' stroke='%23FD6A37' stroke-width='1'/%3E%3C/svg%3E");background-position-y:bottom;background-repeat:no-repeat;background-size:100% auto;padding:.59259rem 0}.sgcj7nt{fill:#fff;height:auto;width:40px}.sgcj7nt rect{fill:currentcolor;stroke:currentcolor}@media (min-width:624px){.sgcj7nt{width:54px}}.wj3nsdq{flex:1 0 auto;margin:var(--wj3nsdq-0);max-width:var(--wj3nsdq-1);padding:var(--wj3nsdq-2);width:100%}.h47yufh{background-color:#39a7dd;background-image:url(/static/art-b1a61dd639d149b2a5b02d3b3fd9465e.svg),url(https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2020/03/1583274679bgHeader.svg);background-position:50%;background-repeat:no-repeat;background-size:cover}@media (min-width:624px){.h47yufh{background-size:100%}}.wejvd1i{background:rgba(0,0,0,.4);display:flex;flex-direction:column;justify-content:space-between;margin:0 auto 30px;max-width:1248px;padding:20px 30px;position:relative}@media (min-width:936px){.wejvd1i{flex-direction:row;margin:0 auto 70px}.h1enitpv{margin:0 40px 0 0}}@media (min-width:1248px){.h1enitpv{margin:0 60px 0 0}}.h1c5k4jh{background:rgba(0,0,0,.4);margin:0 0 20px;padding:0 20px}.h1c5k4jh,.h1g7n5vf{color:#fff}.hkugkz0{margin:0 auto;min-width:260px;padding:0 20px}.hkugkz0,.hkugkz0 img{width:100%}@media (min-width:624px){.hkugkz0{width:390px}}@media (min-width:936px){.hkugkz0{width:300px}}.te3m2ns{margin:0 auto 30px;max-width:1248px;padding:0 10px}@media (min-width:936px){.te3m2ns{margin:0 auto 70px;padding:0}}.t14n4dtd{font-weight:500;text-align:center}.t1iv1ez2{margin:0 0 70px}.s1cgicup{display:flex;flex-wrap:wrap;list-style:none;margin:0;padding:0}.s10mhe8q{align-items:center;display:flex;flex-direction:column;margin:0 0 35px;width:50%}.s10mhe8q .gatsby-image-wrapper{border-radius:50%;margin-bottom:20px}@media (max-width:calc(624px - 1px)){.s10mhe8q .gatsby-image-wrapper{height:76px!important;width:76px!important}}@media (min-width:936px){.s10mhe8q{width:25%}}.s1f8wlql{font-size:1rem;font-weight:700;text-align:center}@media (min-width:624px){.s1f8wlql{font-size:1.25rem}}@media (min-width:936px){.s1f8wlql{font-weight:500}}.szm0uy8{font-size:.875rem;font-weight:400;text-align:center}@media (min-width:624px){.szm0uy8{font-size:1rem}}.s17ojqon{color:#1da1f3;-webkit-text-decoration:none;text-decoration:none}.s17ojqon>*,.s17ojqon>:after,.s17ojqon>:before{pointer-events:none}.s17ojqon svg.share-icon{transition:width .2s linear;width:1rem}.s17ojqon:focus,.s17ojqon:hover{color:#1da1f3}.s17ojqon:focus svg.share-icon,.s17ojqon:hover svg.share-icon{transition:width .2s linear;width:1.25rem}.hpcm1d{font-weight:700;line-height:1.4;margin:0;text-align:center}.hpcm1d>span{font-weight:400}.b1aze5ld{background-color:#3ec9cb;background-image:url(https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2016/08/1470794003sp_spots.png);background-repeat:no-repeat;background-size:cover;padding:4rem 1.7777777777777777rem}.b1aze5ld .hpcm1d{color:#fff}.sai0pj6{background-color:var(--sai0pj6-2);padding:3rem 1.7777777777777777rem;text-align:center}.sai0pj6 .hpcm1d{color:var(--sai0pj6-6);font-size:1.5rem;margin-bottom:2rem}.wkbze5g{margin:0 auto;max-width:var(--wkbze5g-0)}.s1b0uswk{display:block}@media (min-width:624px){.s1b0uswk{display:flex;flex-wrap:wrap}}.s15n5nzn{align-items:center;display:flex;margin-bottom:2rem;width:100%}@media (min-width:624px){.s15n5nzn{width:50%}}@media (min-width:1248px){.s15n5nzn{width:25%}}.s1995y1v{color:#232023;font-size:2.25rem;max-width:50px;width:100%}@media (min-width:624px){.s1995y1v{font-size:3rem;max-width:80px}}.s1bvtlo{color:#3ec9cb;display:block;font-size:1.5rem;line-height:1}@media (min-width:936px){.s1bvtlo{font-size:2rem}}.skr3v84{color:#b9e8ea;font-size:.875rem}@media (min-width:936px){.skr3v84{font-size:1rem}}.so0wx7a{display:flex;flex-direction:column;font-weight:700;line-height:1.2;margin-bottom:0;padding:0 .75rem;text-align:left;text-transform:uppercase;width:calc(100% - 80px)}@media (min-width:624px){.so0wx7a{font-size:2.25rem}}.s1annmd5{align-items:center;background-image:url(https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2016/08/1470364681usa.png);background-position:50%;background-repeat:no-repeat;background-size:contain;display:flex;height:300px;justify-content:center}.s1annmd5 .skr3v84{color:#fff;font-weight:700;margin-bottom:0;text-align:center}@media (min-width:624px){.s1annmd5 .skr3v84{font-size:1.5rem}}.s14jkbrz{height:auto;width:40px}@media (min-width:624px){.s14jkbrz{width:54px}}.s1ilaur{display:block;margin:0 auto;padding:.75rem;width:100%}@media (min-width:624px){.s1ilaur{max-width:280px}}.m13f5kha{color:#fff;font-weight:700;margin-bottom:1rem;text-align:right}.m2v24hm{color:var(--m2v24hm-1);margin-bottom:1rem;text-align:center}.f11s52h9{display:block;width:100%}@media (min-width:624px){.f11s52h9{display:inline-block;padding:0 15px;width:var(--f11s52h9-1)}}.sexihs5{text-align:initial}.s15mcn9o{background:#535beb;background-image:radial-gradient(circle at 29% 55%,hsla(0,0%,98.8%,.05) 0,hsla(0,0%,98.8%,.05) 4%,transparent 0,transparent 44%,transparent 0,transparent 100%),radial-gradient(circle at 85% 89%,hsla(0,0%,98.8%,.05) 0,hsla(0,0%,98.8%,.05) 51%,transparent 0,transparent 52%,transparent 0,transparent 100%),radial-gradient(circle at 6% 90%,hsla(0,0%,98.8%,.05) 0,hsla(0,0%,98.8%,.05) 53%,transparent 0,transparent 64%,transparent 0,transparent 100%),radial-gradient(circle at 35% 75%,hsla(0,0%,98.8%,.05) 0,hsla(0,0%,98.8%,.05) 6%,transparent 0,transparent 98%,transparent 0,transparent 100%),radial-gradient(circle at 56% 75%,hsla(0,0%,98.8%,.05) 0,hsla(0,0%,98.8%,.05) 16%,transparent 0,transparent 23%,transparent 0,transparent 100%),radial-gradient(circle at 42% 0,hsla(0,0%,98.8%,.05) 0,hsla(0,0%,98.8%,.05) 3%,transparent 0,transparent 26%,transparent 0,transparent 100%),radial-gradient(circle at 29% 28%,hsla(0,0%,98.8%,.05) 0,hsla(0,0%,98.8%,.05) 51%,transparent 0,transparent 75%,transparent 0,transparent 100%),radial-gradient(circle at 77% 21%,hsla(0,0%,98.8%,.05) 0,hsla(0,0%,98.8%,.05) 35%,transparent 0,transparent 55%,transparent 0,transparent 100%),radial-gradient(circle at 65% 91%,hsla(0,0%,98.8%,.05) 0,hsla(0,0%,98.8%,.05) 46%,transparent 0,transparent 76%,transparent 0,transparent 100%),linear-gradient(45deg,#535beb,#4c0bae);background-position:top;background-repeat:no-repeat;padding-top:1.77778rem}.w1cheqag{align-items:center;display:flex;flex-direction:row;justify-content:center;margin:0 auto;max-width:1248px;padding:0 2rem}.w1cheqag .laptop{display:none;-o-object-fit:cover;object-fit:cover;-o-object-position:100% 0;object-position:100% 0}.w1cheqag h1,.w1cheqag p{margin-top:0;text-shadow:0 0 5px rgba(0,0,0,.5),0 0 10px rgba(0,0,0,.5)}@media (min-width:936px){.w1cheqag{padding:0 1rem}.w1cheqag h1,.w1cheqag p{margin-left:1rem}.w1cheqag .left-col{flex-basis:38%;max-width:38%}.w1cheqag .right-col{flex-basis:62%;max-width:62%}.w1cheqag .laptop{display:block;margin:.88889rem 0 1.77778rem 1.77778rem}}.hq37sim{color:#fff;font-size:2.25rem;line-height:3rem;margin-top:3.55556rem;text-align:center}@media (min-width:624px){.hq37sim{text-align:left}}.seltqvv{color:#fff;font-size:1rem;font-weight:400;max-width:680px;text-align:center}@media (min-width:624px){.seltqvv{font-size:1.25rem;max-width:100%;text-align:left}}.cmcjyit{box-shadow:0 3px 5px rgb(0 0 0/20%);display:block;margin:2rem auto 3rem;width:275px}.cmcjyit.cmcjyit.cmcjyit{background-color:#d2005f;border-color:#d2005f}.cmcjyit.cmcjyit.cmcjyit:hover{background-color:#fa3292;border-color:#fa3292}.svg-inline--fa,svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;transform:translate(-50%,-50%);transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;transform:scale(.25);transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;transform:scale(.25);transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;transform:scale(.25);transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;transform:scale(.25);transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;transform:scale(.25);transform-origin:top left}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;line-height:inherit;position:absolute;text-align:center;width:2em}.fa-border{border:.08em solid #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{animation:fa-spin 2s linear infinite}.fa-pulse{animation:fa-spin 1s steps(8) infinite}@keyframes fa-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.fa-rotate-90{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";transform:rotate(90deg)}.fa-rotate-180{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";transform:rotate(180deg)}.fa-rotate-270{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";transform:rotate(270deg)}.fa-flip-horizontal{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";transform:scaleX(-1)}.fa-flip-vertical{transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical,.fa-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{transform:scale(-1)}:root .fa-flip-both,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270{filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:#fff}.sr-only{clip:rect(0,0,0,0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}.svg-inline--fa .fa-primary{fill:var(--fa-primary-color,currentColor);opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:var(--fa-secondary-color,currentColor)}.svg-inline--fa .fa-secondary,.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:.4;opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fad.fa-inverse{color:#fff}.s1slqekh{align-items:center;display:flex;flex-direction:column;justify-content:center;padding:1.5rem 1rem 0;position:relative;text-align:center}@media (min-width:624px){.s1slqekh{padding:2rem 0 0}}@media (min-width:936px){.s1slqekh{padding:3rem 0 0}}.s4z0rfd{border:1px solid #ccc;border-radius:36px;box-shadow:inset 2px 3px 6px rgba(0,0,0,.1);color:#fff;display:flex;width:calc(100% - 30px)}@media (min-width:624px){.s4z0rfd{width:calc(100% - 60px)}}@media (min-width:936px){.s4z0rfd{width:826px}}@media (min-width:1248px){.s4z0rfd{width:1108px}}.sjsx8y4.sjsx8y4.sjsx8y4{background:transparent;border:none;height:2.66667rem;margin:0 0 0 15px;outline:none;padding:1rem;width:100%}@media (min-width:624px){.sjsx8y4.sjsx8y4.sjsx8y4{margin:0 0 0 20px}}@media (min-width:936px){.sjsx8y4.sjsx8y4.sjsx8y4{margin:0 0 0 35px}}.sjsx8y4.sjsx8y4.sjsx8y4:-ms-input-placeholder{color:#898787;font-size:1.3225rem}.sjsx8y4.sjsx8y4.sjsx8y4::placeholder{color:#898787;font-size:1.3225rem}.s1jmsysx{background:linear-gradient(180deg,#f9fafc 18.36%,#eff3f6 72.54%);border:0;border-left:1px solid #ccc;border-radius:0 50px 50px 0;box-sizing:border-box;padding:0;width:80px}.s1jmsysx i{color:#898787}.s1jmsysx:hover{cursor:pointer}.s1jmsysx:hover i{color:#333}.spcxsjo{display:flex;margin:0 auto 1.5rem;width:100%}@media (min-width:624px){.spcxsjo{margin:0 auto 1.5rem}}@media (min-width:936px){.spcxsjo{margin:0 auto 2rem;max-width:936px}}@media (min-width:1248px){.spcxsjo{max-width:1248px}}.c17krh2w{align-items:center;color:#bbb;display:flex;margin:0 .5rem}@media (min-width:624px){.c17krh2w{font-size:1.8rem;margin:0 1rem}}.c17krh2w:hover{color:#a0a0a0}.c1s9omxe{color:#bbb;cursor:pointer;font-size:1.2rem}@media (min-width:624px){.c1s9omxe{font-size:1.8rem}}.c1s9omxe:hover{color:#a0a0a0}.c1rlo65d{overflow:hidden}.c1rlo65d.left-shadow{box-shadow:inset 9px 0 10px -12px rgba(0,0,0,.7)}.c1rlo65d.right-shadow{box-shadow:inset -9px 0 10px -12px rgba(0,0,0,.7)}.c1rlo65d.left-right-shadow{box-shadow:inset 9px 0 10px -12px rgba(0,0,0,.7),inset -9px 0 10px -12px rgba(0,0,0,.7)}.c1ut87k4{display:flex;flex:none;transition:all 1.5s ease 0s}.b1io5ar7{display:inline-block;margin:.25rem 0;min-width:8rem;padding:0 .8rem}@media (min-width:624px){.b1io5ar7{margin:1rem 0;min-width:11.6rem;padding:0 1rem}}.bccuu3 .gatsby-image-wrapper{display:block;max-height:8rem;min-height:8rem;width:100%}.bccuu3 .gatsby-image-wrapper img{height:100%;position:absolute;width:100%}@media (min-width:624px){.bccuu3 .gatsby-image-wrapper{max-height:12rem;min-height:12rem}}.s1u5ix1d{padding:2.5rem 1rem;position:relative}@media (min-width:624px){.s1u5ix1d{padding:3.5rem 0}}@media (min-width:936px){.s1u5ix1d{padding:4rem 0}}.h1uhou1i{align-items:center;display:flex;flex-direction:column;justify-content:center}.h1uhou1i h2{font-size:1rem;font-weight:500;line-height:1.25rem;margin:0 0 40px;text-align:center}@media (min-width:624px){.h1uhou1i h2{font-size:1.25rem;line-height:1.5rem;margin:0 0 30px}}@media (min-width:936px){.h1uhou1i h2{font-size:1.5rem;line-height:1.5rem}}.c7xavgv{font-size:1.25rem;margin:0 auto}.c7xavgv.c7xavgv.c7xavgv{background-color:#0c8577;border-color:#0c8577}.c7xavgv.c7xavgv.c7xavgv:hover{background-color:#3ab6a7;border-color:#3ab6a7}@media (min-width:936px){.c7xavgv{margin:0 auto}}.sqlliv9{background-color:#2a2a2a;color:#aaa;padding:2.66667rem 0}.w6xquz6{margin:0 auto;max-width:1248px;padding:0 1rem}.h19hztgg{color:#ccc;font-size:1.25rem;font-weight:400;margin:0 0 1.77778rem;padding:0;text-align:center}.l107yrb6{display:flex;flex-flow:row wrap}.l107yrb6 .logoContainer{flex-basis:var(--l107yrb6-0);max-width:var(--l107yrb6-0);text-align:center}.l107yrb6 .logoContainer p{margin-bottom:0}.l107yrb6 .logoContainer a{color:#aaa;min-height:1.77778rem}.l107yrb6 .logoContainer a:hover{color:#fff}.l107yrb6 .logoContainer>div img{margin:0 auto;width:var(--l107yrb6-3)}@media (min-width:936px){.l107yrb6 .logoContainer{flex-basis:25%;max-width:25%}}.l107yrb6 img{height:2.66667rem;margin:0 auto}.l107yrb6 p{font-size:.64rem}@media (min-width:936px){.l107yrb6{flex-wrap:nowrap}}.skly0o5{background-color:#fff;color:#222;padding:2.66667rem 0;text-align:center}.w1mwdaer{margin:0 auto;max-width:1248px;padding:0 1rem}.h1jpfuti{color:#333;margin-bottom:.88889rem;margin-top:0;text-align:center}.w1qd4csp{color:#222;display:flex;flex-direction:column;text-align:center}.w1qd4csp .whyContainer{flex-basis:100%;max-width:100%;padding:0 1rem;text-align:center}@media (min-width:936px){.w1qd4csp .whyContainer{flex-basis:33%;max-width:33%}}.w1qd4csp img{max-width:70%}.w1qd4csp p{font-size:.64rem;line-height:.88889rem}@media (min-width:936px){.w1qd4csp{flex-direction:row}}.s4ocmot{background-color:#fff;color:#aaa;padding:2.66667rem 0}.wuozx9p{margin:0 auto;max-width:1248px;padding:0 1rem}.b13vkn6l{border:2px solid transparent;-o-border-image:linear-gradient(90deg,#1e3591,#fdbb2d,#b21f1f);border-image:linear-gradient(90deg,#1e3591,#fdbb2d,#b21f1f);border-image-slice:1;border-radius:6px;box-shadow:2px 2px 4px rgb(0 0 0/20%);box-sizing:border-box;color:#222;display:flex;flex-flow:row wrap;justify-content:center;margin:0 auto!important;margin:0 -.5rem;max-width:62rem;padding-bottom:1.77778rem;width:96%}.b13vkn6l>div{flex-basis:50%;max-width:50%;padding:0}@media (min-width:624px){.b13vkn6l>div{padding:0 1rem}}.b13vkn6l h2{margin:1.77778rem 0 .88889rem}.b13vkn6l .introduction{flex-basis:83%;max-width:83%}@media (min-width:936px){.b13vkn6l .introduction{flex-basis:55%;max-width:55%}}.b13vkn6l .reasons{margin:1.77778rem 0 .88889rem}.b13vkn6l .price-unit{flex-basis:83%;margin:0 0 .88889rem;max-width:83%}@media (min-width:936px){.b13vkn6l .price-unit{flex-basis:41%;margin-top:3.55556rem;max-width:41%}}.b13vkn6l .price-unit label{color:#aaa;line-height:3.55556rem;margin-bottom:0;transition:all .3s ease-out}.b13vkn6l .price-unit .price-content{box-sizing:border-box;display:flex;flex-flow:row wrap;justify-content:center;margin:0 -.5rem}.b13vkn6l .price-unit .price-content .main-price{flex-basis:42%;font-size:.8rem;max-width:42%}@media (min-width:624px){.b13vkn6l .price-unit .price-content .main-price{font-size:1rem}}.b13vkn6l .monthly-account .main-price .price-annual{opacity:0;transform:perspective(600px) rotateY(-1turn)}.b13vkn6l .monthly-account .main-price .price-monthly{opacity:1;transform:perspective(600px) rotate3d(0,0,0,-1turn)}.b13vkn6l .main-price{align-items:center;display:flex;justify-content:center;padding:0}.b13vkn6l .main-price .price-frame{bottom:1.77778rem;display:flex;font-size:3.05176rem;line-height:3.55556rem;-ms-perspective:600px;perspective:600px;-ms-perspective-origin:50%;perspective-origin:50%;position:relative;transform-style:preserve-3d;width:1.25em}@media (min-width:936px){.b13vkn6l .main-price .price-frame{font-size:3.05176rem}}.b13vkn6l .main-price .price-annual,.b13vkn6l .main-price .price-monthly{font-weight:700;margin:0;padding:0 .5rem 0 0;position:absolute;transition:all .6s cubic-bezier(.32,.01,.48,1.44)}.b13vkn6l .main-price .price-annual{opacity:1;transform:perspective(600px) rotate3d(0,0,0,1turn)}.b13vkn6l .main-price .price-annual:before{background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 455 455' xml:space='preserve'%3E%3Cg style='fill: orange'%3E%3Cg%3E%3Cpolygon points='227.5 150 133.7 200 45.5 150 84.3 330 370.7 330 409.5 150 321.2 200'/%3E%3C/g%3E%3Cg%3E%3Crect width='280' height='55' x='87.5' y='360'/%3E%3C/g%3E%3Cg%3E%3Ccircle cx='40' cy='80' r='40'/%3E%3C/g%3E%3Cg%3E%3Ccircle cx='415' cy='80' r='40'/%3E%3C/g%3E%3Cg%3E%3Ccircle cx='227.5' cy='80' r='40'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");background-size:100%;content:"";display:block;height:1rem;left:30%;position:absolute;top:-.5rem;width:1rem}.b13vkn6l .main-price .price-monthly{opacity:0;transform:perspective(600px) rotateY(1turn)}.smxntna{align-items:center;display:flex;flex-basis:58%;justify-content:center;max-width:58%;position:relative}.smxntna input{height:1rem;margin:0;width:1rem}.smxntna input:checked+label{color:#333}.smxntna label{color:#aaa;font-weight:300;line-height:3.55556rem;padding:0 .3rem;transition:all .3s ease-out}.smxntna .fnote{bottom:-.71111rem;font-size:.64rem;position:absolute;transition:color .6s}.smxntna input#radios2:checked~.fnote{color:transparent}.crphr2x.crphr2x.crphr2x{background:#d2005f;border:0;border-radius:4px;box-shadow:0 3px 5px rgb(0 0 0/20%);color:#eee;cursor:pointer;margin:1.77778rem 0;padding-left:1rem;padding-right:1rem;width:100%}.crphr2x.crphr2x.crphr2x:hover{background:#fa3292}.s1pmzq7k{background-color:#fff;color:#222;padding:2.66667rem 0;text-align:center}.w1scwslo{margin:0 auto;max-width:1248px;padding:0 1rem}.w1scwslo .tweet-container{box-sizing:border-box;display:flex;flex-flow:row wrap;margin:0 -.5rem}.w1scwslo .tweet-container>div{flex-basis:100%;max-width:100%;padding:0 1rem}@media (min-width:936px){.w1scwslo .tweet-container>div{flex-basis:33%;max-width:33%}}.hixr4hm{color:#333;margin-bottom:.88889rem;text-align:center}@media (min-width:936px){.hixr4hm{margin-bottom:1.77778rem}}.t1wwv0ao{border:2px solid #2aa2ef;line-height:.88889rem;margin-bottom:.88889rem;padding:.88889rem 1rem;text-align:left}.t1wwv0ao .tweet-title{font-size:.8rem;font-weight:500}.t1wwv0ao .tweet-title a,.t1wwv0ao .tweet-title p{color:#20272f;font-weight:500;-webkit-text-decoration:none;text-decoration:none}.t1wwv0ao .tweet-title p{font-size:.8rem;line-height:.8rem;margin:0}.t1wwv0ao .avatar{border-radius:50%;float:left;height:1.77778rem;margin-right:1rem;width:1.77778rem}.t1wwv0ao .twittername{color:#aaa;display:block;font-size:.64rem;font-weight:300}.t1wwv0ao .tweet-body p{font-size:.64rem;line-height:.88889rem;margin:.88889rem 0}.t12xxw3g{color:#262626;font-size:1rem;font-weight:700;line-height:1.2;margin-bottom:0}@media (min-width:624px){.t12xxw3g{font-size:1.25rem}}.t12xxw3g:hover{color:#3ec9cb;-webkit-text-decoration:underline;text-decoration:underline}.f13hvvvv{background-color:#efefef;background-position:50%;background-repeat:no-repeat;background-size:cover;height:84px;margin-bottom:0;margin-right:1rem;overflow:hidden;width:150px}@media (min-width:624px){.f13hvvvv{height:118px;width:210px}}.ms9srjd{display:none;font-size:.75rem}@media (min-width:624px){.ms9srjd{display:flex}}.m11jemzk{font-size:.75rem;margin-bottom:0}.ctub9nm,.m11jemzk,.m11jemzk>a{color:#a2a2a2}.ctub9nm{font-weight:900;margin-right:.75rem;padding-left:12px;position:relative;text-transform:uppercase}.ctub9nm:before{background-color:#a2a2a2;background-color:var(--ctub9nm-4);border-radius:100%;content:"";height:8px;left:0;position:absolute;top:50%;transform:translateY(-50%);width:8px}.ejt0qrr{display:none;font-size:.875rem;line-height:1.6;margin-bottom:0}@media (min-width:624px){.ejt0qrr{display:block}}.s1ym2p63{align-items:flex-start;display:flex;margin-bottom:3rem}.c16injma{color:#3a3a3a;width:calc(100% - 150px)}@media (min-width:624px){.c16injma{width:calc(100% - 210px)}}.c877jhp{background-color:#fff;box-shadow:0 6px 12px 0 rgba(0,0,0,.25);margin-bottom:1rem;transition:all .2s ease 0s;width:100%}@media (min-width:624px){.c877jhp{width:calc(50% - 1rem)}}@media (min-width:936px){.c877jhp{width:calc(25% - .5rem)}}.c877jhp:hover{transform:translateY(-4px)}.c877jhp>a{height:157px;-webkit-text-decoration:none;text-decoration:none;width:100%}.c179m2mi,.c877jhp>a{display:flex;flex-direction:column}.c179m2mi{height:calc(100% - 157px);justify-content:space-between;padding:1rem}.c7l2g36{color:#262626;font-size:1rem;font-weight:700;line-height:1.2;margin-bottom:1rem}@media (min-width:624px){.c7l2g36{font-size:1.25rem}}.c7l2g36:hover{color:#262626}.c71u16a{background-color:#efefef;background-position:top;background-repeat:no-repeat;background-size:cover;height:157px;overflow:hidden;position:relative}.c1fd0pty{color:#a2a2a2;padding-left:12px;position:relative}.c1fd0pty:before{background-color:#a2a2a2;border-radius:100%;content:"";height:8px;left:0;position:absolute;top:50%;transform:translateY(-50%);width:8px}.c11x20zd{color:#a2a2a2;font-size:.75rem;font-weight:400;line-height:1.2}.ck03qz0.ctub9nm{display:block;line-height:2}.s17swnvd{display:block}@media (min-width:624px){.s17swnvd{display:flex;flex-wrap:wrap;justify-content:space-between}}.sfl2m75{background-color:#fff;color:#222;margin:0 auto 3.55556rem;max-width:1248px;padding:0 2rem}.sfl2m75 p{margin-top:1rem;text-align:center}.hk23se0{color:#333;margin-bottom:.88889rem;text-align:center}@media (min-width:936px){.hk23se0{margin-bottom:1.77778rem}}.c8plf90{background:#0c8577;border:0;border-radius:4px;box-shadow:0 3px 5px rgb(0 0 0/20%);color:#eee;height:2.66667rem;line-height:2.66667rem;margin:0 0 1.77778rem;padding:0 2rem;position:relative;transition:.3s}.c8plf90.c8plf90.c8plf90{background-color:#0c8577;border-color:#0c8577}.c8plf90.c8plf90.c8plf90:hover{background-color:#3ab6a7;border-color:#3ab6a7}@media (min-width:936px){.c8plf90{margin:0 auto}}.sicb71k{background:#020024;background-image:var(--sicb71k-0);background-size:cover,cover;color:#ccc;padding:0}.waqb5gf{display:flex;flex-direction:column;margin:0 auto;max-width:1248px;padding:0 1rem;width:90%}@media (min-width:936px){.waqb5gf{flex-direction:row}}.waqb5gf div{padding:0 1rem}.waqb5gf .hero-introduction{flex-basis:100%;max-width:100%;order:var(--waqb5gf-3)}@media (min-width:936px){.waqb5gf .hero-introduction{flex-basis:58%;max-width:58%}}.waqb5gf .hero-introduction h2,.waqb5gf .hero-introduction p{color:#eee;margin-bottom:1.77778rem}.waqb5gf .hero-introduction h2{margin-top:5.33333rem}.waqb5gf .hero-introduction p.button{text-align:center}.waqb5gf .hero-featured-videos{flex-basis:100%;max-width:100%;order:var(--waqb5gf-3)}@media (min-width:936px){.waqb5gf .hero-featured-videos{flex-basis:33%;max-width:33%;order:var(--waqb5gf-8)}}.waqb5gf .hero-featured-videos .stack{background:rgba(0,0,0,.5);color:#fff;padding:.88889rem 1.5rem}.waqb5gf .hero-featured-videos .stack figure{margin:1em 0}.waqb5gf .hero-featured-videos .stack figure .image-container{overflow:hidden;padding:0;position:relative}.waqb5gf .hero-featured-videos .stack figure .image-container img{width:100%}.waqb5gf .hero-featured-videos .stack figure .image-container span.duration{background:#000;bottom:1.2em;color:#fff;display:block;line-height:.8rem;opacity:1;padding:.2rem .5rem;position:absolute;right:.7em}.waqb5gf .hero-featured-videos .stack figure figcaption{font-size:.8rem;font-weight:500;line-height:.88889rem;margin:0}.waqb5gf .hero-featured-videos .stack figure figcaption span{display:block;font-size:.64rem;font-weight:300}.waqb5gf .hidden-div{display:none;order:2}@media (min-width:936px){.waqb5gf .hidden-div{display:block;flex-basis:9%;max-width:9%}}.c14jg920.c14jg920.c14jg920{background:#0c8577;border:0;border-radius:4px;box-shadow:0 3px 5px rgba(0,0,0,.2);color:#eee;height:2.66667rem;line-height:2.66667rem;margin:0 0 1.77778rem;padding:0 2rem;position:relative;transition:.3s}.w1m5z52n{background:#0040c1;color:#fff;overflow:hidden;padding:1.77778rem;position:relative}@media (min-width:624px){.w1m5z52n{padding:3.55556rem}}@media (min-width:936px){.w1m5z52n{padding:5.33333rem 3.55556rem}}.h10g4mr{color:#fff;font-size:1.5rem;font-weight:700;line-height:2.25rem;margin:0 auto 2rem;max-width:1248px;position:relative;z-index:1}@media (min-width:624px){.h10g4mr{font-size:2.25rem;line-height:3rem}}.clavu68{align-items:flex-start;display:flex;flex-direction:column;margin:0 auto;max-width:1248px;position:relative;z-index:1}@media (min-width:936px){.clavu68{align-items:center;flex-direction:row}}.db6pgha{width:100%}@media (min-width:936px){.db6pgha{margin:0;padding:0 1.5rem 0 0;width:50%}}.d8s03wq{color:#fff;font-size:1rem;font-weight:500;margin:0 0 1rem;padding:0;width:100%}@media (min-width:936px){.d8s03wq{padding:0 1.5rem 0 0}}.s1c646u9{border:1px solid #d2d2d2;border-radius:5px;color:#000;padding:1.5rem;width:100%}@media (min-width:936px){.s1c646u9{width:50%}}.sdph6vu{color:#fff}.svxx33s{color:#000}.s1r71w2q{display:block;padding:.5rem 1rem}.c1xr6uwp{animation:circle-c1xr6uwp 8s ease-in infinite forwards;background:#489dec;border-radius:100%;height:10px;left:10%;position:absolute;top:90%;transform:scale(0) translate(-50%,-50%);transform-origin:top left;width:10px}.c1xr6uwp:nth-child(2n){background:#003298}.c1xr6uwp:nth-child(2){animation-delay:2s;left:80%;top:80%}.c1xr6uwp:nth-child(3){animation-delay:4s;left:60%;top:50%}.c1xr6uwp:nth-child(4){animation-delay:6s;left:70%;top:20%}.c1xr6uwp:nth-child(5){animation-delay:8s;left:20%;top:30%}.c1xr6uwp:nth-child(6){animation-delay:10s;left:30%;top:60%}@keyframes circle-c1xr6uwp{0%{opacity:1;transform:scale(0) translate(-50%,-50%)}to{opacity:0;transform:scale(20) translate(-50%,-50%)}}.suhqeno{background-color:#105273;background-image:var(--suhqeno-0);background-position:50%;background-repeat:no-repeat;background-size:cover}@media (min-width:624px){.suhqeno{background-size:100%}}.wcqh0z5{background:rgba(0,0,0,.4);display:flex;justify-content:space-between;margin:0 auto 20px;max-width:1248px;padding:20px 30px}@media (min-width:936px){.wcqh0z5{margin:0 auto 30px}}.im6tdkb{margin:0;position:relative}@media (min-width:936px){.im6tdkb{margin:0 30px 0 0}}@media (min-width:1248px){.im6tdkb{margin:0 70px 0 0}}.m6bjvs0{background:rgba(0,0,0,.4);display:flex;flex-direction:column;margin:0 0 16px;padding:15px 20px}@media (min-width:624px){.m6bjvs0{padding:5px 40px}}@media (min-width:936px){.m6bjvs0{line-height:72px;margin:0 0 30px}}.m6bjvs0>div{display:flex;flex-direction:column}@media (min-width:624px){.m6bjvs0>div{flex-direction:row;justify-content:space-between}}.td3jbbo{color:#fff;display:inline-block;font-size:1rem;line-height:1.5rem;margin:0 0 10px;padding:0;text-shadow:1px 2px 4px rgba(0,0,0,.4)}@media (min-width:624px){.td3jbbo{font-size:1.5rem;line-height:60px;margin:0}}@media (min-width:936px){.td3jbbo{line-height:72px}}.cxli7a9{line-height:1.5rem}@media (min-width:624px){.cxli7a9{line-height:60px}}@media (min-width:936px){.cxli7a9{line-height:72px}}.c14zotb4{color:#fff;margin:0 .875rem 0 0;outline:none;padding:0}.c14zotb4>*,.c14zotb4>:after,.c14zotb4>:before{pointer-events:none}.c14zotb4:last-child{margin:0}.c14zotb4 svg.share-icon{transition:width .2s linear;width:1rem}.c14zotb4:focus,.c14zotb4:hover{color:#fff}.c14zotb4:focus svg.share-icon,.c14zotb4:hover svg.share-icon{transition:width .2s linear;width:1.25rem}@media (min-width:1248px){.c14zotb4{margin:0 1rem 0 0}}.m1odfayv{bottom:0}.m1odfayv,.m1odfayv>div{display:flex;flex-direction:column}.m1odfayv>div{margin:0 0 16px}@media (min-width:624px){.m1odfayv>div{align-items:center;flex-direction:row}}@media (min-width:936px){.m1odfayv>div{margin:0 0 30px}}.m1odfayv>div:not(:first-child){flex-direction:row}.ajqjnq{border-radius:50%;height:100px;margin:0 auto 20px;min-width:100px;width:100px}@media (min-width:624px){.ajqjnq{margin:0 25px}}@media (min-width:936px){.ajqjnq{margin:0 40px}}@media (min-width:1248px){.ajqjnq{margin:0 60px}}.d17w3rty{color:#fff;font-size:.75rem;font-weight:500;margin:0}@media (min-width:624px){.d17w3rty{font-size:.875rem;margin:0 20px 0 0}}@media (min-width:936px){.d17w3rty{font-size:.875rem}}@media (min-width:1248px){.d17w3rty{margin:0 40px 0 0}}.sprezz4{margin:0 auto;max-width:1248px;padding:20px 30px;width:100%}.pg2pojl{display:flex;justify-content:space-between;list-style:none;margin:1rem 0;padding:0}.p1q14x1v{margin-left:var(--p1q14x1v-0)}.psmqk2r{background-color:#e9e9e9;border:1px solid #d2d2d2;display:inline-block;font-weight:700;padding:.25rem .5rem;-webkit-text-decoration:none;text-decoration:none}.psmqk2r,.psmqk2r:active,.psmqk2r:hover,.psmqk2r:visited{color:inherit}.c196kivy{border-radius:.25rem;display:inline-block;font-size:.75rem;font-weight:400;padding:.25rem 1rem;-webkit-text-decoration:none;text-decoration:none;text-transform:uppercase;transition:background-color .25s ease}.c196kivy,.c196kivy:hover{color:#fff}.c196kivy[data-active=true]{background-color:#fff;color:#000;font-weight:700}@media (min-width:936px){.c196kivy[data-active=true]{background-color:rgba(0,0,0,.3);color:#fff}.c196kivy{font-size:1rem}}.cauew9d{background-color:#000;border-radius:.25rem;display:flex;flex-wrap:wrap;list-style:none;margin:0;padding:.25rem;position:relative}@media (min-width:936px){.cauew9d{background-color:transparent}}.c18rc57l{flex:1 1;text-align:center;white-space:nowrap;width:50%}@media (min-width:936px){.c18rc57l:focus-within>a,.c18rc57l:focus>a,.c18rc57l:hover>a{background-color:#000;color:#fff}.c18rc57l:focus-within>ul,.c18rc57l:focus>ul,.c18rc57l:hover>ul{display:flex;flex-wrap:wrap}}@media (min-width:624px){.c18rc57l{width:auto}}.si7w448{background:#000;border-radius:.25em;display:none;left:0;list-style:none;margin:-.25rem .25rem 0;max-width:none;overflow-x:auto;padding:0;position:absolute;transform:translateY(0);width:calc(100% - .5rem);z-index:4}@media screen and (min-width:1201px) and (max-width:1246px){.si7w448{margin:-.25rem .4rem 0}}@media screen and (max-width:624px){.si7w448{display:none!important}}.se1k65n{display:inline-block}.s1u3e1f7{color:#fff;padding:.25em 1em;transition:none}.s1u3e1f7:focus,.s1u3e1f7:hover{color:transparent;overflow:hidden;position:relative}.s1u3e1f7:focus:before,.s1u3e1f7:hover:before{color:#fff;content:attr(data-category);font-weight:700;position:absolute}.s15xj7te{margin:0 auto;max-width:1248px;padding:1rem;width:100%}.sc87b25{align-items:baseline;display:flex;justify-content:space-between}.a59sgpd{font-weight:400;-webkit-text-decoration:none;text-decoration:none}.a59sgpd,.a59sgpd:active,.a59sgpd:hover,.a59sgpd:visited{color:#fff}.b1wgu98l{background-position-y:100%}.b1wgu98l[data-type=image]{background-image:url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1440' height='958' fill='none' viewBox='0 0 1440 958'%3E%3Cpath fill='%23346' d='M0 0h1440v958H0z'/%3E%3Cg style='mix-blend-mode:overlay' opacity='.3'%3E%3Cpath fill='%23C4C4C4' fill-opacity='.5' d='M0 .918h1440v956.623H0z' opacity='.3'/%3E%3Cpath fill='%23868686' d='M182.639 155.153h312.963L964.13 958H650.249l-467.61-802.847z' opacity='.3'/%3E%3Cpath fill='%23C4C4C4' d='M963.672 958H1440l-.76-355.624-682.825.459L963.672 958z'/%3E%3Cpath fill='%23000' d='M0 0h1440v154.24L0 155.153V0z' opacity='.3'/%3E%3Cpath fill='%23EAEAEA' d='M703.479 155.153l-72.045 123.02H1440v-123.02H703.479z' opacity='.3'/%3E%3Cpath fill='%23fff' fill-opacity='.83' d='M1255.53 602.25l157.39-280.927 27.08 46.821V602.25h-184.47zM492.849 0h267.993l96.367 155.153H550.67l-78.012-123.02L492.849 0z'/%3E%3Cpath fill='%23A8A7A7' d='M550.669 155.153l-78.011-123.02-74.8 123.02h152.811z'/%3E%3Cpath fill='%23C4C4C4' d='M1022.41 0h274.87l97.75 156.071h-346.46l-62.414-96.397L1022.41 0z'/%3E%3Cpath fill='%23E1E1E1' d='M1048.57 155.153l-62.424-95.479-58.268 95.479h120.692zM948.069 0l38.088 59.674L1022.41 0h-74.341z'/%3E%3Cpath fill='%23DADADA' d='M472.636 32.132H210.151l-75.237 123.021h262.945l74.777-123.02z'/%3E%3Cpath fill='%23fff' d='M1282.6 958l-119.85-208.86L1048.57 958h234.03z'/%3E%3Cpath fill='%23625F5F' d='M1162.51 749.599H843.713L722.892 958h325.678l113.94-208.401z' opacity='.7'/%3E%3Cpath fill='%23232023' d='M1440 155.153v212.833l-123.44-212.833H1440z'/%3E%3Cpath fill='%23565555' d='M605.277 880.424L443.009 604.237 594.168 322.85 757.17 602.709 605.277 880.424z' opacity='.3'/%3E%3Cpath fill='%23E1E1E1' d='M133.078 155.153H0v802.388h494.226l196.405-356.668H390.975l-257.897-445.72z'/%3E%3Cpath fill='%23232023' d='M631.735 707.828H0V958h494.226l137.509-250.172z'/%3E%3Cpath fill='%23797979' d='M494.226 958l136.749-250.632L770.019 958H494.226z'/%3E%3Cpath fill='%23fff' d='M0 321.322h229.225l-94.311-166.169H0v166.169z'/%3E%3Cpath fill='%23E5E5E5' d='M1274.34 155.262h-225.77l-62.413-95.48h348.753l-60.57 95.48z'/%3E%3Cpath fill='%23565555' d='M1394.57 155.153l-59.66-95.479-60.57 95.479h120.23z'/%3E%3Cpath fill='%23000' d='M986.157 59.674l-58.279 95.479h-70.669l-59.197-95.479h188.145z' opacity='.9'/%3E%3C/g%3E%3C/svg%3E");background-image:var(--b1wgu98l-0)}.b1wgu98l:not([data-type=image]){background-color:#346;background-color:var(--b1wgu98l-1)}.b1wgu98l .ss89hjs{color:#fff}.shgz0o2{display:flex;flex-direction:column;margin:0 auto;max-width:1248px;padding:0 20px;width:100%}@media (min-width:936px){.shgz0o2{flex-direction:row;justify-content:stretch;padding:0 30px}}@media (min-width:1248px){.shgz0o2{padding:0}}.sgoxgza{background:none;border:none;color:var(--sgoxgza-0);font-size:1rem;margin:0 20px 0 0;outline:none;padding:0}.sgoxgza>*,.sgoxgza>:after,.sgoxgza>:before{pointer-events:none}.sgoxgza svg.share-icon{transition:width .2s linear;width:1rem}.sgoxgza:hover{cursor:pointer}.sgoxgza:focus svg.share-icon,.sgoxgza:hover svg.share-icon{transition:width .2s linear;width:1.25rem}.s1xu2uce{background-color:#346;background-color:var(--s1xu2uce-2);background-image:var(--s1xu2uce-0);background-position:50%;background-repeat:no-repeat;background-size:cover}@media (min-width:624px){.s1xu2uce{background-size:100%}}.wzjw2su{background:rgba(0,0,0,.4);display:flex;justify-content:space-between;margin:0 auto 30px;max-width:1248px;padding:20px 30px}@media (min-width:936px){.wzjw2su{margin:0 auto 70px}}.i1ju85s6{margin:0;position:relative}@media (min-width:936px){.i1ju85s6{margin:0 70px 0 0}}.mj4qk0u{bottom:0}.mj4qk0u,.mj4qk0u>div{display:flex;flex-direction:column}@media (min-width:624px){.mj4qk0u>div{flex-direction:row}}.mj4qk0u>div:not(:first-child){flex-direction:row}.t1nx95qj{background:rgba(0,0,0,.4);color:#fff;line-height:50px;margin:0 0 16px;padding:5px 20px;text-shadow:1px 2px 4px rgba(0,0,0,.4)}@media (min-width:624px){.t1nx95qj{line-height:60px}}@media (min-width:936px){.t1nx95qj{line-height:72px;margin:0 0 30px}}.m1pdrmq3{color:#fff;font-size:.75rem;font-weight:500;margin:0 16px 0 0}@media (min-width:624px){.m1pdrmq3{font-size:.875rem;margin:0 20px 0 0}}@media (min-width:936px){.m1pdrmq3{font-size:1rem}}.m1pdrmq3 a,.m1pdrmq3:hover{color:#fff}.a9j7xdv.m1pdrmq3{font-style:inherit}.c1j9oh5q{padding:.88889rem 0;position:relative}.c1j9oh5q:before{top:0}.c1j9oh5q:after{bottom:.88889rem}.c1j9oh5q:after,.c1j9oh5q:before{background-image:url("data:image/svg+xml,%3Csvg width='1155' height='26' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0)'%3E%3Cpath fill='url(%23paint0_radial)' d='M0 13h1155v26H0z'/%3E%3C/g%3E%3Cdefs%3E%3CradialGradient id='paint0_radial' cx='0' cy='0' r='1' gradientUnits='userSpaceOnUse' gradientTransform='matrix(0 13 -577.5 0 577.5 26)'%3E%3Cstop stop-color='%23D8D8D8'/%3E%3Cstop offset='1' stop-color='%23D8D8D8' stop-opacity='0'/%3E%3C/radialGradient%3E%3CclipPath id='clip0'%3E%3Cpath fill='%23fff' d='M0 0h1155v26H0z'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E");background-position-y:bottom;background-repeat:no-repeat;background-size:100%;content:"";display:block;height:.88889rem;left:0;position:absolute;width:100%}.s9dbkf1{height:auto;margin:1.7777777777777777rem 0;overflow:hidden;transition:height .25s ease}.skrmi3a{background-color:rgba(0,0,0,.4);border-radius:2px;color:#fff;cursor:pointer;display:inline-block;font-size:.75rem;line-height:1;margin-bottom:.25rem;padding:.25rem .5rem}.skrmi3a:not(:last-child){margin-right:.5rem}.skrmi3a:focus,.skrmi3a:hover{background-color:rgba(0,0,0,.7);color:#fff}.bqalzbe{font-size:1.25rem;line-height:1.2;margin-bottom:.75rem}.b1k7fbs2{margin-top:2rem}.tehr35c{padding-bottom:1rem}.s1w6ed5l{margin:0 auto;overflow:hidden;padding:0 1rem 2rem;width:100%}.s1w6ed5l .wp-caption{margin:30px auto;width:100%}@media (min-width:936px){.s1w6ed5l .wp-caption{width:auto}}.s1w6ed5l .wp-caption-text{color:#a2a2a2;font-size:.875rem;font-weight:400;line-height:1.2;text-align:center}@media (min-width:936px){.s1w6ed5l .wp-caption-text{text-align:left}}.s1w6ed5l .wp-special{line-height:1.3}.s1w6ed5l [class*=wp-image]{display:block;margin:0 auto 30px}.s1w6ed5l [class*=wp-image]+p.wp-caption-text{text-align:center}.s1w6ed5l .alignleft,.s1w6ed5l .alignright{display:block}.s1w6ed5l .aligncenter{max-width:100%}@media (min-width:936px){.s1w6ed5l{border-right:1px solid #ccc;width:calc(100% - 260px)}.s1w6ed5l .alignleft{float:left;margin:0 20px 20px 0}.s1w6ed5l .alignright{float:right;margin:0 0 20px 20px}.s1w6ed5l .aligncenter{margin:30px auto}}@media (min-width:1248px){.s1w6ed5l{width:calc(100% - 400px)}}.s27361g{padding:0 1rem;width:100%}@media (min-width:936px){.s27361g{padding:0 1rem 1rem;width:300px}}@media (min-width:1248px){.s27361g{padding:0 2rem 2rem;width:400px}}.a16x32zb{display:flex;margin:0 0 20px}.a1eqqr2y{border-radius:50%;height:70px;margin:0 25px 0 0;width:70px}.a1n4qnu2{margin:0 0 8px}.a1n4qnu2,.a1n4qnu2 a{font-size:1rem;font-weight:700;line-height:1.25rem}.a1n4qnu2 a{color:#262626}.a1n4qnu2 a::hover{color:#24b3b5}.a1ytldcw{color:#262626;margin:0 .875rem 0 0;outline:none;padding:0}.a1ytldcw>*,.a1ytldcw>:after,.a1ytldcw>:before{pointer-events:none}.a1ytldcw svg.share-icon{transition:width .2s linear;width:1rem}.a1ytldcw:focus svg.share-icon,.a1ytldcw:hover svg.share-icon{transition:width .2s linear;width:1.25rem}@media (min-width:1248px){.a1ytldcw{margin:0 1rem 0 0}}.aq0gnlt{font-size:.75rem;font-weight:300;line-height:1rem}.aq0gnlt a{color:#24b3b5;font-weight:400;-webkit-text-decoration:none;text-decoration:none}.aq0gnlt a:hover{color:#189697}.i1pku24f{min-height:600px}.h1kwsdam{font-size:calc(1rem*var(--typescale)*var(--typescale)*var(--typescale));line-height:1.2;margin-top:1.5rem}.p1gusril{margin-bottom:2rem}</style><meta name="generator" content="Gatsby 3.5.0"><title>A Step by Step Guide to Building an Android Audio Player App - SitePoint</title><link data-react-helmet="true" href="https://www.sitepoint.com/favicons/32x32.png" rel="icon" type="image/png"><link data-react-helmet="true" href="https://dab1nmslvvntp.cloudfront.net/"><link data-react-helmet="true" href="https://d2sis3lil8ndrq.cloudfront.net/"><link data-react-helmet="true" href="https://bid.g.doubleclick.net/"><meta data-react-helmet="true" name="description" content="Valdio Veliu presents an in-depth and step by step guide to building your very own Android audio player app."><meta data-react-helmet="true" property="og:title" content="A Step by Step Guide to Building an Android Audio Player App - SitePoint"><meta data-react-helmet="true" property="og:description" content="Valdio Veliu presents an in-depth and step by step guide to building your very own Android audio player app."><meta data-react-helmet="true" property="og:type" content="website"><meta data-react-helmet="true" property="og:image" content="https://uploads.sitepoint.com/wp-content/uploads/2016/08/1471529082Screenshot_2016-08-12-19-31-48.png"><meta data-react-helmet="true" property="twitter:account_id" content="15743570"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="twitter:image" content="https://uploads.sitepoint.com/wp-content/uploads/2016/08/1471529082Screenshot_2016-08-12-19-31-48.png"><meta data-react-helmet="true" name="twitter:title" content="A Step by Step Guide to Building an Android Audio Player App - SitePoint"><meta data-react-helmet="true" name="twitter:description" content="Valdio Veliu presents an in-depth and step by step guide to building your very own Android audio player app."><script async="" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/main.6ae4a9fc.js.download"></script><script async="" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/fbevents.js.download"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/core.js.download"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/insight.min.js.download"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/uwt.js.download"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/f.txt"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/analytics.js.download"></script><script src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/rules-p-DsckBJsAJpkVK.js.download" async=""></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/js"></script><script src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/quant.js.download" async="" type="text/javascript"></script><script async="" type="text/javascript" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/cmp2.js.download"></script><script async="" type="text/javascript" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/choice.js.download"></script><script src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/quant.js.download" async="" type="text/javascript"></script><script async="" type="text/javascript" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/cmp2.js.download"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/analytics.js.download"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/js(1)"></script><script async="" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/gtm.js.download"></script><script async="" type="text/javascript" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/choice.js.download"></script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","headline":"A Step by Step Guide to Building an Android Audio Player App - SitePoint","url":"https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/","description":"Valdio Veliu presents an in-depth and step by step guide to building your very own Android audio player app.","articleSection":"Mobile","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/"},"author":[{"@type":"Person","name":"Valdio Veliu"}],"publisher":{"@type":"Organization","name":"SitePoint","logo":{"@type":"ImageObject","url":"https://uploads.sitepoint.com/wp-content/uploads/2019/12/1576634464sitepoint-app-icon-512.png"}},"dateCreated":"2016-08-19T08:00:28","datePublished":"2016-08-19T08:00:28","dateModified":"2016-08-19T23:52:41","thumbnailUrl":"https://uploads.sitepoint.com/wp-content/uploads/2016/08/1471529082Screenshot_2016-08-12-19-31-48.png","image":{"@type":"ImageObject","url":"https://uploads.sitepoint.com/wp-content/uploads/2016/08/1471529082Screenshot_2016-08-12-19-31-48.png"},"keywords":["audio","audio player","chrisw","media","streaming"]}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://www.sitepoint.com/blog"},{"@type":"ListItem","position":2,"name":"Mobile","item":"https://www.sitepoint.com/mobile"},{"@type":"ListItem","position":3,"name":"Android","item":"https://www.sitepoint.com/mobile/android/"},{"@type":"ListItem","position":4,"name":"A Step by Step Guide to Building an Android Audio Player App","item":"https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app"}]}</script><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{all:inherit;bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><script>window.dataLayer = window.dataLayer || [];window.dataLayer.push({"platform":"gatsby"}); (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl+'';f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer', 'GTM-KL8PMMW');</script><link rel="manifest" href="https://www.sitepoint.com/manifest.webmanifest" crossorigin="anonymous"><meta name="theme-color" content="#3a3a3a"><link rel="apple-touch-icon" sizes="48x48" href="https://www.sitepoint.com/favicons/48x48.png"><link rel="apple-touch-icon" sizes="72x72" href="https://www.sitepoint.com/favicons/72x72.png"><link rel="apple-touch-icon" sizes="96x96" href="https://www.sitepoint.com/favicons/96x96.png"><link rel="apple-touch-icon" sizes="144x144" href="https://www.sitepoint.com/favicons/144x144.png"><link rel="apple-touch-icon" sizes="192x192" href="https://www.sitepoint.com/favicons/192x192.png"><link rel="apple-touch-icon" sizes="256x256" href="https://www.sitepoint.com/favicons/256x256.png"><link rel="apple-touch-icon" sizes="384x384" href="https://www.sitepoint.com/favicons/384x384.png"><link rel="apple-touch-icon" sizes="512x512" href="https://www.sitepoint.com/favicons/512x512.png"><style>@font-face{font-family:Roboto;font-style:italic;font-weight:300;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOjCnqEu92Fr1Mu51TjASc6CsI.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-weight:400;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOkCnqEu92Fr1Mu51xIIzQ.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-weight:500;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOjCnqEu92Fr1Mu51S7ACc6CsI.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-weight:700;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOjCnqEu92Fr1Mu51TzBic6CsI.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-weight:900;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOjCnqEu92Fr1Mu51TLBCc6CsI.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-weight:300;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBBc-.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOmCnqEu92Fr1Mu4mxM.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-weight:500;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBBc-.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-weight:700;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOlCnqEu92Fr1MmWUlfBBc-.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-weight:900;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOlCnqEu92Fr1MmYUtfBBc-.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-weight:300;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOjCnqEu92Fr1Mu51TjASc6CsQ.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:italic;font-weight:400;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOkCnqEu92Fr1Mu51xIIzI.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:italic;font-weight:500;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOjCnqEu92Fr1Mu51S7ACc6CsQ.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:italic;font-weight:700;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOjCnqEu92Fr1Mu51TzBic6CsQ.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:italic;font-weight:900;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOjCnqEu92Fr1Mu51TLBCc6CsQ.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:normal;font-weight:300;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBBc4.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:normal;font-weight:500;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:normal;font-weight:700;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOlCnqEu92Fr1MmWUlfBBc4.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:normal;font-weight:900;font-display:swap;src:url(/static/webfonts/s/roboto/v29/KFOlCnqEu92Fr1MmYUtfBBc4.woff2) format("woff2")}</style><link rel="preconnect" href="https://cdn.sanity.io/"><link rel="sitemap" type="application/xml" href="https://www.sitepoint.com/sitemap.xml"><link rel="alternate" type="application/rss+xml" title="SitePoint" href="https://www.sitepoint.com/sitepoint.rss"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/webpack-runtime-f09b512044df0cbd4cac.js.download"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/framework-9e1d3bc9c6d0e2137f08.js.download"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/ec1189df-1d42d02c0d3b321dd3c9.js.download"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/af13d906-1932a438ec612a66348c.js.download"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/a9a7754c-ed6fc4875d4344a7c426.js.download"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/app-08ef9e9d8f376d279903.js.download"><link as="fetch" rel="preload" href="https://www.sitepoint.com/page-data/a-step-by-step-guide-to-building-an-android-audio-player-app/page-data.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="https://www.sitepoint.com/page-data/sq/d/1047298929.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="https://www.sitepoint.com/page-data/sq/d/1108168975.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="https://www.sitepoint.com/page-data/sq/d/1510259907.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="https://www.sitepoint.com/page-data/sq/d/2326876097.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="https://www.sitepoint.com/page-data/sq/d/2869946253.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="https://www.sitepoint.com/page-data/sq/d/3000541721.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="https://www.sitepoint.com/page-data/sq/d/4239874688.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="https://www.sitepoint.com/page-data/app-data.json" crossorigin="anonymous"><script>
        var special_ops = special_ops || {};
        special_ops.tags =
          [
            "mobile"
          ]
      </script><style type="text/css"> .qc-cmp-button.qc-cmp-secondary-button:hover {    background-color: #368bd6 !important;    border-color: transparent !important;  }  .qc-cmp-button.qc-cmp-secondary-button:hover {    color: #ffffff !important;  }  .qc-cmp-button.qc-cmp-secondary-button {    color: #368bd6 !important;  }  .qc-cmp-button.qc-cmp-secondary-button {    background-color: #eee !important;    border-color: transparent !important;  } </style><link rel="canonical" key="https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/" href="https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/" data-react-helmet="true"><script type="text/javascript" async="true" data-react-helmet="true">(function() {
  var host = 'www.sitepoint.com';
  var element = document.createElement('script');
  var firstScript = document.getElementsByTagName('script')[0];
  var url = 'https://quantcast.mgr.consensu.org'
    .concat('/choice/', 'DsckBJsAJpkVK', '/', host, '/choice.js')
  var uspTries = 0;
  var uspTriesLimit = 3;
  element.async = true;
  element.type = 'text/javascript';
  element.src = url;

  firstScript.parentNode.insertBefore(element, firstScript);

  function makeStub() {
    var TCF_LOCATOR_NAME = '__tcfapiLocator';
    var queue = [];
    var win = window;
    var cmpFrame;

    function addFrame() {
      var doc = win.document;
      var otherCMP = !!(win.frames[TCF_LOCATOR_NAME]);

      if (!otherCMP) {
        if (doc.body) {
          var iframe = doc.createElement('iframe');

          iframe.style.cssText = 'display:none';
          iframe.name = TCF_LOCATOR_NAME;
          doc.body.appendChild(iframe);
        } else {
          setTimeout(addFrame, 5);
        }
      }
      return !otherCMP;
    }

    function tcfAPIHandler() {
      var gdprApplies;
      var args = arguments;

      if (!args.length) {
        return queue;
      } else if (args[0] === 'setGdprApplies') {
        if (
          args.length > 3 &&
          args[2] === 2 &&
          typeof args[3] === 'boolean'
        ) {
          gdprApplies = args[3];
          if (typeof args[2] === 'function') {
            args[2]('set', true);
          }
        }
      } else if (args[0] === 'ping') {
        var retr = {
          gdprApplies: gdprApplies,
          cmpLoaded: false,
          cmpStatus: 'stub'
        };

        if (typeof args[2] === 'function') {
          args[2](retr);
        }
      } else {
        queue.push(args);
      }
    }

    function postMessageEventHandler(event) {
      var msgIsString = typeof event.data === 'string';
      var json = {};

      try {
        if (msgIsString) {
          json = JSON.parse(event.data);
        } else {
          json = event.data;
        }
      } catch (ignore) {}

      var payload = json.__tcfapiCall;

      if (payload) {
        window.__tcfapi(
          payload.command,
          payload.version,
          function(retValue, success) {
            var returnMsg = {
              __tcfapiReturn: {
                returnValue: retValue,
                success: success,
                callId: payload.callId
              }
            };
            if (msgIsString) {
              returnMsg = JSON.stringify(returnMsg);
            }
            event.source.postMessage(returnMsg, '*');
          },
          payload.parameter
        );
      }
    }

    while (win) {
      try {
        if (win.frames[TCF_LOCATOR_NAME]) {
          cmpFrame = win;
          break;
        }
      } catch (ignore) {}

      if (win === window.top) {
        break;
      }
      win = win.parent;
    }
    if (!cmpFrame) {
      addFrame();
      win.__tcfapi = tcfAPIHandler;
      win.addEventListener('message', postMessageEventHandler, false);
    }
  };

  makeStub();

  var uspStubFunction = function() {
    var arg = arguments;
    if (typeof window.__uspapi !== uspStubFunction) {
      setTimeout(function() {
        if (typeof window.__uspapi !== 'undefined') {
          window.__uspapi.apply(window.__uspapi, arg);
        }
      }, 500);
    }
  };

  var checkIfUspIsReady = function() {
    uspTries++;
    if (window.__uspapi === uspStubFunction && uspTries < uspTriesLimit) {
      console.warn('USP is not accessible');
    } else {
      clearInterval(uspInterval);
    }
  };

  if (typeof window.__uspapi === 'undefined') {
    window.__uspapi = uspStubFunction;
    var uspInterval = setInterval(checkIfUspIsReady, 6000);
  }
})();</script><style type="text/css"> .qc-cmp-button.qc-cmp-secondary-button:hover {    background-color: #368bd6 !important;    border-color: transparent !important;  }  .qc-cmp-button.qc-cmp-secondary-button:hover {    color: #ffffff !important;  }  .qc-cmp-button.qc-cmp-secondary-button {    color: #368bd6 !important;  }  .qc-cmp-button.qc-cmp-secondary-button {    background-color: #eee !important;    border-color: transparent !important;  } </style><script src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/f(1).txt"></script><meta http-equiv="origin-trial" content="A13s4hjGQNypqXJtC3txOObvdElWKqJttxI7WhcRiEX0+Y28BmRR2ZTW8rSV659YQd1xb9tpLof5Eehz3SMUXgwAAACHeyJvcmlnaW4iOiJodHRwczovL3d3dy5waW50ZXJlc3QuY29tOjQ0MyIsImZlYXR1cmUiOiJDb252ZXJzaW9uTWVhc3VyZW1lbnQiLCJleHBpcnkiOjE2MzQwODMxOTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KL8PMMW" height="0" width="0" style="display: none; visibility: hidden" aria-hidden="true"></iframe></noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div data-display="false" class="s13se1v"><div data-showinmobile="false" role="smartbar" class="sh8vdc0" style="--sh8vdc0-1:#7232fa; --sh8vdc0-4:#232323;"><div class="sbBody"><div class="sbText"><span role="img" aria-label="jack-o-lantern">🎃 </span><strong>50% Off Halloween Sale!</strong> Get unlimited access to every course for $49/year</div><div class="sbButton"><a href="https://www.sitepoint.com/premium/products/Z2lkOi8vbGVhcm5hYmxlL1Byb2R1Y3QvMzA4">Sign Up</a></div><button class="sbClose" aria-label="Aria Close Button"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 22.6 22.6" style="height: 1em; width: 1em;"><rect x="8.3" y="-1.7" transform="matrix(0.7071 0.7071 -0.7071 0.7071 11.3137 -4.6863)" width="6" height="26"></rect><rect x="8.3" y="-1.7" transform="matrix(-0.7071 0.7071 -0.7071 -0.7071 27.3137 11.3137)" width="6" height="26"></rect></svg></button></div></div></div><header class="szqta7"><a id="skip-navigation" href="https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/#main-content" class="s40erwn">Skip to main content</a><nav aria-label="Menu bar" class="nj1r5zu"><div class="c19tig4s"><a aria-label="SitePoint" class="lwzbxzs" href="https://www.sitepoint.com/"><svg viewBox="0 0 123 27" role="img" focusable="false"><title>SitePoint</title><g fill-rule="evenodd"><path d="M31.36,16.75 C31.56,17.07 31.82,17.31 32.14,17.50 C32.46,17.68 32.82,17.82 33.23,17.89 C33.63,17.97 34.05,18.01 34.48,18.01 C34.81,18.01 35.16,17.99 35.52,17.94 C35.89,17.89 36.22,17.81 36.53,17.68 C36.83,17.55 37.08,17.36 37.28,17.11 C37.48,16.87 37.58,16.55 37.58,16.17 C37.58,15.64 37.37,15.24 36.96,14.97 C36.55,14.69 36.03,14.47 35.41,14.31 C34.79,14.14 34.12,13.99 33.39,13.85 C32.66,13.71 31.99,13.52 31.37,13.27 C30.75,13.03 30.23,12.68 29.82,12.23 C29.41,11.78 29.20,11.16 29.20,10.36 C29.20,9.73 29.34,9.20 29.63,8.75 C29.92,8.30 30.30,7.94 30.75,7.66 C31.20,7.38 31.72,7.17 32.29,7.03 C32.86,6.90 33.42,6.83 33.99,6.83 C34.71,6.83 35.38,6.89 35.99,7.01 C36.61,7.13 37.15,7.34 37.62,7.63 C38.09,7.93 38.46,8.33 38.75,8.83 C39.03,9.34 39.19,9.96 39.24,10.72 L37.13,10.72 C37.10,10.32 36.99,9.98 36.81,9.72 C36.63,9.46 36.40,9.25 36.12,9.08 C35.84,8.92 35.53,8.81 35.19,8.74 C34.85,8.66 34.51,8.63 34.16,8.63 C33.84,8.63 33.53,8.65 33.20,8.70 C32.88,8.75 32.59,8.83 32.32,8.95 C32.06,9.07 31.84,9.23 31.68,9.43 C31.51,9.63 31.43,9.89 31.43,10.21 C31.43,10.56 31.56,10.86 31.82,11.09 C32.07,11.32 32.40,11.51 32.80,11.66 C33.19,11.82 33.64,11.95 34.13,12.05 C34.63,12.15 35.13,12.26 35.62,12.37 C36.15,12.49 36.67,12.62 37.17,12.78 C37.67,12.94 38.12,13.15 38.51,13.42 C38.90,13.68 39.21,14.01 39.45,14.41 C39.69,14.81 39.81,15.31 39.81,15.90 C39.81,16.66 39.65,17.28 39.33,17.77 C39.01,18.27 38.58,18.67 38.06,18.98 C37.54,19.28 36.96,19.49 36.30,19.61 C35.65,19.73 35.00,19.79 34.36,19.79 C33.65,19.79 32.97,19.72 32.32,19.58 C31.68,19.43 31.11,19.20 30.61,18.87 C30.12,18.54 29.72,18.11 29.42,17.57 C29.13,17.03 28.96,16.38 28.93,15.61 L31.03,15.61 C31.05,16.06 31.16,16.44 31.36,16.75" id="Fill-1"></path><path d="M42.27,7.12 L44.37,7.12 L44.37,19.53 L42.27,19.53 L42.27,7.12 Z" id="Fill-2"></path><path d="M53.13,7.12 L53.13,8.92 L50.57,8.92 L50.57,16.62 C50.57,16.86 50.59,17.05 50.63,17.20 C50.67,17.34 50.75,17.46 50.87,17.54 C50.99,17.62 51.15,17.67 51.35,17.69 C51.56,17.71 51.83,17.73 52.16,17.73 L53.13,17.73 L53.13,19.53 L51.51,19.53 C50.97,19.53 50.50,19.49 50.11,19.42 C49.72,19.35 49.41,19.22 49.17,19.02 C48.93,18.83 48.75,18.56 48.64,18.21 C48.52,17.86 48.46,17.39 48.46,16.81 L48.46,8.92 L46.28,8.92 L46.28,7.12 L48.46,7.12 L48.46,3.39 L50.57,3.39 L50.57,7.12 L53.13,7.12" id="Fill-3"></path><path d="M64.53,18.73 C63.57,19.44 62.36,19.79 60.91,19.79 C59.89,19.79 59.00,19.63 58.25,19.31 C57.49,18.99 56.86,18.54 56.35,17.97 C55.84,17.39 55.45,16.70 55.20,15.90 C54.94,15.10 54.80,14.23 54.76,13.29 C54.76,12.34 54.91,11.48 55.21,10.69 C55.51,9.91 55.92,9.23 56.46,8.65 C57.00,8.08 57.63,7.63 58.37,7.31 C59.11,6.99 59.91,6.83 60.79,6.83 C61.93,6.83 62.87,7.05 63.63,7.51 C64.38,7.97 64.98,8.55 65.44,9.25 C65.89,9.96 66.20,10.73 66.38,11.56 C66.55,12.39 66.62,13.18 66.59,13.93 L56.99,13.93 C56.98,14.48 57.04,14.99 57.19,15.48 C57.34,15.97 57.58,16.40 57.91,16.78 C58.24,17.16 58.66,17.46 59.18,17.68 C59.69,17.90 60.29,18.01 60.98,18.01 C61.88,18.01 62.61,17.82 63.18,17.41 C63.75,17.02 64.13,16.41 64.31,15.59 L66.39,15.59 C66.11,16.98 65.49,18.03 64.53,18.73 L64.53,18.73 Z M64.02,10.76 C63.83,10.33 63.58,9.96 63.25,9.65 C62.93,9.34 62.55,9.09 62.11,8.90 C61.68,8.72 61.19,8.63 60.66,8.63 C60.12,8.63 59.62,8.72 59.19,8.90 C58.75,9.09 58.37,9.34 58.06,9.66 C57.75,9.98 57.50,10.35 57.32,10.78 C57.13,11.20 57.03,11.65 56.99,12.13 L64.36,12.13 C64.32,11.65 64.21,11.20 64.02,10.76 L64.02,10.76 Z" id="Fill-4"></path><path d="M70.95,7.12 L70.95,8.80 L71.00,8.80 C71.35,8.11 71.89,7.61 72.64,7.30 C73.38,6.98 74.20,6.83 75.09,6.83 C76.09,6.83 76.95,7.00 77.68,7.36 C78.42,7.71 79.03,8.18 79.52,8.78 C80.01,9.38 80.37,10.08 80.62,10.86 C80.87,11.65 80.99,12.48 80.99,13.36 C80.99,14.24 80.87,15.07 80.63,15.85 C80.39,16.64 80.03,17.32 79.54,17.91 C79.06,18.49 78.44,18.95 77.71,19.29 C76.97,19.62 76.12,19.79 75.14,19.79 C74.83,19.79 74.48,19.76 74.09,19.70 C73.70,19.63 73.32,19.53 72.94,19.38 C72.56,19.24 72.20,19.04 71.86,18.79 C71.52,18.55 71.23,18.24 71.00,17.87 L70.95,17.87 L70.95,24.26 L68.84,24.26 L68.84,7.12 L70.95,7.12 L70.95,7.12 Z M78.53,11.52 C78.37,10.97 78.13,10.48 77.81,10.04 C77.49,9.61 77.07,9.27 76.57,9.01 C76.06,8.76 75.47,8.63 74.79,8.63 C74.08,8.63 73.48,8.76 72.98,9.04 C72.49,9.31 72.08,9.67 71.77,10.10 C71.46,10.55 71.23,11.05 71.09,11.60 C70.95,12.17 70.88,12.73 70.88,13.31 C70.88,13.92 70.95,14.51 71.10,15.07 C71.25,15.64 71.48,16.14 71.81,16.57 C72.13,17.01 72.55,17.35 73.06,17.62 C73.57,17.88 74.19,18.01 74.92,18.01 C75.65,18.01 76.25,17.88 76.74,17.61 C77.23,17.34 77.62,16.98 77.92,16.53 C78.22,16.08 78.43,15.57 78.56,14.99 C78.70,14.41 78.76,13.82 78.76,13.21 C78.76,12.64 78.68,12.07 78.53,11.52 L78.53,11.52 Z" id="Fill-5"></path><path d="M83.17,10.78 C83.44,9.98 83.84,9.30 84.36,8.71 C84.89,8.13 85.55,7.67 86.33,7.33 C87.10,7.00 87.99,6.83 89.00,6.83 C90.03,6.83 90.92,7.00 91.69,7.33 C92.46,7.67 93.11,8.13 93.64,8.71 C94.17,9.30 94.56,9.98 94.83,10.78 C95.09,11.57 95.23,12.42 95.23,13.33 C95.23,14.25 95.09,15.09 94.83,15.88 C94.56,16.66 94.17,17.35 93.64,17.93 C93.11,18.52 92.46,18.97 91.69,19.30 C90.92,19.63 90.03,19.79 89.00,19.79 C87.99,19.79 87.10,19.63 86.33,19.30 C85.55,18.97 84.89,18.52 84.36,17.93 C83.84,17.35 83.44,16.66 83.17,15.88 C82.91,15.09 82.78,14.25 82.78,13.33 C82.78,12.42 82.91,11.57 83.17,10.78 L83.17,10.78 Z M85.32,15.34 C85.53,15.92 85.81,16.41 86.18,16.80 C86.54,17.19 86.96,17.49 87.45,17.70 C87.94,17.91 88.46,18.01 89.00,18.01 C89.55,18.01 90.06,17.91 90.55,17.70 C91.04,17.49 91.46,17.19 91.83,16.80 C92.19,16.41 92.48,15.92 92.68,15.34 C92.89,14.75 92.99,14.09 92.99,13.33 C92.99,12.58 92.89,11.91 92.68,11.33 C92.48,10.75 92.19,10.25 91.83,9.85 C91.46,9.45 91.04,9.15 90.55,8.94 C90.06,8.73 89.55,8.63 89.00,8.63 C88.46,8.63 87.94,8.73 87.45,8.94 C86.96,9.15 86.54,9.45 86.18,9.85 C85.81,10.25 85.53,10.75 85.32,11.33 C85.11,11.91 85.01,12.58 85.01,13.33 C85.01,14.09 85.11,14.75 85.32,15.34 L85.32,15.34 Z" id="Fill-6"></path><path d="M97.83,7.12 L99.94,7.12 L99.94,19.53 L97.83,19.53 L97.83,7.12 Z" id="Fill-7"></path><path d="M105.19,7.12 L105.19,9.08 L105.24,9.08 C106.12,7.58 107.51,6.83 109.41,6.83 C110.25,6.83 110.95,6.94 111.51,7.16 C112.08,7.39 112.53,7.70 112.88,8.10 C113.23,8.50 113.47,8.98 113.61,9.53 C113.75,10.08 113.82,10.69 113.82,11.36 L113.82,19.53 L111.71,19.53 L111.71,11.12 C111.71,10.36 111.48,9.75 111.02,9.30 C110.56,8.85 109.92,8.63 109.11,8.63 C108.46,8.63 107.91,8.72 107.43,8.92 C106.96,9.11 106.57,9.38 106.26,9.73 C105.94,10.08 105.71,10.50 105.55,10.97 C105.39,11.44 105.32,11.96 105.32,12.52 L105.32,19.53 L103.21,19.53 L103.21,7.12 L105.19,7.12" id="Fill-8"></path><path d="M122.47,7.12 L122.47,8.92 L119.92,8.92 L119.92,16.62 C119.92,16.86 119.94,17.05 119.98,17.20 C120.02,17.34 120.10,17.46 120.22,17.54 C120.33,17.62 120.49,17.67 120.70,17.69 C120.91,17.71 121.18,17.73 121.50,17.73 L122.47,17.73 L122.47,19.53 L120.86,19.53 C120.32,19.53 119.85,19.49 119.46,19.42 C119.07,19.35 118.76,19.22 118.52,19.02 C118.28,18.83 118.10,18.56 117.99,18.21 C117.87,17.86 117.81,17.39 117.81,16.81 L117.81,8.92 L115.63,8.92 L115.63,7.12 L117.81,7.12 L117.81,3.39 L119.92,3.39 L119.92,7.12 L122.47,7.12" id="Fill-9"></path><path d="M0.67,11.87 L2.62,13.76 L8.76,19.50 L11.41,16.94 C11.65,16.61 11.64,16.16 11.36,15.84 L8.94,13.72 L8.95,13.72 L6.34,11.19 C6.04,10.84 6.04,10.32 6.37,9.99 L13.38,3.21 L10.20,0.12 L0.68,9.31 C-0.05,10.02 -0.05,11.17 0.67,11.87" id="Fill-10"></path><path d="M21.60,15.15 L19.66,13.27 L13.51,7.53 L10.86,10.08 C10.62,10.42 10.64,10.87 10.91,11.19 L13.33,13.31 L13.33,13.31 L15.93,15.84 C16.24,16.19 16.23,16.70 15.91,17.04 L8.89,23.82 L12.08,26.91 L19.65,19.60 L21.60,17.71 C22.33,17.01 22.33,15.86 21.60,15.15" id="Fill-11"></path><path d="M44.55,4.58 C44.55,5.24 44.00,5.77 43.32,5.77 C42.64,5.77 42.09,5.24 42.09,4.58 C42.09,3.93 42.64,3.39 43.32,3.39 C44.00,3.39 44.55,3.93 44.55,4.58" id="Fill-12"></path><path d="M100.11,4.58 C100.11,5.24 99.56,5.77 98.88,5.77 C98.20,5.77 97.65,5.24 97.65,4.58 C97.65,3.93 98.20,3.39 98.88,3.39 C99.56,3.39 100.11,3.93 100.11,4.58" id="Fill-13"></path></g></svg></a><button type="button" data-toggle="main-nav" aria-label="Toggle navigation" aria-controls="main-nav" class="h1sloftb"><span></span></button><nav id="main-nav" class="napbdwr"><li class="ns13f0v"><a data-text="Blog" class="ny3bhvl" href="https://www.sitepoint.com/blog/">Blog</a></li><li class="ns13f0v"><a data-text="Discord" href="https://discord.com/invite/PyAM7tv" class="ny3bhvl">Discord</a></li><li class="ns13f0v"><a data-text="Forum" href="https://www.sitepoint.com/community/" class="ny3bhvl">Forum</a></li><li class="ns13f0v"><a data-text="Library" href="https://www.sitepoint.com/premium/library/" class="ny3bhvl">Library</a></li><li class="ns13f0v"><a data-text="Login" href="https://www.sitepoint.com/premium/sign-in/" class="ny3bhvl">Login</a></li></nav><a data-color="pink" data-type="default" data-size="default" id="join-premium" href="https://www.sitepoint.com/premium/products/Z2lkOi8vbGVhcm5hYmxlL1Byb2R1Y3QvMzA3/" target="_blank" class="jglk3p4 s65o7al">Join Premium</a></div></nav></header><main id="main-content" class="wj3nsdq" style="--wj3nsdq-0:0 auto;--wj3nsdq-1:none;--wj3nsdq-2:none"><article aria-label="Article title: A Step by Step Guide to Building an Android Audio Player App" class="cG9zdDoxMzczMjE="><section aria-label="Article header for A Step by Step Guide to Building an Android Audio Player App" color="mobile" class="s1xu2uce" style="--s1xu2uce-0:url(https://uploads.sitepoint.com/wp-content/uploads/2020/04/1586298076bg_header.svg#mobile);--s1xu2uce-2:#2C5773"><div class="wzjw2su"><header class="i1ju85s6"><h1 class="t1nx95qj">A Step by Step Guide to Building an Android Audio Player App</h1><div class="mj4qk0u"><div><address class="a9j7xdv m1pdrmq3">By&nbsp;<a href="https://www.sitepoint.com/author/valdioveliu">Valdio Veliu</a></address><a href="https://www.sitepoint.com/mobile" class="m1pdrmq3">Mobile</a><time datetime="2016-08-19" class="m1pdrmq3">August 19, 2016</time></div><div><span class="m1pdrmq3">Share:</span><button aria-label="Share Sitepoint on facebook" data-network="facebook" class="social-share-button sgoxgza" color="white" style="--sgoxgza-0:white"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-square" class="svg-inline--fa fa-facebook-square fa-w-14 fa-lg share-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"></path></svg></button><button aria-label="Share Sitepoint on reddit" data-network="reddit" class="social-share-button sgoxgza" color="white" style="--sgoxgza-0:white"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit fa-w-16 fa-lg share-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"></path></svg></button><button aria-label="Share Sitepoint on twitter" data-network="twitter" class="social-share-button sgoxgza" color="white" style="--sgoxgza-0:white"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter-square" class="svg-inline--fa fa-twitter-square fa-w-14 fa-lg share-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></path></svg></button><button aria-label="Share Sitepoint on linkedin" data-network="linkedin" class="social-share-button sgoxgza" color="white" style="--sgoxgza-0:white"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14 fa-lg share-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></button><button aria-label="Share Sitepoint on email" data-network="email" class="social-share-button sgoxgza" color="white" style="--sgoxgza-0:white"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-w-16 fa-lg share-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></button></div></div></header><aside data-type="book" class="s3srsdt" id="article_header_7qo2bl1635751311278"><div id="ad_article_header_7qo2bl1635751311278" data-type="book" class="proper-ad-unit a19jghoq" style="--a19jghoq-0:0px"></div><div><div data-layout="compact" class="spapid0"><h4 class="t10axsgu">Free JavaScript Book!</h4><div><div class="bk2yy1g"><div class="book-cover cover-spine-overlay gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:125%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsSAAALEgHS3X78AAAC8klEQVQ4y42UW08TQRTH9/u03V6hlAIWBMSq3CSKJGpUIBKjMSS8aaI+mPhgvDyZSOKDT0Y/BKEzsy29bLm0SHhQCRFCb2x32+6sL86ZdktLm0Dyy8nc/jNnzjkzgo6t58CmkyrWWoOPC+cSE7se7tQj3SZduuRmO55T7KBrvTQ2xBmk0X7K9EQUznYYxCIcFfbC+UCHTpytJ1tMa2kebOXUndn2xAFbgnXokovjZlBG2ANWYraTssPZeIPbNj3io4krVJ6kiWuAPAEkJ6k8bsgTxvq0sXELWGfcoPHLuuQRTkISHzFS88b2YyP10EgtQAN4At2tWdb4t7Nk7CzCms3bhjxOw9662EmjF2lyyti4A9OgnwfSC0aai7ceQHdrlq5P0+R1IzFKI91C04XDXpoYM1JzINi8S8HVGVN2D9rcecoaySmWPKEpqsROowEqj7F70niQRgfAndgIlUdhMD4CSY5fgqnYMMuZ0FKGdh5wF4+53cSpS86TRNQ4VSTkVG7bdtvluYKsZWSrcMzaqrZrlJFYCtmZrZVdXVzCjiIJKJExRhEPlLGrgh0a8StkUCM9FShGaxH5MqGggnoaxWx7i4r9heRS8fc35df3XPIZ20jFfXn5aS79Pi8vqiRQRo5CZPow+Tq3dr+E3dxzm0AJiIvSwPHuJ13dq6h/C7tfFSlYwMGj7eXsfuJo+0seXy0if27jZfbPSjb1kbmjI35yTUz6Cz8/lPJpLb+b21lWyCUF9R3EX+ynfhwkXh2HAsfoQmbzTWYvlEl/PibBalwEfgGLirrysbl8+m0u/S4be6QifxnZM6tD+ys3s6vDzOcS9uQiM4eJ59m1WQ35mgJWwaKGvZoUUEm/hrvK2A5RDInqqquE7NUIacitoF4NdVZw+2/IVo8kT7uN8mIw08tLCIv1BULLLyfyaZPa6npXbNxdaPPX1X6c+qdTxQt/AxEbF7cVd7DnxvEBYW5ZV/KcJQavRLP0+avA5vPATT4z/gP7deMY2smaEgAAAABJRU5ErkJggg==" alt="" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition-delay: 500ms;"><picture><source type="image/webp" srcset="https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=165&amp;h=206&amp;fit=crop&amp;fm=webp 165w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=248&amp;h=310&amp;fit=crop&amp;fm=webp 248w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=330&amp;h=413&amp;fit=crop&amp;fm=webp 330w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=495&amp;h=619&amp;fit=crop&amp;fm=webp 495w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?fm=webp 1056w" sizes="(max-width: 165px) 100vw, 165px"><source srcset="https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=165&amp;h=206&amp;fit=crop 165w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=248&amp;h=310&amp;fit=crop 248w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=330&amp;h=413&amp;fit=crop 330w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=495&amp;h=619&amp;fit=crop 495w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png 1056w" sizes="(max-width: 165px) 100vw, 165px"><img sizes="(max-width: 165px) 100vw, 165px" srcset="https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=165&amp;h=206&amp;fit=crop 165w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=248&amp;h=310&amp;fit=crop 248w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=330&amp;h=413&amp;fit=crop 330w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=495&amp;h=619&amp;fit=crop 495w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png 1056w" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png" alt="" loading="lazy" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 1; transition: opacity 500ms ease 0s;"></picture><noscript><picture><source type='image/webp' srcset="https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=165&h=206&fit=crop&fm=webp 165w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=248&h=310&fit=crop&fm=webp 248w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=330&h=413&fit=crop&fm=webp 330w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=495&h=619&fit=crop&fm=webp 495w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?fm=webp 1056w" sizes="(max-width: 165px) 100vw, 165px" /><source srcset="https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=165&h=206&fit=crop 165w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=248&h=310&fit=crop 248w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=330&h=413&fit=crop 330w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=495&h=619&fit=crop 495w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png 1056w" sizes="(max-width: 165px) 100vw, 165px" /><img loading="lazy" sizes="(max-width: 165px) 100vw, 165px" srcset="https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=165&h=206&fit=crop 165w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=248&h=310&fit=crop 248w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=330&h=413&fit=crop 330w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=495&h=619&fit=crop 495w,
https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png 1056w" src="https://cdn.sanity.io/images/708bnrs8/production/8cfcee85cbdd739f3b607a82caba174f953e5c20-1056x1320.png?w=165&h=206&fit=crop" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="p165lja"><p data-size="small" font-weight="400" class="s1aa88yd" style="--s1aa88yd-0:400">Write powerful, clean and maintainable JavaScript.<br><br><s>RRP $11.95</s> </p></div></div><div class="cpptuun"><a data-color="pink" data-type="default" data-size="medium" id="article_header-button" href="https://www.sitepoint.com/premium/books/javascript-best-practice/read/1?fromBlog=true&amp;campaign=js-best-practice-reader" data-network="JavaScript: Best Practice" data-unit="article_header" class="s65o7al">Get the book free!</a></div></div></div></aside></div></section><div class="shgz0o2"><section aria-label="Article content for A Step by Step Guide to Building an Android Audio Player App" class="s1w6ed5l"><div><p>This tutorial is a step by step guide to building an Android Audio app, using the best and most efficient methodologies and APIs. This is a long tutorials, so I have split it into two discrete parts if it’s too much to digest in one read:</p>
<ol><li>Building a media player in a service, important for playing media in the background.</li>
<li>Interacting with the service through <code>BroadcastReceiver</code>s ( PLAY, PAUSE, NEXT, PREVIOUS). How to handle edge use-cases like incoming calls, change of audio outputs (e.g. removing headphones).</li>
</ol><h2 id="partonesettinguptheproject">Part One – Setting up the Project.</h2>
<p>Create a new Project in Android Studio and add the following permissions in the <em>AndroidManifest.xml</em> file.</p>
<pre class="language-xml"><code class="xml language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.permission.INTERNET<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.permission.MEDIA_CONTENT_CONTROL<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.permission.READ_PHONE_STATE<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre>

<p>The app needs these permissions to access media files over the internet when streaming media. Since the focus of this article is building a media player app, you need the <code>MEDIA_CONTENT_CONTROL</code> to control media playback. You use the <code>READ_PHONE_STATE</code> permission to access phone state to listen to events like incoming calls so you can stop the audio while a call is in progress.</p>
<h2 id="steptwocreatethemediaplayerservice">Step Two – Create the MediaPlayer Service</h2>
<p>The core of the Audio Player app is the media player service. The following class is an example of this service. The class has multiple <code>MediaPlayer</code> implementations to handle events that can happen while playing audio. The last implementation, from <code>AudioManager.OnAudioFocusChangeListener</code> is necessary to handle requests for <code>AudioFocus</code> from other apps that want to play media files.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MediaPlayerService</span> <span class="token keyword">extends</span> <span class="token class-name">Service</span> <span class="token keyword">implements</span> <span class="token class-name">MediaPlayer<span class="token punctuation">.</span>OnCompletionListener</span><span class="token punctuation">,</span>
      <span class="token class-name">MediaPlayer<span class="token punctuation">.</span>OnPreparedListener</span><span class="token punctuation">,</span> <span class="token class-name">MediaPlayer<span class="token punctuation">.</span>OnErrorListener</span><span class="token punctuation">,</span> <span class="token class-name">MediaPlayer<span class="token punctuation">.</span>OnSeekCompleteListener</span><span class="token punctuation">,</span>
      <span class="token class-name">MediaPlayer<span class="token punctuation">.</span>OnInfoListener</span><span class="token punctuation">,</span> <span class="token class-name">MediaPlayer<span class="token punctuation">.</span>OnBufferingUpdateListener</span><span class="token punctuation">,</span>

      <span class="token class-name">AudioManager<span class="token punctuation">.</span>OnAudioFocusChangeListener</span> <span class="token punctuation">{</span>


  <span class="token comment">// Binder given to clients</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">IBinder</span> iBinder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LocalBinder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">IBinder</span> <span class="token function">onBind</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> iBinder<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBufferingUpdate</span><span class="token punctuation">(</span><span class="token class-name">MediaPlayer</span> mp<span class="token punctuation">,</span> <span class="token keyword">int</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//Invoked indicating buffering status of</span>
      <span class="token comment">//a media resource being streamed over the network.</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCompletion</span><span class="token punctuation">(</span><span class="token class-name">MediaPlayer</span> mp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//Invoked when playback of a media source has completed.</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//Handle errors</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token class-name">MediaPlayer</span> mp<span class="token punctuation">,</span> <span class="token keyword">int</span> what<span class="token punctuation">,</span> <span class="token keyword">int</span> extra<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//Invoked when there has been an error during an asynchronous operation.</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onInfo</span><span class="token punctuation">(</span><span class="token class-name">MediaPlayer</span> mp<span class="token punctuation">,</span> <span class="token keyword">int</span> what<span class="token punctuation">,</span> <span class="token keyword">int</span> extra<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//Invoked to communicate some info.</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onPrepared</span><span class="token punctuation">(</span><span class="token class-name">MediaPlayer</span> mp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//Invoked when the media source is ready for playback.</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSeekComplete</span><span class="token punctuation">(</span><span class="token class-name">MediaPlayer</span> mp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//Invoked indicating the completion of a seek operation.</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAudioFocusChange</span><span class="token punctuation">(</span><span class="token keyword">int</span> focusChange<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//Invoked when the audio focus of the system is updated.</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LocalBinder</span> <span class="token keyword">extends</span> <span class="token class-name">Binder</span> <span class="token punctuation">{</span>
      <span class="token keyword">public</span> <span class="token class-name">MediaPlayerService</span> <span class="token function">getService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token class-name">MediaPlayerService</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
<p>The code above is a template of all the methods that will handle the <code>MediaPlayer</code> events. The only code that is complete is the binding of the <code>Service</code>. You need to bind this service because it interacts with the activity to get the audio files. You can lean more about bound services in the <a href="https://developer.android.com/guide/components/bound-services.html">documentation</a>.</p>
<p>Declare the <code>Service</code> in the <em>AndroidManifest.xml</em> file</p>
<pre class="language-xml"><code class="xml language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>
  <span class="token attr-name">&lt;service</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.MediaPlayerService<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h2 id="stepthreeconstructingthemediaplayer">Step Three – Constructing the MediaPlayer</h2>
<p>The Android multimedia framework supports a variety of common media types. One key component of this framework is the <a href="https://developer.android.com/reference/android/media/MediaPlayer.html">MediaPlayer</a> class, which with minimal setup you can use to play audio and video. You can find a basic example of the <code>MediaPlayer</code> implementation in the <a href="https://developer.android.com/guide/topics/media/mediaplayer.html#mediaplayer">documentation</a>, but you will need more than this example <code>Service</code> to play media. Next I will describe the necessary methods that need to be setup in the <code>MediaPlayerService</code> class.</p>
<p>Create the following global instances of <code>MediaPlayer</code> and the <code>String</code> path of the audio in the <code>Service</code> class.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token class-name">MediaPlayer</span> mediaPlayer<span class="token punctuation">;</span>
<span class="token comment">//path to the audio file</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> mediaFile<span class="token punctuation">;</span>
</code></pre>
<p>Now initialize the <code>mediaPlayer</code>:</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initMediaPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mediaPlayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediaPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Set up MediaPlayer event listeners</span>
    mediaPlayer<span class="token punctuation">.</span><span class="token function">setOnCompletionListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mediaPlayer<span class="token punctuation">.</span><span class="token function">setOnErrorListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mediaPlayer<span class="token punctuation">.</span><span class="token function">setOnPreparedListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mediaPlayer<span class="token punctuation">.</span><span class="token function">setOnBufferingUpdateListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mediaPlayer<span class="token punctuation">.</span><span class="token function">setOnSeekCompleteListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mediaPlayer<span class="token punctuation">.</span><span class="token function">setOnInfoListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Reset so that the MediaPlayer is not pointing to another data source</span>
    mediaPlayer<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    mediaPlayer<span class="token punctuation">.</span><span class="token function">setAudioStreamType</span><span class="token punctuation">(</span><span class="token class-name">AudioManager</span><span class="token punctuation">.</span>STREAM_MUSIC<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// Set the data source to the mediaFile location</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>mediaFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">stopSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    mediaPlayer<span class="token punctuation">.</span><span class="token function">prepareAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>When working with media, you need to implement some functions to handle basic action for playing media. These basic functions are Play, Stop, Pause, and Resume.</p>
<p>First add another global variable to store the pause/resume position.</p>
<pre class="language-java"><code class="java language-java"><span class="token comment">//Used to pause/resume MediaPlayer</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> resumePosition<span class="token punctuation">;</span>
</code></pre>
<p>Add <code>if</code> statements to make sure there are no problems while playing media.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">playMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mediaPlayer<span class="token punctuation">.</span><span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">stopMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaPlayer <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaPlayer<span class="token punctuation">.</span><span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">pauseMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaPlayer<span class="token punctuation">.</span><span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resumePosition <span class="token operator">=</span> mediaPlayer<span class="token punctuation">.</span><span class="token function">getCurrentPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">resumeMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mediaPlayer<span class="token punctuation">.</span><span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">seekTo</span><span class="token punctuation">(</span>resumePosition<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now that you have created the initialization functions it’s time to implement the <code>@Override</code> methods constructed in the initial <code>Service</code> template. These methods are important to the <code>MediaPlayer</code> because all the key actions the player will perform will be called from these methods. Replace the original methods in the <code>Service</code> template with the following.</p>
<pre class="language-java"><code class="java language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCompletion</span><span class="token punctuation">(</span><span class="token class-name">MediaPlayer</span> mp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//Invoked when playback of a media source has completed.</span>
    <span class="token function">stopMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//stop the service</span>
    <span class="token function">stopSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//Handle errors</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token class-name">MediaPlayer</span> mp<span class="token punctuation">,</span> <span class="token keyword">int</span> what<span class="token punctuation">,</span> <span class="token keyword">int</span> extra<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//Invoked when there has been an error during an asynchronous operation</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>what<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token class-name">MediaPlayer</span><span class="token punctuation">.</span>MEDIA_ERROR_NOT_VALID_FOR_PROGRESSIVE_PLAYBACK<span class="token operator">:</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MediaPlayer Error"</span><span class="token punctuation">,</span> <span class="token string">"MEDIA ERROR NOT VALID FOR PROGRESSIVE PLAYBACK "</span> <span class="token operator">+</span> extra<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">MediaPlayer</span><span class="token punctuation">.</span>MEDIA_ERROR_SERVER_DIED<span class="token operator">:</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MediaPlayer Error"</span><span class="token punctuation">,</span> <span class="token string">"MEDIA ERROR SERVER DIED "</span> <span class="token operator">+</span> extra<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">MediaPlayer</span><span class="token punctuation">.</span>MEDIA_ERROR_UNKNOWN<span class="token operator">:</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MediaPlayer Error"</span><span class="token punctuation">,</span> <span class="token string">"MEDIA ERROR UNKNOWN "</span> <span class="token operator">+</span> extra<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onPrepared</span><span class="token punctuation">(</span><span class="token class-name">MediaPlayer</span> mp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//Invoked when the media source is ready for playback.</span>
    <span class="token function">playMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Note</strong>: There are more <code>@Override</code> methods implemented in the initial <code>Service</code> template. These are useful in specific <code>MediaPlayer</code> events, but since the focus of this tutorial is building a general purpose media player I wont implement them.</p><div class="proper-ad-unit">
          <div id="proper-ad-sitepoint_content_1" class="sitepoint_content"></div>
        </div><p></p>
<h2 id="stepfourhandlingaudiofocus">Step Four – Handling Audio Focus</h2>
<p>For a good user experience with audio in Android, you need to be careful that your app plays nicely with the system and other apps that also play media.</p>
<p>To ensure this good user experience the <code>MediaPlayerService</code> will have to handle <code>AudioFocus</code> events and these are handled in the last override method, <code>onAudioFocusChange()</code>. This method is a <code>switch</code> statement with the focus events as its <code>case:</code>s. Keep in mind that this override method is called after a request for <code>AudioFocus</code> has been made from the system or another media app.</p>
<p>What happens in each <code>case:</code>?</p>
<ul><li><code>AudioManager.AUDIOFOCUS_GAIN</code> – The service gained audio focus, so it needs to start playing.</li>
<li><code>AudioManager.AUDIOFOCUS_LOSS</code> – The service lost audio focus, the user probably moved to playing media on another app, so release the media player.</li>
<li><code>AudioManager.AUDIOFOCUS_LOSS_TRANSIENT</code> – Fucos lost for a short time, pause the <code>MediaPlayer</code>.</li>
<li><code>AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK</code> – Lost focus for a short time, probably a notification arrived on the device, lower the playback volume.</li>
</ul><p>In addition to the override methods, you need two other functions to request and release audio focus from the <code>MediaPlayer</code>. The following code block contains all the audio focus methods described above. I took the <code>onAudioFocusChange()</code>‘s code from the Android Developer <a href="https://developer.android.com/guide/topics/media/mediaplayer.html#audiofocus">documentation</a> and made some changes, but this code gets the job done for this example.</p>
<p>First add a new global variable to the <code>Service</code> class.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token class-name">AudioManager</span> audioManager<span class="token punctuation">;</span>
</code></pre>
<p>Replace the <code>Service</code>‘s <code>onAudioFocusChange()</code> method with the following and add the functions it uses.</p>
<pre class="language-java"><code class="java language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAudioFocusChange</span><span class="token punctuation">(</span><span class="token keyword">int</span> focusState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//Invoked when the audio focus of the system is updated.</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>focusState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token class-name">AudioManager</span><span class="token punctuation">.</span>AUDIOFOCUS_GAIN<span class="token operator">:</span>
            <span class="token comment">// resume playback</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaPlayer <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token function">initMediaPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mediaPlayer<span class="token punctuation">.</span><span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> mediaPlayer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mediaPlayer<span class="token punctuation">.</span><span class="token function">setVolume</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">AudioManager</span><span class="token punctuation">.</span>AUDIOFOCUS_LOSS<span class="token operator">:</span>
            <span class="token comment">// Lost focus for an unbounded amount of time: stop playback and release media player</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaPlayer<span class="token punctuation">.</span><span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> mediaPlayer<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mediaPlayer<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mediaPlayer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">AudioManager</span><span class="token punctuation">.</span>AUDIOFOCUS_LOSS_TRANSIENT<span class="token operator">:</span>
            <span class="token comment">// Lost focus for a short time, but we have to stop</span>
            <span class="token comment">// playback. We don't release the media player because playback</span>
            <span class="token comment">// is likely to resume</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaPlayer<span class="token punctuation">.</span><span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> mediaPlayer<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">AudioManager</span><span class="token punctuation">.</span>AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK<span class="token operator">:</span>
            <span class="token comment">// Lost focus for a short time, but it's ok to keep playing</span>
            <span class="token comment">// at an attenuated level</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaPlayer<span class="token punctuation">.</span><span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> mediaPlayer<span class="token punctuation">.</span><span class="token function">setVolume</span><span class="token punctuation">(</span><span class="token number">0.1f</span><span class="token punctuation">,</span> <span class="token number">0.1f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">requestAudioFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    audioManager <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">AudioManager</span><span class="token punctuation">)</span> <span class="token function">getSystemService</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>AUDIO_SERVICE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> audioManager<span class="token punctuation">.</span><span class="token function">requestAudioFocus</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">AudioManager</span><span class="token punctuation">.</span>STREAM_MUSIC<span class="token punctuation">,</span> <span class="token class-name">AudioManager</span><span class="token punctuation">.</span>AUDIOFOCUS_GAIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token class-name">AudioManager</span><span class="token punctuation">.</span>AUDIOFOCUS_REQUEST_GRANTED<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//Focus gained</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//Could not gain focus</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">removeAudioFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">AudioManager</span><span class="token punctuation">.</span>AUDIOFOCUS_REQUEST_GRANTED <span class="token operator">==</span>
            audioManager<span class="token punctuation">.</span><span class="token function">abandonAudioFocus</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If you want to learn more about audio focus then <a href="https://www.sitepoint.com/managing-multiple-sound-sources-in-android-with-audio-focus/">SitePoint article</a> has a great tutorial.</p>
<h2 id="stepfiveservicelifecyclemethods">Step Five – Service Lifecycle Methods</h2>
<p>In this section I will focus on the <code>Service</code> lifecycle. These methods are crucial to the <code>MediaPlayer</code> because the <code>Service</code> lifecycle is closely connected to the <code>MediaPlayer</code>s. These methods will handle the initialization and resource management for the <code>MediaPlayer</code>.</p>
<p>I have inline comments to make it easier to understand.</p>
<pre class="language-java"><code class="java language-java"><span class="token comment">//The system calls this method when an activity, requests the service be started</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">onStartCommand</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">,</span> <span class="token keyword">int</span> flags<span class="token punctuation">,</span> <span class="token keyword">int</span> startId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">//An audio file is passed to the service through putExtra();</span>
        mediaFile <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getExtras</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"media"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NullPointerException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">stopSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//Request audio focus</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">requestAudioFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//Could not gain focus</span>
        <span class="token function">stopSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaFile <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> mediaFile <span class="token operator">!=</span> <span class="token string">""</span><span class="token punctuation">)</span>
        <span class="token function">initMediaPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStartCommand</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> flags<span class="token punctuation">,</span> startId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The <code>onStartCommand()</code> handles the initialization of the <code>MediaPlayer</code> and the focus request to make sure there are no other apps playing media. In the <code>onStartCommand()</code> code I added an extra <code>try-catch</code> block to make sure the <code>getExtras()</code> method doesn’t throw a <code>NullPointerException</code>.</p>
<p>Another important method you need to implement is <code>onDestroy()</code>. In this method the <code>MediaPlayer</code> resources must be released, as this service is about to be destroyed and there is no need for the app to control the media resources.</p>
<pre class="language-java"><code class="java language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaPlayer <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">stopMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">removeAudioFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The <code>onDestroy()</code> method also releases audio focus, this is more of a personal choice. If you release the focus in this method the <code>MediaPlayerService</code> will have audio focus until destroyed, if there are no interruptions from other media apps for audio focus.</p>
<p>If you want a more dynamic focus control, you can request audio focus when new media starts playing and release it in the <code>onCompletion()</code> method, so the service will have focus control only while playing something.</p><div class="proper-ad-unit">
          <div id="proper-ad-sitepoint_content_2" class="sitepoint_content"></div>
        </div><p></p>
<h2 id="stepsixbindingtheaudioplayer">Step Six – Binding the Audio Player</h2>
<p>In this section I will cover the final steps to bind the <code>MediaPlayerService</code> class to the <code>MainActivity</code> and provide it with audio to play. You must bind the <code>Service</code> to the <code>Activity</code> so they can interact with each other.</p>
<p>Add the following global variables to the <code>MainActivity</code> class.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token class-name">MediaPlayerService</span> player<span class="token punctuation">;</span>
<span class="token keyword">boolean</span> serviceBound <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre>
<p>The first is an instance of the <code>Service</code> and the second Boolean value contains the status of the <code>Service</code>, bound or not to the activity.</p>
<p>To handle <code>Service</code> binding, add the following to the <code>MainActivity</code> class.</p>
<pre class="language-java"><code class="java language-java"><span class="token comment">//Binding this Client to the AudioPlayer Service</span>
<span class="token keyword">private</span> <span class="token class-name">ServiceConnection</span> serviceConnection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServiceConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onServiceConnected</span><span class="token punctuation">(</span><span class="token class-name">ComponentName</span> name<span class="token punctuation">,</span> <span class="token class-name">IBinder</span> service<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// We've bound to LocalService, cast the IBinder and get LocalService instance</span>
        <span class="token class-name">MediaPlayerService<span class="token punctuation">.</span>LocalBinder</span> binder <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MediaPlayerService<span class="token punctuation">.</span>LocalBinder</span><span class="token punctuation">)</span> service<span class="token punctuation">;</span>
        player <span class="token operator">=</span> binder<span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        serviceBound <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">MainActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"Service Bound"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onServiceDisconnected</span><span class="token punctuation">(</span><span class="token class-name">ComponentName</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        serviceBound <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Now it’s time to play some audio. The following function creates a new instance of the <code>MediaPlayerService</code> and sends a media file to play, so add it to the <code>MainActivity</code>.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">playAudio</span><span class="token punctuation">(</span><span class="token class-name">String</span> media<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//Check is service is active</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>serviceBound<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Intent</span> playerIntent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">MediaPlayerService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        playerIntent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">"media"</span><span class="token punctuation">,</span> media<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">startService</span><span class="token punctuation">(</span>playerIntent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">bindService</span><span class="token punctuation">(</span>playerIntent<span class="token punctuation">,</span> serviceConnection<span class="token punctuation">,</span> <span class="token class-name">Context</span><span class="token punctuation">.</span>BIND_AUTO_CREATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//Service is active</span>
        <span class="token comment">//Send media with BroadcastReceiver</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The <code>playAudio()</code> function is not complete. I will return to this later when sending media files to the <code>Service</code> with a <code>BroadcastReceiver</code>.</p>
<p>Call the <code>playAudio()</code> function from the <code>Activity</code>s <code>onCreate()</code> method and reference an audio file.</p>
<pre class="language-java"><code class="java language-java"><span class="token function">playAudio</span><span class="token punctuation">(</span><span class="token string">"https://upload.wikimedia.org/wikipedia/commons/6/6c/Grieg_Lyric_Pieces_Kobold.ogg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="stepsevenactivitylifecyclemethods">Step Seven – Activity Lifecycle Methods</h2>
<p>In this section I will cover basic, but crucial implementations of the <code>MainActivity</code>s life-cycle methods. If you call the <code>playAudio()</code> function from the <code>Activity</code>s <code>onCreate()</code> method the <code>Service</code> will start playing, but the app can easily crash.</p>
<p>Add the following methods to <code>MainActivity</code> to fix it. All these methods do is save and restore the state of the <code>serviceBound</code> variable and unbind the <code>Service</code> when a user closes the app.</p>
<pre class="language-java"><code class="java language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSaveInstanceState</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    savedInstanceState<span class="token punctuation">.</span><span class="token function">putBoolean</span><span class="token punctuation">(</span><span class="token string">"ServiceState"</span><span class="token punctuation">,</span> serviceBound<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onSaveInstanceState</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onRestoreInstanceState</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onRestoreInstanceState</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    serviceBound <span class="token operator">=</span> savedInstanceState<span class="token punctuation">.</span><span class="token function">getBoolean</span><span class="token punctuation">(</span><span class="token string">"ServiceState"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>serviceBound<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">unbindService</span><span class="token punctuation">(</span>serviceConnection<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//service is active</span>
        player<span class="token punctuation">.</span><span class="token function">stopSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="extrasloadinglocalaudiofiles">Extras – Loading Local Audio Files</h2>
<p>A user will likely want to load audio from the actual device instead of streaming them online. You can load audio files from the device by using <code>ContentResolver</code>.</p>
<p>Create a new Java class used as an audio object. The following class contains the crucial information an audio file needs, but you can add more if necessary.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Audio</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> data<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> album<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> artist<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Audio</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">,</span> <span class="token class-name">String</span> title<span class="token punctuation">,</span> <span class="token class-name">String</span> album<span class="token punctuation">,</span> <span class="token class-name">String</span> artist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>album <span class="token operator">=</span> album<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>artist <span class="token operator">=</span> artist<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> title<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAlbum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> album<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAlbum</span><span class="token punctuation">(</span><span class="token class-name">String</span> album<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>album <span class="token operator">=</span> album<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getArtist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> artist<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setArtist</span><span class="token punctuation">(</span><span class="token class-name">String</span> artist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>artist <span class="token operator">=</span> artist<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Add the permission to <em>AndroidManifest.xml</em>.</p>
<pre class="language-xml"><code class="xml language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.permission.READ_EXTERNAL_STORAGE<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre>
<p>This is necessary to load local media files from the Android device.</p><div class="proper-ad-unit">
          <div id="proper-ad-sitepoint_content_3" class="sitepoint_content"></div>
        </div><p></p>
<p>In the <code>MainActivity</code> class create a global <code>ArrayList</code> of <code>Audio</code> objects.</p>
<pre class="language-java"><code class="java language-java"><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Audio</span><span class="token punctuation">&gt;</span></span> audioList<span class="token punctuation">;</span>
</code></pre>
<p>To get data from the device add the following function to <code>MainActivity</code>. It retrieves the data from the device in ascending order.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">loadAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">ContentResolver</span> contentResolver <span class="token operator">=</span> <span class="token function">getContentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">Uri</span> uri <span class="token operator">=</span> <span class="token class-name">MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media</span><span class="token punctuation">.</span>EXTERNAL_CONTENT_URI<span class="token punctuation">;</span>
  <span class="token class-name">String</span> selection <span class="token operator">=</span> <span class="token class-name">MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media</span><span class="token punctuation">.</span>IS_MUSIC <span class="token operator">+</span> <span class="token string">"!= 0"</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> sortOrder <span class="token operator">=</span> <span class="token class-name">MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media</span><span class="token punctuation">.</span>TITLE <span class="token operator">+</span> <span class="token string">" ASC"</span><span class="token punctuation">;</span>
  <span class="token class-name">Cursor</span> cursor <span class="token operator">=</span> contentResolver<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>uri<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> selection<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> sortOrder<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>cursor <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> cursor<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      audioList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">moveToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token class-name">String</span> data <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getColumnIndex</span><span class="token punctuation">(</span><span class="token class-name">MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media</span><span class="token punctuation">.</span>DATA<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">String</span> title <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getColumnIndex</span><span class="token punctuation">(</span><span class="token class-name">MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media</span><span class="token punctuation">.</span>TITLE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">String</span> album <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getColumnIndex</span><span class="token punctuation">(</span><span class="token class-name">MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media</span><span class="token punctuation">.</span>ALBUM<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">String</span> artist <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getColumnIndex</span><span class="token punctuation">(</span><span class="token class-name">MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media</span><span class="token punctuation">.</span>ARTIST<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token comment">// Save to audioList</span>
          audioList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Audio</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> title<span class="token punctuation">,</span> album<span class="token punctuation">,</span> artist<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  cursor<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>After retrieving data from the device the <code>playAudio()</code> function can play it on the <code>Service</code>.</p>
<p>In <code>MainActivity</code>‘s <code>onCreate()</code> method add the following code. Be sure to have at least one audio track the service can play or the app will crash.</p>
<pre class="language-java"><code class="java language-java"><span class="token function">loadAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//play the first audio in the ArrayList</span>
<span class="token function">playAudio</span><span class="token punctuation">(</span>audioList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>If you’re ready for more, then keep reading, or this is also a good opportunity to take a quick break before continuing</strong>.</p>
<p>Next I will focus on user interaction with the <code>MediaPlayerService</code> and handling interruptions that occur while playing media like incoming calls, change of audio outputs and other functionality needed to build a complete Audio Player app.</p>
<p>The key component for interacting with background services is <a href="https://developer.android.com/reference/android/content/BroadcastReceiver.html"><code>BroadcastReceiver</code></a>.</p>
<h2 id="whatisabroadcastreceiver">What is a <code>BroadcastReceiver</code>?</h2>
<p>Android system components and apps make system wide calls through intents with the help of <code>sendBroadcast()</code>, <code>sendStickyBroadcast()</code> or <code>sendOrderedBroadcast()</code> methods to notify interested applications. Broadcast intents can be useful for providing a messaging and event system between application components or used by the Android system to notify interested applications about key system events. Registered <code>BroadcastReceiver</code>s intercept these events broadcast to the whole Android system. The <code>BroadcastReceiver</code>s purpose is to wait for certain events to happen and to react to these events, but a <code>BroadcastReceiver</code> does not react to all the incoming events, only specific events. When a <code>BroadcastReceiver</code> detects a matching intent it will call its <code>onReceive()</code> method to handle it.</p>
<p>You can register a <code>BroadcastReceiver</code> in two ways, statically in <em>AndroidManifest.xml</em> or dynamically by using the <code>registerReceiver()</code> method at runtime.</p>
<p>For this tutorial, the <code>BroadcastReceiver</code>s are dynamically created since it’s important that the <code>MediaPlayerService</code> listens for events only when the player is active. It’s not a good user experience if the app starts playing audio unexpectedly after an event was triggered. If you register a receiver, you must unregister it when it’s no longer needed.</p>
<h2 id="letsgetbacktotheaudioplayerapp">Lets Get Back to the Audio Player App</h2>
<p>For a more complete audio app I added a <code>RecyclerView</code>, and with the help of the <code>loadAudio()</code> function, loaded local audio files to the <code>RecyclerView</code>. I also made changes to the color scheme and layout. I wont go into detail describing the process of adding the <code>RecyclerView</code> to the app, but you can see the end result on <a href="https://github.com/sitepoint-editors/AudioPlayer">GitHub</a>.</p>
<p>If you want to learn more about <code>RecyclerView</code>, then read my <a href="https://www.sitepoint.com/mastering-complex-lists-with-the-android-recyclerview/">article</a>.</p>
<p>Another change is the <code>playAudio()</code> function and the <code>Service</code>s <code>onStartCommand()</code> method, but I will return to these changes later and focus on the <code>BroadcastReceiver</code>s events and user interaction with the <code>Service</code>.</p><div class="proper-ad-unit">
          <div id="proper-ad-sitepoint_content_4" class="sitepoint_content"></div>
        </div><p></p>
<h2 id="changeofaudiooutputsheadphoneremoved">Change of audio outputs (headphone removed)</h2>
<p>In media apps it’s common that when a user removes their headphones from the jack the media stops playing.</p>
<p>In the <code>MediaPlayerService</code> class create a <code>BroadcastReceiver</code> that listens to <code>ACTION_AUDIO_BECOMING_NOISY</code>, which means that the audio is about to become ‘noisy’ due to a change in audio outputs. Add the following functions in the service class.</p>
<pre class="language-java"><code class="java language-java"><span class="token comment">//Becoming noisy</span>
<span class="token keyword">private</span> <span class="token class-name">BroadcastReceiver</span> becomingNoisyReceiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BroadcastReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//pause audio on ACTION_AUDIO_BECOMING_NOISY</span>
        <span class="token function">pauseMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">buildNotification</span><span class="token punctuation">(</span><span class="token class-name">PlaybackStatus</span><span class="token punctuation">.</span>PAUSED<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">registerBecomingNoisyReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//register after getting audio focus</span>
    <span class="token class-name">IntentFilter</span> intentFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token class-name">AudioManager</span><span class="token punctuation">.</span>ACTION_AUDIO_BECOMING_NOISY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerReceiver</span><span class="token punctuation">(</span>becomingNoisyReceiver<span class="token punctuation">,</span> intentFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The <code>BroadcastReceiver</code> instance will pause the <code>MediaPlayer</code> when the system makes an <code>ACTION_AUDIO_BECOMING_NOISY</code> call. To make the <code>BroadcastReceiver</code> available you must register it. The <code>registerBecomingNoisyReceiver()</code> function handles this and specifies the intent action <code>BECOMING_NOISY</code> which will trigger this <code>BroadcastReceiver</code>.</p>
<p>You have not yet implemented the <code>buildNotification()</code>, so don’t worry when it shows an error.</p>
<h2 id="handlingincomingcalls">Handling Incoming Calls</h2>
<p>The next functions avoid audio playing during calls, which would be a terrible user experience.</p>
<p>First create the following global variables in the <code>MediaPlayerService</code> class.</p>
<pre class="language-java"><code class="java language-java"><span class="token comment">//Handle incoming phone calls</span>
<span class="token keyword">private</span> <span class="token keyword">boolean</span> ongoingCall <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">PhoneStateListener</span> phoneStateListener<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">TelephonyManager</span> telephonyManager<span class="token punctuation">;</span>
</code></pre>
<p>Add the following function.</p>
<pre class="language-java"><code class="java language-java"><span class="token comment">//Handle incoming phone calls</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">callStateListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Get the telephony manager</span>
  telephonyManager <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TelephonyManager</span><span class="token punctuation">)</span> <span class="token function">getSystemService</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>TELEPHONY_SERVICE<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//Starting listening for PhoneState changes</span>
  phoneStateListener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PhoneStateListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCallStateChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">,</span> <span class="token class-name">String</span> incomingNumber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">switch</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token comment">//if at least one call exists or the phone is ringing</span>
              <span class="token comment">//pause the MediaPlayer</span>
              <span class="token keyword">case</span> <span class="token class-name">TelephonyManager</span><span class="token punctuation">.</span>CALL_STATE_OFFHOOK<span class="token operator">:</span>
              <span class="token keyword">case</span> <span class="token class-name">TelephonyManager</span><span class="token punctuation">.</span>CALL_STATE_RINGING<span class="token operator">:</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaPlayer <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                      <span class="token function">pauseMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                      ongoingCall <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span>
                  <span class="token keyword">break</span><span class="token punctuation">;</span>
              <span class="token keyword">case</span> <span class="token class-name">TelephonyManager</span><span class="token punctuation">.</span>CALL_STATE_IDLE<span class="token operator">:</span>
                  <span class="token comment">// Phone idle. Start playing.</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaPlayer <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                      <span class="token keyword">if</span> <span class="token punctuation">(</span>ongoingCall<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                          ongoingCall <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                          <span class="token function">resumeMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span>
                  <span class="token keyword">break</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// Register the listener with the telephony manager</span>
  <span class="token comment">// Listen for changes to the device call state.</span>
  telephonyManager<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>phoneStateListener<span class="token punctuation">,</span>
          <span class="token class-name">PhoneStateListener</span><span class="token punctuation">.</span>LISTEN_CALL_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The <code>callStateListener()</code> function is an implementation of the <code>PhoneStateListener</code> that listens to <code>TelephonyManager</code>s state changes. <code>TelephonyManager</code> provides access to information about the telephony services on the device and listens for changes to the device call state and reacts to these changes.</p>
<h2 id="redefinemethods">Redefine Methods</h2>
<p>I mentioned that I changed the methods described earlier in this article. I also made changes to the way audio files are passed to the <code>Service</code>. The audio files are loaded from the device with the help of the <code>loadAudio()</code> function. When the user wants to play audio, call the <code>playAudio(int audioIndex)</code> function with an index of the wanted audio from the <code>ArrayList</code> of loaded audio files.</p>
<p>When calling the <code>playAudio()</code> function for the first time, the <code>ArrayList</code> is stored in <code>SharedPreferences</code> together with the audio index number and when the <code>MediaPlayerService</code> wants to play new audio it loads it from <code>SharedPreferences</code>. This is one way to load the <code>Audio</code> array to the <code>Service</code>, but there are others.</p>
<p>Open <em>build.gradle (app)</em> and add dependencies for the <a href="https://github.com/google/gson">Gson</a> library.</p>
<pre class="language-gradle"><code class="gradle language-gradle">dependencies {
  ...
  compile group: 'com.google.code.gson', name: 'gson', version: '2.7', changing: true
}
</code></pre>
<p>The following class handles Data storage.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StorageUtil</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> STORAGE <span class="token operator">=</span> <span class="token string">" com.valdioveliu.valdio.audioplayer.STORAGE"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">SharedPreferences</span> preferences<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">StorageUtil</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">storeAudio</span><span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Audio</span><span class="token punctuation">&gt;</span></span> arrayList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        preferences <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getSharedPreferences</span><span class="token punctuation">(</span>STORAGE<span class="token punctuation">,</span> <span class="token class-name">Context</span><span class="token punctuation">.</span>MODE_PRIVATE<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SharedPreferences<span class="token punctuation">.</span>Editor</span> editor <span class="token operator">=</span> preferences<span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> json <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>arrayList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        editor<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">"audioArrayList"</span><span class="token punctuation">,</span> json<span class="token punctuation">)</span><span class="token punctuation">;</span>
        editor<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Audio</span><span class="token punctuation">&gt;</span></span> <span class="token function">loadAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        preferences <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getSharedPreferences</span><span class="token punctuation">(</span>STORAGE<span class="token punctuation">,</span> <span class="token class-name">Context</span><span class="token punctuation">.</span>MODE_PRIVATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> json <span class="token operator">=</span> preferences<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"audioArrayList"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Type</span> type <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TypeToken</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ArrayList</span><span class="token punctuation">&lt;</span><span class="token class-name">Audio</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">storeAudioIndex</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        preferences <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getSharedPreferences</span><span class="token punctuation">(</span>STORAGE<span class="token punctuation">,</span> <span class="token class-name">Context</span><span class="token punctuation">.</span>MODE_PRIVATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SharedPreferences<span class="token punctuation">.</span>Editor</span> editor <span class="token operator">=</span> preferences<span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        editor<span class="token punctuation">.</span><span class="token function">putInt</span><span class="token punctuation">(</span><span class="token string">"audioIndex"</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        editor<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">loadAudioIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        preferences <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getSharedPreferences</span><span class="token punctuation">(</span>STORAGE<span class="token punctuation">,</span> <span class="token class-name">Context</span><span class="token punctuation">.</span>MODE_PRIVATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> preferences<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"audioIndex"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//return -1 if no data found</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clearCachedAudioPlaylist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        preferences <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getSharedPreferences</span><span class="token punctuation">(</span>STORAGE<span class="token punctuation">,</span> <span class="token class-name">Context</span><span class="token punctuation">.</span>MODE_PRIVATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SharedPreferences<span class="token punctuation">.</span>Editor</span> editor <span class="token operator">=</span> preferences<span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        editor<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        editor<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now it’s time to change the <code>playAudio()</code> function. First in the <code>MainActivity</code> class create a global static <code>String</code>.</p><div class="proper-ad-unit">
          <div id="proper-ad-sitepoint_content_5" class="sitepoint_content"></div>
        </div><p></p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token class-name">Broadcast_PLAY_NEW_AUDIO</span> <span class="token operator">=</span> <span class="token string">"com.valdioveliu.valdio.audioplayer.PlayNewAudio"</span><span class="token punctuation">;</span>
<span class="token comment">// Change to your package name</span>
</code></pre>
<p>This string sends broadcast intents to the <code>MediaPlayerService</code> that the user wants to play new audio and has updated the cached index of the audio they want to play. The <code>BroadcastReceiver</code> that handles this intent is not created yet, for now replace your old <code>playAudio()</code> function in the <code>MainActivity</code> with the following.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">playAudio</span><span class="token punctuation">(</span><span class="token keyword">int</span> audioIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//Check is service is active</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>serviceBound<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//Store Serializable audioList to SharedPreferences</span>
        <span class="token class-name">StorageUtil</span> storage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StorageUtil</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        storage<span class="token punctuation">.</span><span class="token function">storeAudio</span><span class="token punctuation">(</span>audioList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        storage<span class="token punctuation">.</span><span class="token function">storeAudioIndex</span><span class="token punctuation">(</span>audioIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Intent</span> playerIntent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">MediaPlayerService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">startService</span><span class="token punctuation">(</span>playerIntent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">bindService</span><span class="token punctuation">(</span>playerIntent<span class="token punctuation">,</span> serviceConnection<span class="token punctuation">,</span> <span class="token class-name">Context</span><span class="token punctuation">.</span>BIND_AUTO_CREATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//Store the new audioIndex to SharedPreferences</span>
        <span class="token class-name">StorageUtil</span> storage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StorageUtil</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        storage<span class="token punctuation">.</span><span class="token function">storeAudioIndex</span><span class="token punctuation">(</span>audioIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Service is active</span>
        <span class="token comment">//Send a broadcast to the service -&gt; PLAY_NEW_AUDIO</span>
        <span class="token class-name">Intent</span> broadcastIntent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token class-name">Broadcast_PLAY_NEW_AUDIO</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">sendBroadcast</span><span class="token punctuation">(</span>broadcastIntent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The audio is not passed to the <code>Service</code> through <code>putExtra()</code>, so the <code>Service</code> has to load the data from the <code>SharedPreferences</code> and this is why the <code>onStartCommand()</code> method needs to be rewritten. I will return to this method at the end of this tutorial to give the complete <code>onStartCommand()</code> implementation. For now, add the following global variables to the <code>MediaPlayerService</code> class.</p>
<pre class="language-java"><code class="java language-java"><span class="token comment">//List of available Audio files</span>
<span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Audio</span><span class="token punctuation">&gt;</span></span> audioList<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> audioIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">Audio</span> activeAudio<span class="token punctuation">;</span> <span class="token comment">//an object of the currently playing audio</span>
</code></pre>
<h2 id="playnewaudiobroadcast">Play New Audio Broadcast</h2>
<p>When the <code>MediaPlayerService</code> is playing something and the user wants to play a new track, you must notify the service that it needs to move to new audio. You need a way for the <code>Service</code> to listen to these “play new Audio” calls and act on them. How? Another <code>BroadcastReceiver</code>. I mentioned these “play new Audio” calls in the <em>Redefine methods</em> section when calling the <code>playAudio()</code> function.</p>
<p>In the <code>MediaPlayerService</code> class add the following functions.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token class-name">BroadcastReceiver</span> playNewAudio <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BroadcastReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">//Get the new media index form SharedPreferences</span>
        audioIndex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StorageUtil</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loadAudioIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>audioIndex <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> audioIndex <span class="token operator">&lt;</span> audioList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//index is in a valid range</span>
            activeAudio <span class="token operator">=</span> audioList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>audioIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">stopSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//A PLAY_NEW_AUDIO action received</span>
        <span class="token comment">//reset mediaPlayer to play the new Audio</span>
        <span class="token function">stopMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initMediaPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">updateMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">buildNotification</span><span class="token punctuation">(</span><span class="token class-name">PlaybackStatus</span><span class="token punctuation">.</span>PLAYING<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">register_playNewAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//Register playNewMedia receiver</span>
    <span class="token class-name">IntentFilter</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token class-name">MainActivity<span class="token punctuation">.</span>Broadcast_PLAY_NEW_AUDIO</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerReceiver</span><span class="token punctuation">(</span>playNewAudio<span class="token punctuation">,</span> filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>When intercepting a <code>PLAY_NEW_AUDIO</code> intent, this <code>BroadcastReceiver</code> loads the updated index and updates the <code>activeAudio</code> object to the new media and the <code>MediaPlayer</code> is reset to play the new audio. The <code>buildNotification()</code> function is not yet implemented so it shows an error.</p>
<h2 id="registerbroadcastreceivers">Register <code>BroadcastReceiver</code>S</h2>
<p>In the <code>Service</code>s <code>onCreate()</code> method add the registration calls for the <code>BroadcastReceiver</code>s.</p>
<pre class="language-java"><code class="java language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Perform one-time setup procedures</span>

    <span class="token comment">// Manage incoming phone calls during playback.</span>
    <span class="token comment">// Pause MediaPlayer on incoming call,</span>
    <span class="token comment">// Resume on hangup.</span>
    <span class="token function">callStateListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//ACTION_AUDIO_BECOMING_NOISY -- change in audio outputs -- BroadcastReceiver</span>
    <span class="token function">registerBecomingNoisyReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Listen for new Audio to play -- BroadcastReceiver</span>
    <span class="token function">register_playNewAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>You must unregister all the registered <code>BroadcastReceiver</code>s when they are not needed anymore. This happens in the <code>Service</code>s <code>onDestroy()</code> method. Replace your current <code>onDestroy()</code> method with the following. Again, don’t worry about the <code>removeNotification()</code>, it’s implemented later.</p>
<pre class="language-java"><code class="java language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaPlayer <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">stopMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">removeAudioFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Disable the PhoneStateListener</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>phoneStateListener <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        telephonyManager<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>phoneStateListener<span class="token punctuation">,</span> <span class="token class-name">PhoneStateListener</span><span class="token punctuation">.</span>LISTEN_NONE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">removeNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//unregister BroadcastReceivers</span>
    <span class="token function">unregisterReceiver</span><span class="token punctuation">(</span>becomingNoisyReceiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">unregisterReceiver</span><span class="token punctuation">(</span>playNewAudio<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//clear cached playlist</span>
    <span class="token keyword">new</span> <span class="token class-name">StorageUtil</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clearCachedAudioPlaylist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>When the <code>Service</code> is destroyed it must stop listening to incoming calls and release the <code>TelephonyManager</code> resources. Another final thing the <code>Service</code> handles before it’s destroyed is clearing the data stored in the <code>SharedPreferences</code>.</p>
<h2 id="userinteractions">User Interactions</h2>
<p>Interacting with the <code>MediaPlayerService</code> is one of the key features of an audio player app, because users don’t need to play media, but also need to have control over the app. This is not as easy as it looks when working with background services because there is no user interface in background threads. Android Lollipop introduced new features, including Android <a href="https://developer.android.com/reference/android/app/Notification.MediaStyle.html">MediaStyle notifications</a>.</p>
<p><code>Notification.MediaStyle</code> allows you to add media buttons without having to create custom notifications. In this example I will use the <code>MediaStyle</code>s support library, <a href="https://developer.android.com/reference/android/support/v7/app/NotificationCompat.MediaStyle.html"><code>NotificationCompat.MediaStyle</code></a> to support older Android versions.</p>
<p>To have full control over media playback in the <code>MediaPlayerService</code> you need to create an instance of <code>MediaSession</code>. <code>MediaSession</code> allows interaction with media controllers, volume keys, media buttons, and transport controls. An app creates an instance of <code>MediaSession</code> when it wants to publish media playback information or handle media keys.</p>
<p>To build a <code>MediaStyle</code> notification for this example, the <code>MediaPlayerService</code> will make use of <code>MediaSession</code>s transport controls to add notification controls and publish <code>MetaData</code> so the Android system know that it’s playing audio.</p>
<p>Before moving on, add the following variables in the <code>MediaPlayerService</code> class.</p><div class="proper-ad-unit">
          <div id="proper-ad-sitepoint_content_6" class="sitepoint_content"></div>
        </div><p></p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ACTION_PLAY <span class="token operator">=</span> <span class="token string">"com.valdioveliu.valdio.audioplayer.ACTION_PLAY"</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ACTION_PAUSE <span class="token operator">=</span> <span class="token string">"com.valdioveliu.valdio.audioplayer.ACTION_PAUSE"</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ACTION_PREVIOUS <span class="token operator">=</span> <span class="token string">"com.valdioveliu.valdio.audioplayer.ACTION_PREVIOUS"</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ACTION_NEXT <span class="token operator">=</span> <span class="token string">"com.valdioveliu.valdio.audioplayer.ACTION_NEXT"</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ACTION_STOP <span class="token operator">=</span> <span class="token string">"com.valdioveliu.valdio.audioplayer.ACTION_STOP"</span><span class="token punctuation">;</span>

<span class="token comment">//MediaSession</span>
<span class="token keyword">private</span> <span class="token class-name">MediaSessionManager</span> mediaSessionManager<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">MediaSessionCompat</span> mediaSession<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">MediaControllerCompat<span class="token punctuation">.</span>TransportControls</span> transportControls<span class="token punctuation">;</span>

<span class="token comment">//AudioPlayer notification ID</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> NOTIFICATION_ID <span class="token operator">=</span> <span class="token number">101</span><span class="token punctuation">;</span>
</code></pre>
<p>The <code>String</code> variables are used to notify which action is triggered from the <code>MediaSession</code> callback listener. The rest of the instances relate to the <code>MediaSession</code> and a notification ID to uniquely identify the MediaStyle notification.</p>
<p>The following functions handle the initialization of the <code>MediaSession</code> and setting the <code>MetaData</code> to an active session. An important part of the following <code>initMediaSession()</code> function is setting the <code>MediaSession</code> callbacks to handle events coming from the notification buttons.</p>
<p>Add the following functions in the <code>MediaPlayerService</code> class.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initMediaSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">RemoteException</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaSessionManager <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">//mediaSessionManager exists</span>

  mediaSessionManager <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MediaSessionManager</span><span class="token punctuation">)</span> <span class="token function">getSystemService</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>MEDIA_SESSION_SERVICE<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Create a new MediaSession</span>
  mediaSession <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediaSessionCompat</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"AudioPlayer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//Get MediaSessions transport controls</span>
  transportControls <span class="token operator">=</span> mediaSession<span class="token punctuation">.</span><span class="token function">getController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransportControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//set MediaSession -&gt; ready to receive media commands</span>
  mediaSession<span class="token punctuation">.</span><span class="token function">setActive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//indicate that the MediaSession handles transport control commands</span>
  <span class="token comment">// through its MediaSessionCompat.Callback.</span>
  mediaSession<span class="token punctuation">.</span><span class="token function">setFlags</span><span class="token punctuation">(</span><span class="token class-name">MediaSessionCompat</span><span class="token punctuation">.</span>FLAG_HANDLES_TRANSPORT_CONTROLS<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//Set mediaSession's MetaData</span>
  <span class="token function">updateMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Attach Callback to receive MediaSession updates</span>
  mediaSession<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MediaSessionCompat<span class="token punctuation">.</span>Callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Implement callbacks</span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">resumeMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">buildNotification</span><span class="token punctuation">(</span><span class="token class-name">PlaybackStatus</span><span class="token punctuation">.</span>PLAYING<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">pauseMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">buildNotification</span><span class="token punctuation">(</span><span class="token class-name">PlaybackStatus</span><span class="token punctuation">.</span>PAUSED<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSkipToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onSkipToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">skipToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">updateMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">buildNotification</span><span class="token punctuation">(</span><span class="token class-name">PlaybackStatus</span><span class="token punctuation">.</span>PLAYING<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSkipToPrevious</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onSkipToPrevious</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">skipToPrevious</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">updateMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">buildNotification</span><span class="token punctuation">(</span><span class="token class-name">PlaybackStatus</span><span class="token punctuation">.</span>PLAYING<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">removeNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//Stop the service</span>
          <span class="token function">stopSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSeekTo</span><span class="token punctuation">(</span><span class="token keyword">long</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onSeekTo</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">updateMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Bitmap</span> albumArt <span class="token operator">=</span> <span class="token class-name">BitmapFactory</span><span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//replace with medias albumArt</span>
  <span class="token comment">// Update the current metadata</span>
  mediaSession<span class="token punctuation">.</span><span class="token function">setMetadata</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MediaMetadataCompat<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">putBitmap</span><span class="token punctuation">(</span><span class="token class-name">MediaMetadataCompat</span><span class="token punctuation">.</span>METADATA_KEY_ALBUM_ART<span class="token punctuation">,</span> albumArt<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token class-name">MediaMetadataCompat</span><span class="token punctuation">.</span>METADATA_KEY_ARTIST<span class="token punctuation">,</span> activeAudio<span class="token punctuation">.</span><span class="token function">getArtist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token class-name">MediaMetadataCompat</span><span class="token punctuation">.</span>METADATA_KEY_ALBUM<span class="token punctuation">,</span> activeAudio<span class="token punctuation">.</span><span class="token function">getAlbum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token class-name">MediaMetadataCompat</span><span class="token punctuation">.</span>METADATA_KEY_TITLE<span class="token punctuation">,</span> activeAudio<span class="token punctuation">.</span><span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The <code>updateMetaData()</code> method has a <code>Bitmap</code> image that you need to create, so add an image to the <em>drawable</em> folder of the project. The <code>Callback()</code> override methods make use of the media player key functions described earlier. Next add the media player functions mentioned earlier to the <code>Service</code>.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">skipToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>audioIndex <span class="token operator">==</span> audioList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//if last in playlist</span>
        audioIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        activeAudio <span class="token operator">=</span> audioList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>audioIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//get next in playlist</span>
        activeAudio <span class="token operator">=</span> audioList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">++</span>audioIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//Update stored index</span>
    <span class="token keyword">new</span> <span class="token class-name">StorageUtil</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">storeAudioIndex</span><span class="token punctuation">(</span>audioIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">stopMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//reset mediaPlayer</span>
    mediaPlayer<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initMediaPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">skipToPrevious</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>audioIndex <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//if first in playlist</span>
        <span class="token comment">//set index to the last of audioList</span>
        audioIndex <span class="token operator">=</span> audioList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        activeAudio <span class="token operator">=</span> audioList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>audioIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//get previous in playlist</span>
        activeAudio <span class="token operator">=</span> audioList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">--</span>audioIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//Update stored index</span>
    <span class="token keyword">new</span> <span class="token class-name">StorageUtil</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">storeAudioIndex</span><span class="token punctuation">(</span>audioIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">stopMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//reset mediaPlayer</span>
    mediaPlayer<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initMediaPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now the service needs a way to build the <code>MediaStyle</code> notification, but the service needs a way to keep track of its playback status. For this create a new enumeration.</p>
<p>In your project create the following class.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">PlaybackStatus</span> <span class="token punctuation">{</span>
    PLAYING<span class="token punctuation">,</span>
    PAUSED
<span class="token punctuation">}</span>
</code></pre>
<p>Now the service has a way to keep track of its playback status add the following function for building the notifications.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">buildNotification</span><span class="token punctuation">(</span><span class="token class-name">PlaybackStatus</span> playbackStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> notificationAction <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span></span>R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>ic_media_pause<span class="token punctuation">;</span><span class="token comment">//needs to be initialized</span>
    <span class="token class-name">PendingIntent</span> play_pauseAction <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token comment">//Build a new notification according to the current state of the MediaPlayer</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>playbackStatus <span class="token operator">==</span> <span class="token class-name">PlaybackStatus</span><span class="token punctuation">.</span>PLAYING<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        notificationAction <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span></span>R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>ic_media_pause<span class="token punctuation">;</span>
        <span class="token comment">//create the pause action</span>
        play_pauseAction <span class="token operator">=</span> <span class="token function">playbackAction</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>playbackStatus <span class="token operator">==</span> <span class="token class-name">PlaybackStatus</span><span class="token punctuation">.</span>PAUSED<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        notificationAction <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span></span>R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>ic_media_play<span class="token punctuation">;</span>
        <span class="token comment">//create the play action</span>
        play_pauseAction <span class="token operator">=</span> <span class="token function">playbackAction</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Bitmap</span> largeIcon <span class="token operator">=</span> <span class="token class-name">BitmapFactory</span><span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//replace with your own image</span>

    <span class="token comment">// Create a new Notification</span>
    <span class="token class-name">NotificationCompat<span class="token punctuation">.</span>Builder</span> notificationBuilder <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">NotificationCompat<span class="token punctuation">.</span>Builder</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">NotificationCompat<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setShowWhen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
            <span class="token comment">// Set the Notification style</span>
            <span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">NotificationCompat<span class="token punctuation">.</span>MediaStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token comment">// Attach our MediaSession token</span>
                    <span class="token punctuation">.</span><span class="token function">setMediaSession</span><span class="token punctuation">(</span>mediaSession<span class="token punctuation">.</span><span class="token function">getSessionToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token comment">// Show our playback controls in the compact notification view.</span>
                    <span class="token punctuation">.</span><span class="token function">setShowActionsInCompactView</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">// Set the Notification color</span>
            <span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorPrimary<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">// Set the large and small icons</span>
            <span class="token punctuation">.</span><span class="token function">setLargeIcon</span><span class="token punctuation">(</span>largeIcon<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setSmallIcon</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span></span>R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>stat_sys_headset<span class="token punctuation">)</span>
            <span class="token comment">// Set Notification content information</span>
            <span class="token punctuation">.</span><span class="token function">setContentText</span><span class="token punctuation">(</span>activeAudio<span class="token punctuation">.</span><span class="token function">getArtist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setContentTitle</span><span class="token punctuation">(</span>activeAudio<span class="token punctuation">.</span><span class="token function">getAlbum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setContentInfo</span><span class="token punctuation">(</span>activeAudio<span class="token punctuation">.</span><span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">// Add playback actions</span>
            <span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span></span>R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>ic_media_previous<span class="token punctuation">,</span> <span class="token string">"previous"</span><span class="token punctuation">,</span> <span class="token function">playbackAction</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span>notificationAction<span class="token punctuation">,</span> <span class="token string">"pause"</span><span class="token punctuation">,</span> play_pauseAction<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span></span>R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>ic_media_next<span class="token punctuation">,</span> <span class="token string">"next"</span><span class="token punctuation">,</span> <span class="token function">playbackAction</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">NotificationManager</span><span class="token punctuation">)</span> <span class="token function">getSystemService</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>NOTIFICATION_SERVICE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span>NOTIFICATION_ID<span class="token punctuation">,</span> notificationBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">removeNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">NotificationManager</span> notificationManager <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">NotificationManager</span><span class="token punctuation">)</span> <span class="token function">getSystemService</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>NOTIFICATION_SERVICE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    notificationManager<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span>NOTIFICATION_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>When called, this function will build the notification according to the <code>PlaybackStatus</code>.</p>
<p>The main purpose of the <code>buildNotification()</code> function is building the notification UI and setting up all the events that will trigger when a user clicks a notification button. You generate the actions through <code>PendingIntent</code>s from the <code>playbackAction()</code> function. Add it to the <code>MediaPlayerService</code>.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token class-name">PendingIntent</span> <span class="token function">playbackAction</span><span class="token punctuation">(</span><span class="token keyword">int</span> actionNumber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Intent</span> playbackAction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">MediaPlayerService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>actionNumber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
          <span class="token comment">// Play</span>
          playbackAction<span class="token punctuation">.</span><span class="token function">setAction</span><span class="token punctuation">(</span>ACTION_PLAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token class-name">PendingIntent</span><span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> actionNumber<span class="token punctuation">,</span> playbackAction<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
          <span class="token comment">// Pause</span>
          playbackAction<span class="token punctuation">.</span><span class="token function">setAction</span><span class="token punctuation">(</span>ACTION_PAUSE<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token class-name">PendingIntent</span><span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> actionNumber<span class="token punctuation">,</span> playbackAction<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
          <span class="token comment">// Next track</span>
          playbackAction<span class="token punctuation">.</span><span class="token function">setAction</span><span class="token punctuation">(</span>ACTION_NEXT<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token class-name">PendingIntent</span><span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> actionNumber<span class="token punctuation">,</span> playbackAction<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
          <span class="token comment">// Previous track</span>
          playbackAction<span class="token punctuation">.</span><span class="token function">setAction</span><span class="token punctuation">(</span>ACTION_PREVIOUS<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token class-name">PendingIntent</span><span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> actionNumber<span class="token punctuation">,</span> playbackAction<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now that the service generates actions when the user clicks on the notification buttons it needs a way to handle these actions. Add the following action to the service.</p>
<pre class="language-java"><code class="java language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">handleIncomingActions</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> playbackAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>playbackAction <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> playbackAction<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  <span class="token class-name">String</span> actionString <span class="token operator">=</span> playbackAction<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>actionString<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>ACTION_PLAY<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      transportControls<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>actionString<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>ACTION_PAUSE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      transportControls<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>actionString<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>ACTION_NEXT<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      transportControls<span class="token punctuation">.</span><span class="token function">skipToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>actionString<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>ACTION_PREVIOUS<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      transportControls<span class="token punctuation">.</span><span class="token function">skipToPrevious</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>actionString<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>ACTION_STOP<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      transportControls<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This function figures out which of the playback actions is triggered and executes one of the <code>MediaSession</code> callback methods through its transport controls. The callback methods, implemented in the <code>initMediaSession()</code> function handle all the <code>MediaPlayer</code> actions.</p>
<h2 id="finishingup">Finishing Up</h2>
<p>All that is left is to define the services <code>onStartCommand()</code> method. This method will handle the initialization of the <code>MediaSession</code>, the <code>MediaPlayer</code>, loading the cached audio playlist and building the <code>MediaStyle</code> notification. In the service class replace the old <code>onStartCommand()</code> method with the following.</p>
<pre class="language-java"><code class="java language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">onStartCommand</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">,</span> <span class="token keyword">int</span> flags<span class="token punctuation">,</span> <span class="token keyword">int</span> startId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//Load data from SharedPreferences</span>
      <span class="token class-name">StorageUtil</span> storage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StorageUtil</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      audioList <span class="token operator">=</span> storage<span class="token punctuation">.</span><span class="token function">loadAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      audioIndex <span class="token operator">=</span> storage<span class="token punctuation">.</span><span class="token function">loadAudioIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>audioIndex <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> audioIndex <span class="token operator">&lt;</span> audioList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//index is in a valid range</span>
          activeAudio <span class="token operator">=</span> audioList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>audioIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">stopSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NullPointerException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">stopSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//Request audio focus</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">requestAudioFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//Could not gain focus</span>
      <span class="token function">stopSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaSessionManager <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token function">initMediaSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">initMediaPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RemoteException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">stopSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">buildNotification</span><span class="token punctuation">(</span><span class="token class-name">PlaybackStatus</span><span class="token punctuation">.</span>PLAYING<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//Handle Intent action from MediaSession.TransportControls</span>
  <span class="token function">handleIncomingActions</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStartCommand</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> flags<span class="token punctuation">,</span> startId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>In the <code>initMediaPlayer()</code> function replace the <code>setDataSource()</code> call with the following line</p>
<pre class="language-java"><code class="java language-java">mediaPlayer<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>activeAudio<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>That sums it up for playing audio in a background service in Android. Now run the app and play audio the right way. Here is an example how my sample app looks. I added a <code>RecyclerView</code> to the app and the layout might look different, but the notification view and controls are the same.</p>
<p><img src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/1471529082Screenshot_2016-08-12-19-31-48.png" alt="Screenshot" loading="lazy"></p>
<p><img src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/1471529092Screenshot_2016-08-12-19-32-09.png" alt="Screenshot" loading="lazy"></p>
<p><img src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/1471529101Screenshot_2016-08-12-19-32-28.png" alt="Screenshot" loading="lazy"></p>
<h2 id="fastforward">Fast Forward</h2>
<p>And that’s it! I understand there was a lot to absorb and understand in this tutorial, so if you have any questions or comments, please let me know below.</p>
</div><aside class="b1k7fbs2"><h2 class="bqalzbe">Share This Article</h2><button aria-label="Share Sitepoint on facebook" data-network="facebook" class="social-share-button sgoxgza" color="black" style="--sgoxgza-0:black"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-square" class="svg-inline--fa fa-facebook-square fa-w-14 fa-lg share-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"></path></svg></button><button aria-label="Share Sitepoint on reddit" data-network="reddit" class="social-share-button sgoxgza" color="black" style="--sgoxgza-0:black"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit fa-w-16 fa-lg share-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"></path></svg></button><button aria-label="Share Sitepoint on twitter" data-network="twitter" class="social-share-button sgoxgza" color="black" style="--sgoxgza-0:black"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter-square" class="svg-inline--fa fa-twitter-square fa-w-14 fa-lg share-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></path></svg></button><button aria-label="Share Sitepoint on linkedin" data-network="linkedin" class="social-share-button sgoxgza" color="black" style="--sgoxgza-0:black"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14 fa-lg share-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></button><button aria-label="Share Sitepoint on email" data-network="email" class="social-share-button sgoxgza" color="black" style="--sgoxgza-0:black"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-w-16 fa-lg share-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></button></aside><aside class="b1k7fbs2"><h2 class="bqalzbe">Related Articles</h2><article class="s1ym2p63"><a href="https://www.sitepoint.com/accessing-localhost-from-anywhere/"><div data-bg="https://uploads.sitepoint.com/wp-content/uploads/2014/03/1625121925localhost-from-anywhere.png" class="lazyload f13hvvvv"></div></a><div class="c16injma"><a class="t12xxw3g" href="https://www.sitepoint.com/accessing-localhost-from-anywhere/">Accessing localhost from Anywhere</a><div class="ms9srjd"><a href="https://www.sitepoint.com/computing/"><span class="ctub9nm" style="--ctub9nm-4:#a2a2a2">Computing</span></a><p class="m11jemzk"><a href="https://www.sitepoint.com/author/pcatanzariti/"><span>By <!-- -->Patrick Catanzariti</span></a>, <time datetime="2021-07-01T01:00:09">July 01, 2021</time></p></div><p class="ejt0qrr">You've built a site locally and want to test it and show it off. Learn how easy it is to set up localhost access for you and your clients.</p></div></article><article class="s1ym2p63"><a href="https://www.sitepoint.com/how-to-simulate-mobile-devices-with-device-mode-in-chrome/"><div data-bg="https://uploads.sitepoint.com/wp-content/uploads/2017/02/1615949272mobile-testing.jpg" class="lazyload f13hvvvv"></div></a><div class="c16injma"><a class="t12xxw3g" href="https://www.sitepoint.com/how-to-simulate-mobile-devices-with-device-mode-in-chrome/">How to Simulate Mobile Devices with Device Mode in Chrome</a><div class="ms9srjd"><a href="https://www.sitepoint.com/mobile/"><span class="ctub9nm" style="--ctub9nm-4:#2C5773">Mobile</span></a><p class="m11jemzk"><a href="https://www.sitepoint.com/author/craig-buckler/"><span>By <!-- -->Craig Buckler</span></a>, <time datetime="2021-03-18T06:00:33">March 18, 2021</time></p></div><p class="ejt0qrr">Does your web app work in all devices? Testing is a huge job. Learn how to enable Chrome's useful device mode to emulate dozens of mobile devices.</p></div></article><article class="s1ym2p63"><a href="https://www.sitepoint.com/responsive-web-design-cross-browser-compatibility/"><div data-bg="https://uploads.sitepoint.com/wp-content/uploads/2013/03/1602775800CBT.jpg" class="lazyload f13hvvvv"></div></a><div class="c16injma"><a class="t12xxw3g" href="https://www.sitepoint.com/responsive-web-design-cross-browser-compatibility/">How to Test Responsive Web Design Cross-Browser Compatibility</a><div class="ms9srjd"><a href="https://www.sitepoint.com/html-css/"><span class="ctub9nm" style="--ctub9nm-4:#ef8d24">HTML &amp; CSS</span></a><p class="m11jemzk"><a href="https://www.sitepoint.com/author/craig-buckler/"><span>By <!-- -->Craig Buckler</span></a>, <time datetime="2020-10-15T07:00:22">October 15, 2020</time></p></div><p class="ejt0qrr">Craig introduces CSS options for setting up a responsive website, including media queries, Flexbox and Grid, and covers tools for testing cross-browser compatibility.</p></div></article></aside><div class="tehr35c"><h2 class="bqalzbe">Tags</h2><a class="skrmi3a" href="https://www.sitepoint.com/tag/audio/">audio</a><a class="skrmi3a" href="https://www.sitepoint.com/tag/audio-player/">audio player</a><a class="skrmi3a" href="https://www.sitepoint.com/tag/chrisw/">chrisw</a><a class="skrmi3a" href="https://www.sitepoint.com/tag/media/">media</a><a class="skrmi3a" href="https://www.sitepoint.com/tag/streaming/">streaming</a></div></section><div aria-label="Article sidebar" class="s27361g"><div class="am9wix7"><div class="admakik"><div class="dXNlcjo3MjAyNQ== a16x32zb"><img src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/1437387238valdio-96x96.jpg" alt="Valdio Veliu" loading="lazy" height="70" width="70" class="a1eqqr2y"><div><h3 class="a1n4qnu2"><a href="https://www.sitepoint.com/author/valdioveliu/">Valdio Veliu</a></h3><a href="https://github.com/valdio" rel="noreferrer noopener" target="_blank" aria-label="Valdio Veliu&#39;s github account" class="a1ytldcw"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github-square" class="svg-inline--fa fa-github-square fa-w-14 fa-lg share-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"></path></svg></a><a href="https://www.linkedin.com/in/valdio/" rel="noreferrer noopener" target="_blank" aria-label="Valdio Veliu&#39;s linkedin account" class="a1ytldcw"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14 fa-lg share-icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></div></div><p class="aq0gnlt">Valdio recently graduated in Computer Engineering. He is a mobile developer, who is passionate about mobile technologies and learning new things. He has worked with languages such as C, Java, php and is currently focused on Java, mobile and web development</p></div></div><aside data-type="books_new" class="s3srsdt" id="article_sidebar_xuwez1635751311279"><div id="ad_article_sidebar_xuwez1635751311279" data-type="books_new" class="proper-ad-unit a19jghoq" style="--a19jghoq-0:250px"></div><div><div class="sxi2kx8"><h4> New books out now!</h4><div data-layout="default" class="spapid0"><div><div class="bk2yy1g"><div class="book-cover cover-spine-overlay gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:129.60122699386503%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAaABQDASIAAhEBAxEB/8QAGgAAAgIDAAAAAAAAAAAAAAAAAAUDBgIEB//EACQQAAEEAgEEAgMAAAAAAAAAAAEAAgMEBRESBxMhIjFRQmFx/8QAGAEAAwEBAAAAAAAAAAAAAAAAAQIDBAX/xAAbEQACAgMBAAAAAAAAAAAAAAAAARESAhMiQf/aAAwDAQACEQMRAD8A541pcdAbKb1cNeOnMiYeQ/JR4Vtrk814O6CPPrvSeVsg6CDnahl4MOnPaNgLuZN+Gxsrl+lYr2CydjWv1vTfhC2cxfhuXO7FyDeIGkIqYCXDppncfjbDRbgDTrRkHkEfRCy6i5LGzVWxYiMshlcZZD8e31pULHuLZRxJH8KnyMj3M057iP2VPWr2Fr1ItQhCsOf/2Q==" alt="" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition-delay: 500ms;"><picture><source type="image/webp" srcset="https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=165&amp;h=214&amp;fit=crop&amp;fm=webp 165w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=248&amp;h=321&amp;fit=crop&amp;fm=webp 248w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=330&amp;h=428&amp;fit=crop&amp;fm=webp 330w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=495&amp;h=642&amp;fit=crop&amp;fm=webp 495w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?fm=webp 1304w" sizes="(max-width: 165px) 100vw, 165px"><source srcset="https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=165&amp;h=214&amp;fit=crop 165w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=248&amp;h=321&amp;fit=crop 248w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=330&amp;h=428&amp;fit=crop 330w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=495&amp;h=642&amp;fit=crop 495w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg 1304w" sizes="(max-width: 165px) 100vw, 165px"><img sizes="(max-width: 165px) 100vw, 165px" srcset="https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=165&amp;h=214&amp;fit=crop 165w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=248&amp;h=321&amp;fit=crop 248w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=330&amp;h=428&amp;fit=crop 330w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=495&amp;h=642&amp;fit=crop 495w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg 1304w" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg" alt="" loading="lazy" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 1; transition: opacity 500ms ease 0s;"></picture><noscript><picture><source type='image/webp' srcset="https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=165&h=214&fit=crop&fm=webp 165w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=248&h=321&fit=crop&fm=webp 248w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=330&h=428&fit=crop&fm=webp 330w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=495&h=642&fit=crop&fm=webp 495w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?fm=webp 1304w" sizes="(max-width: 165px) 100vw, 165px" /><source srcset="https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=165&h=214&fit=crop 165w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=248&h=321&fit=crop 248w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=330&h=428&fit=crop 330w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=495&h=642&fit=crop 495w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg 1304w" sizes="(max-width: 165px) 100vw, 165px" /><img loading="lazy" sizes="(max-width: 165px) 100vw, 165px" srcset="https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=165&h=214&fit=crop 165w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=248&h=321&fit=crop 248w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=330&h=428&fit=crop 330w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=495&h=642&fit=crop 495w,
https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg 1304w" src="https://cdn.sanity.io/images/708bnrs8/production/509a234b65df4a18f98c52453c2c5b7d901a7ff7-1304x1690.jpg?w=165&h=214&fit=crop" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="p165lja"><p data-size="small" font-weight="400" class="s1aa88yd" style="--s1aa88yd-0:400">Learn the basics of programming with the web's most popular language - JavaScript</p></div></div><div class="cpptuun"><a data-color="pink" data-type="default" data-size="medium" id="article_sidebar1-button" href="https://www.sitepoint.com/premium/books/learn-to-code-with-javascript/read/1/read/" data-unit="article_sidebar1" class="s65o7al">Read the book now</a></div></div><hr><div data-layout="default" class="spapid0"><div><div class="bk2yy1g"><div class="book-cover cover-spine-overlay gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:78.64431486880467%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAQABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQDBgf/xAAgEAACAQUAAgMAAAAAAAAAAAABAgMABAURIVFhIiMx/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABYRAQEBAAAAAAAAAAAAAAAAAAABYf/aAAwDAQACEQMRAD8A2DKT5nHZ+5ntIpZrYkfELsa9VZxcte4+G5aJ7Yvwqy9U+acktmkfZEuj4blLZCC7MjfU5ghG0Ebdc+6E1Pjwk1sHMhkJPWA5RTONCxWca6Cn9I8Gig//2Q==" alt="" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition-delay: 500ms;"><picture><source type="image/webp" srcset="https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=165&amp;h=130&amp;fit=crop&amp;fm=webp 165w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=248&amp;h=195&amp;fit=crop&amp;fm=webp 248w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=330&amp;h=260&amp;fit=crop&amp;fm=webp 330w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=495&amp;h=389&amp;fit=crop&amp;fm=webp 495w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?fm=webp 1372w" sizes="(max-width: 165px) 100vw, 165px"><source srcset="https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=165&amp;h=130&amp;fit=crop 165w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=248&amp;h=195&amp;fit=crop 248w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=330&amp;h=260&amp;fit=crop 330w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=495&amp;h=389&amp;fit=crop 495w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg 1372w" sizes="(max-width: 165px) 100vw, 165px"><img sizes="(max-width: 165px) 100vw, 165px" srcset="https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=165&amp;h=130&amp;fit=crop 165w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=248&amp;h=195&amp;fit=crop 248w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=330&amp;h=260&amp;fit=crop 330w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=495&amp;h=389&amp;fit=crop 495w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg 1372w" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg" alt="" loading="lazy" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 1; transition: opacity 500ms ease 0s;"></picture><noscript><picture><source type='image/webp' srcset="https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=165&h=130&fit=crop&fm=webp 165w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=248&h=195&fit=crop&fm=webp 248w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=330&h=260&fit=crop&fm=webp 330w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=495&h=389&fit=crop&fm=webp 495w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?fm=webp 1372w" sizes="(max-width: 165px) 100vw, 165px" /><source srcset="https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=165&h=130&fit=crop 165w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=248&h=195&fit=crop 248w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=330&h=260&fit=crop 330w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=495&h=389&fit=crop 495w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg 1372w" sizes="(max-width: 165px) 100vw, 165px" /><img loading="lazy" sizes="(max-width: 165px) 100vw, 165px" srcset="https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=165&h=130&fit=crop 165w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=248&h=195&fit=crop 248w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=330&h=260&fit=crop 330w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=495&h=389&fit=crop 495w,
https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg 1372w" src="https://cdn.sanity.io/images/708bnrs8/production/5e5ec5498fc8f40c0dbe1a9fc52eb308bf5f7516-1372x1079.jpg?w=165&h=130&fit=crop" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="p165lja"><p data-size="small" font-weight="400" class="s1aa88yd" style="--s1aa88yd-0:400">A practical guide to leading radical innovation and growth.</p></div></div><div class="cpptuun"><a data-color="pink" data-type="default" data-size="medium" id="article_sidebar2-button" href="https://www.sitepoint.com/premium/books/the-design-thinking-playbook/read/1/read/" data-unit="article_sidebar2" class="s65o7al">Read the book now</a></div></div></div></div></aside><aside data-type="no_fallback" class="s3srsdt" id="side_1_qne9pf1635751311279"><div id="ad_side_1_qne9pf1635751311279" data-type="no_fallback" class="proper-ad-unit a19jghoq" style="--a19jghoq-0:250px"></div><div></div></aside><aside data-type="no_fallback" class="s3srsdt" id="side_2_lyxio41635751311279"><div id="ad_side_2_lyxio41635751311279" data-type="no_fallback" class="proper-ad-unit a19jghoq" style="--a19jghoq-0:250px"></div><div></div></aside><aside data-type="no_fallback" class="s3srsdt" id="side_3_p9jtmt1635751311279"><div id="ad_side_3_p9jtmt1635751311279" data-type="no_fallback" class="proper-ad-unit a19jghoq" style="--a19jghoq-0:250px"></div><div></div></aside><a href="https://www.integromat.com/en?pc=sitepoint&amp;utm_source=sitepoint&amp;utm_medium=referral&amp;utm_campaign=sitepoint-tower-ad" target="_blank" rel="noopener noreferrer" id="integromat"><img src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/1621301494Sitepoint-Tower-Ad-Creatives.png" alt="Integromat Tower Ad" loading="lazy" class="i1pku24f"></a><div id="side_4_nif63u1635751311279" class="sticky sfiozro"></div></div></div></article></main><footer class="syzew71"><nav aria-label="Footer navigation"><div class="crfuex9"><div class="footer-links"><ul><li><h2>Stuff we do</h2></li><li><a href="https://www.sitepoint.com/premium/library/">Premium</a></li><li><a href="https://www.sitepoint.com/newsletters/">Newsletters</a></li><li><a href="https://www.sitepoint.com/community/">Forums</a></li><li><a href="https://www.sitepoint.com/premium/deals/">Deals</a></li></ul><ul><li><h2>About</h2></li><li><a href="https://www.sitepoint.com/about-us/">Our story</a></li><li><a href="https://www.sitepoint.com/legals/">Terms of use</a></li><li><a href="https://www.sitepoint.com/privacy-policy/">Privacy policy</a></li><li><a href="https://sitepoint.typeform.com/to/fNY7XG">Corporate memberships</a></li></ul><ul><li><h2>Contact</h2></li><li><a href="https://www.sitepoint.com/contact-us/">Contact us</a></li><li><a href="https://support.sitepoint.com/hc/en-us">FAQ</a></li><li><a href="https://sitepoint.typeform.com/to/HtAXVN">Publish your book with us</a></li><li><a href="https://www.sitepoint.com/write-for-us/">Write an article for us</a></li><li><a href="https://www.sitepoint.com/advertise/" target="_blank">Advertise</a></li></ul></div><div class="s1no14m2"></div><div class="footer-extra"><ul><li><h2>Connect</h2></li><li><a href="https://www.facebook.com/sitepoint" rel="noopener noreferrer" target="_blank" aria-label="See sitepoint facebook account"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-square" class="svg-inline--fa fa-facebook-square fa-w-14 fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"></path></svg></a><a href="https://twitter.com/sitepointdotcom" rel="noopener noreferrer" target="_blank" aria-label="See sitepoint twitter account"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter-square" class="svg-inline--fa fa-twitter-square fa-w-14 fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></path></svg></a><a href="https://www.sitepoint.com/feed/" rel="noopener noreferrer" target="_blank" aria-label="See sitepoint RSS feed"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss-square" class="svg-inline--fa fa-rss-square fa-w-14 fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM112 416c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm157.533 0h-34.335c-6.011 0-11.051-4.636-11.442-10.634-5.214-80.05-69.243-143.92-149.123-149.123-5.997-.39-10.633-5.431-10.633-11.441v-34.335c0-6.535 5.468-11.777 11.994-11.425 110.546 5.974 198.997 94.536 204.964 204.964.352 6.526-4.89 11.994-11.425 11.994zm103.027 0h-34.334c-6.161 0-11.175-4.882-11.427-11.038-5.598-136.535-115.204-246.161-251.76-251.76C68.882 152.949 64 147.935 64 141.774V107.44c0-6.454 5.338-11.664 11.787-11.432 167.83 6.025 302.21 141.191 308.205 308.205.232 6.449-4.978 11.787-11.432 11.787z"></path></svg></a></li></ul><div><p>© 2000 – <!-- -->2021<!-- --> SitePoint Pty. Ltd.</p><p class="recaptcha-branding">This site is protected by reCAPTCHA and the Google<a href="https://policies.google.com/privacy"> Privacy Policy </a>and<a href="https://policies.google.com/terms"> Terms of Service </a>apply.</p></div></div></div></nav></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><iframe name="__tcfapiLocator" style="display: none;" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/saved_resource.html"></iframe><script id="parsely-cfg" async="" defer="" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/p.js.download"></script><script>
          if (typeof window !== "undefined" && window) {
            window.PARSELY = window.PARSELY || {
              pageviewQueue: [],
              autotrack: false,
              pixelhost: null,
              onload: function() {
                for (var i = 0; i < window.PARSELY.pageviewQueue.length; i++) {
                  PARSELY.beacon.trackPageView(window.PARSELY.pageviewQueue[i]);
                }
              },
            };
          }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/a-step-by-step-guide-to-building-an-android-audio-player-app/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-7b73c51c960df52c0af1.js"],"app":["/app-08ef9e9d8f376d279903.js"]};/*]]>*/</script><script src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/polyfill-7b73c51c960df52c0af1.js.download" nomodule=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/app-08ef9e9d8f376d279903.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/a9a7754c-ed6fc4875d4344a7c426.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/af13d906-1932a438ec612a66348c.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/ec1189df-1d42d02c0d3b321dd3c9.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/framework-9e1d3bc9c6d0e2137f08.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/webpack-runtime-f09b512044df0cbd4cac.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/sitepoint.min.js.download" id="properSP" defer=""></script>
<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","341142497535117");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=341142497535117&amp;ev=PageView&amp;noscript=1"></noscript>
<iframe id="epik_localstore" src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/ct.html" width="1" height="1" style="display: none;"></iframe>


<link href="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/css" rel="stylesheet">
<style type="text/css">
  #bottom-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    background-color: #333333;
    width: 100%;
    height: 160px;
    padding: 10px 0;
    transition: all 0.3s ease-out;
    z-index: 9;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: "Roboto", "Helvetica Neue", "Helvetica", Helvetica, Arial,
      sans-serif;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }
  #bottom-bar .free-book {
    display: flex;
    width: 100%;
    height: 140px;
    justify-content: space-between;
    overflow: hidden;
    transition: all 0.4s ease-out;
  }
  #bottom-bar .free-book .item-form-cover {
    position: relative;
    display: none;
    margin: 0 20px;
    height: 164px;
    transform: translatey(0rem) rotate(0deg);
    transition: all 0.4s ease-out;
  }
  #bottom-bar .free-book .item-form-cover::-webkit-scrollbar {
    display: none;
  }
  #bottom-bar .free-book .item-form-cover img {
    height: 164px;
    width: auto; 
    max-width: unset;

  }
  #bottom-bar .free-book .item-form-cover::after {
    content: "";
    position: absolute;
    bottom: -2px;
    left: -2px;
    width: calc(100% + 4px);
    height: 101%;
    background-size: 104% auto;
    border-bottom: 1px solid #554435;
    border-radius: 0 0 4px 4px;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 118 146' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3ClinearGradient id='lgrad' x1='0%25' x2='0%25' y1='0%25' y2='20%25' %3E%3Cstop offset='20%25' style='stop-color:%23BF9773' /%3E%3Cstop offset='30%25' style='stop-color:%23C8A17E' /%3E%3Cstop offset='70%25' style='stop-color:%23C8A17E' /%3E%3Cstop offset='80%25' style='stop-color:%23BF9773' /%3E%3C/linearGradient%3E%3Cpattern id='stripe-pattern-horz' width='600' height='10' patternUnits='userSpaceOnUse' patternTransform='scale(0.3) rotate(90)'%3E%3Crect x='0' y='0' width='600' height='50' fill='url(%23lgrad)'/%3E%3C/pattern%3E%3Cfilter id='paper-shadow' x='-3' y='63' width='124' height='82' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='-4'/%3E%3CfeGaussianBlur stdDeviation='2'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0'/%3E%3CfeBlend in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeBlend in='SourceGraphic' in2='effect1_dropShadow' result='shape'/%3E%3C/filter%3E%3Cfilter id='string-shadow' x='0' y='0' width='100%25' height='100%25' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dx='.5' dy='1'/%3E%3CfeGaussianBlur stdDeviation='.5'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0'/%3E%3CfeBlend in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeBlend in='SourceGraphic' in2='effect1_dropShadow' result='shape'/%3E%3C/filter%3E%3C/defs%3E%3Cg filter='url(%23paper-shadow)'%3E%3Cpath d='M1 143V71l11.7 2 5.8 4.5c.5-2.3 4.2-5.1 16 .5 14.6 7 34.4 24 49 25 11.8.8 27.3 1.3 33.5 1.5V143a2 2 0 01-2 2H3a2 2 0 01-2-2z' fill='url(%23stripe-pattern-horz)'/%3E%3C/g%3E%3Cpath d='M12.7 72L1 70l-1 3.5 7.5-1 11 5c.5-2.3 4-2.1 15.8 3.5 5 2.4 12.3 4.3 18.2 8 11 7 22 14.3 31.5 15 11.7.8 26.8.3 33 .5l.5-1c-6.2-.2-22.2-.7-34-1.5-9.5-.7-21.3-8.1-32.4-15.2-5.9-3.7-11.6-7.4-16.7-9.8-11.7-5.6-15.7-2.3-16.2 0l-5.5-5z' fill='%23F2D3B6' fill-opacity='.9'/%3E%3Cg class='string' filter='url(%23string-shadow)'%3E%3Cpath d='M21.5 0v145.5' stroke='%23F2EDDE' stroke-linecap='round'/%3E%3Cpath d='M12.5 123c4.7-1.3 6.7-3 8.5-8.5h2c0-1.5.6-4.8 3-6 3-1.5 5-1 6-3' stroke='%23F2EDDE' stroke-linecap='round'/%3E%3Cpath d='M1 114.7l21-.2c1.9 0-.1-5-1.3-2.7-1 2.3.5 3.6 1.5 3.9 2.5-1.6 8-3.9 10.3-3.9 3 0 9.4 3 8.5 4.9-1 2-18.5-3.2-19.5-3.2s.1.2-4.5 3.2c-6 3.9-10.2 4.5-10.8 2.9-.7-1.6 7-6.6 10.8-6.6 3.8 0 5.6 1.2 6.5 1.5l94 .2' stroke='%23F2EDDE' stroke-linecap='round'/%3E%3C/g%3E%3C/svg%3E");
  }
  #bottom-bar .book-info {
    padding: 0 8px;
    width: 100%;
    height: 140px;
    transition: all 0.4s ease-out;
  }
  #bottom-bar .book-info .book-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    height: 40px;
    transition: all 0.4s ease-out;
  }
  #bottom-bar .book-info .book-header .item-form-title {
    color: #fff;
    font-size: 1rem;
    margin: 0 18px 0 0;
    font-weight: 400;
    transition: all 0.2s ease-out;
  }
  #bottom-bar .shrink-button {
    height: 18px;
    width: 18px;
    cursor: pointer;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 22 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M21.3 3.7c.4-.4.4-.9 0-1.2L19.1.3a.8.8 0 00-1.2 0l-7.1 7-7.1-7a.8.8 0 00-1.2 0L.3 2.5c-.4.3-.4.8 0 1.2l9.9 9.9c.3.3.9.3 1.2 0l10-10z' fill='%23fff'/%3E%3C/svg%3E");
    background-size: 100% 100%;
    background-color: transparent;
    border: none;
    transition: all 0.4s ease-out;
  }
  #bottom-bar .book-info .item-form-description {
    color: #fff;
    font-size: 0.8rem;
    margin: 0 0 12px;
    font-weight: 300;
    opacity: 1;
    transition: all 0.4s ease-out;
  }
  #bottom-bar .book-info .item-form {
    display: flex;
    opacity: 1;
    transition: all 0.4s ease-out;
  }
  #bottom-bar .book-info .item-form input {
    font-size: 11px;
    height: 28px;
    width: 100px;
    border: none;
    border-radius: 4px;
    margin: 0 10px 0 0;
  }
  #bottom-bar .book-info .item-form button {
    height: 28px;
    margin: 0 18px;
    font-size: 11px;
    padding: 0 12px;
    background: #10a59e;
    color: #fff;
    border-radius: 4px;
    font-weight: 400;
    border: none;
    cursor: pointer;
  }
  #bottom-bar .hidden {
    opacity: 0;
    visibility: hidden;
    transition: all 1s ease-out;
  }
  #bottom-bar .show {
    opacity: 1;
    visibility: visible;
    transition: all 1s ease-out;
  }
  #bottom-bar .sp-recaptcha {
    line-height: 1.5;
    font-size: 9px;
    margin: 12px 0 0;
    color: #fff;
  }
  #bottom-bar .sp-recaptcha a {
    color: #10a59e;
  }
  #bottom-bar.shrinked {
    height: 40px;
    padding: 0;
    overflow: hidden;
    transition: all 0.3s ease-out;
  }
  #bottom-bar.shrinked .free-book {
    justify-content: flex-start;
    align-items: center;
    height: 45px;
    transition: all 0.2s ease-in;
  }
  #bottom-bar.shrinked .shrink-button {
    transform: rotate(180deg);
    transition: all 0.4s ease-out;
  }
  #bottom-bar.shrinked .free-book .item-form-cover {
    transform: translatey(0.2rem) rotate(-5deg);
    position: relative;
    top: 63px;
    margin: 0 15px;
    transition: all 0.2s ease-out;
  }
  #bottom-bar.shrinked .book-info {
    height: 30px;
    transition: all 0.2s ease-out;
  }
  #bottom-bar.shrinked .book-info .book-header {
    align-items: center;
    justify-content: flex-start;
    height: 30px;
    transition: all 0.2s ease-out;
  }
  #bottom-bar.shrinked .book-info .book-header .item-form-title {
    margin: 0 18px 0 0;
    font-size: 16px;
    transition: all 0.2s ease-out;
  }
  #bottom-bar.shrinked .book-info .item-form-description {
    opacity: 0;
    transition: all 0.2s ease-out;
  }
  #bottom-bar.shrinked .item-form {
    opacity: 0;
    transform: scale3d(0, 0, 0);
    transition: all 0.2s ease-out;
  }
  #bottom-bar.shrinked .sp-recaptcha {
    opacity: 0;
    display: none;
    visibility: hidden;
  }
  @media (min-width: 624px) {
    #bottom-bar {
      height: 170px;
      padding: 15px 0;
    }
    #bottom-bar .free-book {
      height: 140px;
    }
    #bottom-bar .book-info {
      height: 140px;
      padding: 0 15px;
    }
    #bottom-bar .book-info .item-form input {
      width: 250px;
      margin: 0 20px 0 0;
    }
    #bottom-bar .book-info .item-form button {
      font-size: 15px;
      padding: 0px 22px;
    }
  }
  @media (min-width: 936px) {
    #bottom-bar {
      height: 205px;
      padding: 20px 0;
    }
    #bottom-bar .free-book {
      height: 164px;
      width: 740px;
    }
    #bottom-bar .free-book .item-form-cover {
      display: flex;
    }
    #bottom-bar .book-info {
      padding: 0 20px;
      height: 164px;
    }
    #bottom-bar .book-info .book-header {
      height: 50px;
    }
    #bottom-bar .book-info .book-header .item-form-title {
      font-size: 31px;
    }
    #bottom-bar .book-info .item-form-description {
      margin: 0 0 12px;
      font-size: 20px;
    }
    #bottom-bar .shrink-button {
      height: 22px;
      width: 22px;
    }
    #bottom-bar .book-info .item-form input {
      font-size: 20px;
      height: 36px;
      width: 180px;
      margin: 0 10px 0 0;
    }
    #bottom-bar .book-info .item-form button {
      margin: 0 20px;
      padding: 0 18px;
      font-size: 20px;
      height: 36px;
    }
    #bottom-bar .sp-recaptcha {
      margin: 14px 0 0;
      font-size: 11px;
    }
  }
</style>
<div id="bottom-bar" data-gtm-vis-recent-on-screen-9559795_502="6603925" data-gtm-vis-first-on-screen-9559795_502="6603926" data-gtm-vis-total-visible-time-9559795_502="100" data-gtm-vis-has-fired-9559795_502="1">
  <div class="free-book">
    <div class="item-form-cover">
      <img src="./A Step by Step Guide to Building an Android Audio Player App - SitePoint_files/1590639963jsbp.png">
    </div>
    <div class="book-info">
      <div class="book-header">
        <h4 class="item-form-title">FREE JavaScript Book</h4>
        <button class="shrink-button" aria-expanded="true"></button>
      </div>
      <p class="item-form-description">Valued at $11.95 on Amazon. Yours free!</p>
      <form name="item-form" id="item-form" class="item-form" action="https://www.sitepoint.com/premium/register-user">
        <input type="hidden" name="campaign" value="js-best-practice-reader">
        <input type="text" name="name" placeholder="Name" required="">
        <input type="email" name="email" placeholder="your@email.com" required="">
        <button type="submit">
          Submit
        </button>
      </form>
      <div class="sp-recaptcha hidden">
        This site is protected by reCAPTCHA and the Google
        <a href="https://policies.google.com/privacy">Privacy Policy</a> and
        <a href="https://policies.google.com/terms">Terms of Service</a>
        apply.
      </div>
    </div>
  </div>
</div>
<script type="text/javascript" id="">var BottomBar=document.querySelector("#bottom-bar"),ShrinkButton=document.querySelector("#bottom-bar .shrink-button"),BookDescription=document.querySelector("#bottom-bar .item-form-description"),BookForm=document.querySelector("#bottom-bar .item-form"),BookFormInputs=BookForm.getElementsByTagName("input"),BookFormSubmit=document.querySelector("#bottom-bar .item-form button"),RecaptchaLinks=document.querySelectorAll(".sp-recaptcha a"),Meta={heading:"FREE JavaScript Book",slug:"js-best-practice-reader",
bookCover:"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2020/05/1590639963jsbp.png",bookInfo:"Valued at $11.95 on Amazon. Yours free!"};
function grecaptchaSubmitHandler(a){a.preventDefault();var b=this;"undefined"!=typeof grecaptcha?grecaptcha.execute("6LfEw7cUAAAAABIV8YABIbOzqBJ3zr4BpjVbDXDK",{action:"free_book_bottomBar"}).then(function(c){inputToken=document.createElement("input");inputToken.setAttribute("name","recaptcha_token");inputToken.setAttribute("value",c);inputToken.setAttribute("type","hidden");b.appendChild(inputToken);b.submit()}):b.submit()}
function checkRecaptcha(){"undefined"!=typeof grecaptcha&&(document.querySelector(".sp-recaptcha").classList.remove("hidden"),document.querySelector(".sp-recaptcha").classList.add("show"),document.querySelector(".item-form").addEventListener("submit",grecaptchaSubmitHandler))}
function toggleBottomBar(){BottomBar.classList.toggle("shrinked");if(BottomBar.classList.contains("shrinked")){ShrinkButton.setAttribute("aria-expanded","false");BookDescription.setAttribute("aria-hidden","true");BookForm.setAttribute("aria-hidden","true");BookFormSubmit.setAttribute("disabled","");for(var a=0;a<BookFormInputs.length;a++)BookFormInputs[a].setAttribute("disabled","");a=0;for(var b=RecaptchaLinks.length;a<b;a++)RecaptchaLinks[a].setAttribute("tabindex","-1")}else{ShrinkButton.setAttribute("aria-expanded",
"true");BookDescription.setAttribute("aria-hidden","false");BookForm.setAttribute("aria-hidden","false");BookFormSubmit.removeAttribute("disabled","");for(a=0;a<BookFormInputs.length;a++)BookFormInputs[a].removeAttribute("disabled");a=0;for(b=RecaptchaLinks.length;a<b;a++)RecaptchaLinks[a].removeAttribute("tabindex")}}
(function(){document.forms["item-form"].campaign.value=Meta.slug;document.querySelector("#bottom-bar .item-form-cover img").src=Meta.bookCover;document.querySelector("#bottom-bar .item-form-title").innerHTML=Meta.heading;document.querySelector("#bottom-bar .item-form-description").innerHTML=Meta.bookInfo;checkRecaptcha();ShrinkButton.addEventListener("click",toggleBottomBar);document.addEventListener("keydown",function(a){"Escape"===a.key&&(BottomBar.classList.contains("shrinked")||toggleBottomBar())})})();</script></body></html>